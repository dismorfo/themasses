(function(a,b){function c(d,f,i){if(i===b&&d.nodeType===1){i="data-"+f.replace(rb,"$1-$2").toLowerCase();i=d.getAttribute(i);if(typeof i==="string"){try{i=i==="true"?true:i==="false"?false:i==="null"?null:!g.isNaN(i)?parseFloat(i):sb.test(i)?g.parseJSON(i):i}catch(k){}g.data(d,f,i)}else i=b}return i}function e(d){for(var f in d)if(f!=="toJSON")return false;return true}function h(d,f,i){var k=f+"defer",l=f+"queue",m=f+"mark",p=g.data(d,k,b,true);if(p&&(i==="queue"||!g.data(d,l,b,true))&&(i==="mark"||
!g.data(d,m,b,true)))setTimeout(function(){if(!g.data(d,l,b,true)&&!g.data(d,m,b,true)){g.removeData(d,k,true);p.resolve()}},0)}function j(){return false}function n(){return true}function r(d,f,i){var k=g.extend({},i[0]);k.type=d;k.originalEvent={};k.liveFired=b;g.event.handle.call(f,k);k.isDefaultPrevented()&&i[0].preventDefault()}function u(d){var f,i,k,l,m,p,t,v,w,D,O,T=[];l=[];m=g._data(this,"events");if(!(d.liveFired===this||!m||!m.live||d.target.disabled||d.button&&d.type==="click")){if(d.namespace)O=
RegExp("(^|\\.)"+d.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)");d.liveFired=this;var U=m.live.slice(0);for(t=0;t<U.length;t++){m=U[t];m.origType.replace(Ea,"")===d.type?l.push(m.selector):U.splice(t--,1)}l=g(d.target).closest(l,d.currentTarget);v=0;for(w=l.length;v<w;v++){D=l[v];for(t=0;t<U.length;t++){m=U[t];if(D.selector===m.selector&&(!O||O.test(m.namespace))&&!D.elem.disabled){p=D.elem;k=null;if(m.preType==="mouseenter"||m.preType==="mouseleave"){d.type=m.preType;if((k=g(d.relatedTarget).closest(m.selector)[0])&&
g.contains(p,k))k=p}if(!k||k!==p)T.push({elem:p,handleObj:m,level:D.level})}}}v=0;for(w=T.length;v<w;v++){l=T[v];if(i&&l.level>i)break;d.currentTarget=l.elem;d.data=l.handleObj.data;d.handleObj=l.handleObj;O=l.handleObj.origHandler.apply(l.elem,arguments);if(O===false||d.isPropagationStopped()){i=l.level;if(O===false)f=false;if(d.isImmediatePropagationStopped())break}}return f}}function x(d,f){return(d&&d!=="*"?d+".":"")+f.replace(tb,"`").replace(ub,"&")}function C(d,f,i){f=f||0;if(g.isFunction(f))return g.grep(d,
function(l,m){return!!f.call(l,m,l)===i});else if(f.nodeType)return g.grep(d,function(l){return l===f===i});else if(typeof f==="string"){var k=g.grep(d,function(l){return l.nodeType===1});if(vb.test(f))return g.filter(f,k,!i);else f=g.filter(f,k)}return g.grep(d,function(l){return g.inArray(l,f)>=0===i})}function J(d,f){if(!(f.nodeType!==1||!g.hasData(d))){var i=g.expando,k=g.data(d),l=g.data(f,k);if(k=k[i]){var m=k.events;l=l[i]=g.extend({},k);if(m){delete l.handle;l.events={};for(var p in m){i=
0;for(k=m[p].length;i<k;i++)g.event.add(f,p+(m[p][i].namespace?".":"")+m[p][i].namespace,m[p][i],m[p][i].data)}}}}}function M(d,f){var i;if(f.nodeType===1){f.clearAttributes&&f.clearAttributes();f.mergeAttributes&&f.mergeAttributes(d);i=f.nodeName.toLowerCase();if(i==="object")f.outerHTML=d.outerHTML;else if(i==="input"&&(d.type==="checkbox"||d.type==="radio")){if(d.checked)f.defaultChecked=f.checked=d.checked;if(f.value!==d.value)f.value=d.value}else if(i==="option")f.selected=d.defaultSelected;
else if(i==="input"||i==="textarea")f.defaultValue=d.defaultValue;f.removeAttribute(g.expando)}}function I(d){return"getElementsByTagName"in d?d.getElementsByTagName("*"):"querySelectorAll"in d?d.querySelectorAll("*"):[]}function N(d){if(d.type==="checkbox"||d.type==="radio")d.defaultChecked=d.checked}function S(d){if(g.nodeName(d,"input"))N(d);else"getElementsByTagName"in d&&g.grep(d.getElementsByTagName("input"),N)}function V(d,f){f.src?g.ajax({url:f.src,async:false,dataType:"script"}):g.globalEval((f.text||
f.textContent||f.innerHTML||"").replace(wb,"/*$0*/"));f.parentNode&&f.parentNode.removeChild(f)}function W(d,f,i){var k=f==="width"?d.offsetWidth:d.offsetHeight,l=f==="width"?xb:yb;if(k>0){i!=="border"&&g.each(l,function(){i||(k-=parseFloat(g.css(d,"padding"+this))||0);if(i==="margin")k+=parseFloat(g.css(d,i+this))||0;else k-=parseFloat(g.css(d,"border"+this+"Width"))||0});return k+"px"}k=ra(d,f,f);if(k<0||k==null)k=d.style[f]||0;k=parseFloat(k)||0;i&&g.each(l,function(){k+=parseFloat(g.css(d,"padding"+
this))||0;if(i!=="padding")k+=parseFloat(g.css(d,"border"+this+"Width"))||0;if(i==="margin")k+=parseFloat(g.css(d,i+this))||0});return k+"px"}function X(d){return function(f,i){if(typeof f!=="string"){i=f;f="*"}if(g.isFunction(i))for(var k=f.toLowerCase().split(Ra),l=0,m=k.length,p,t;l<m;l++){p=k[l];if(t=/^\+/.test(p))p=p.substr(1)||"*";p=d[p]=d[p]||[];p[t?"unshift":"push"](i)}}}function ea(d,f,i,k,l,m){l=l||f.dataTypes[0];m=m||{};m[l]=true;l=d[l];for(var p=0,t=l?l.length:0,v=d===Fa,w;p<t&&(v||!w);p++){w=
l[p](f,i,k);if(typeof w==="string")if(!v||m[w])w=b;else{f.dataTypes.unshift(w);w=ea(d,f,i,k,w,m)}}if((v||!w)&&!m["*"])w=ea(d,f,i,k,"*",m);return w}function Ga(d,f,i,k){if(g.isArray(f))g.each(f,function(m,p){i||zb.test(d)?k(d,p):Ga(d+"["+(typeof p==="object"||g.isArray(p)?m:"")+"]",p,i,k)});else if(!i&&f!=null&&typeof f==="object")for(var l in f)Ga(d+"["+l+"]",f[l],i,k);else k(d,f)}function Sa(){try{return new a.XMLHttpRequest}catch(d){}}function Ta(){setTimeout(Ab,0);return za=g.now()}function Ab(){za=
b}function sa(d,f){var i={};g.each(Ua.concat.apply([],Ua.slice(0,f)),function(){i[this]=d});return i}function Va(d){if(!Ha[d]){var f=K.body,i=g("<"+d+">").appendTo(f),k=i.css("display");i.remove();if(k==="none"||k===""){if(!ha){ha=K.createElement("iframe");ha.frameBorder=ha.width=ha.height=0}f.appendChild(ha);if(!ta||!ha.createElement){ta=(ha.contentWindow||ha.contentDocument).document;ta.write((K.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");ta.close()}i=ta.createElement(d);ta.body.appendChild(i);
k=g.css(i,"display");f.removeChild(ha)}Ha[d]=k}return Ha[d]}function Ia(d){return g.isWindow(d)?d:d.nodeType===9?d.defaultView||d.parentWindow:false}var K=a.document,Bb=a.navigator,Cb=a.location,g=function(){function d(){if(!f.isReady){try{K.documentElement.doScroll("left")}catch(q){setTimeout(d,1);return}f.ready()}}var f=function(q,E){return new f.fn.init(q,E,l)},i=a.jQuery,k=a.$,l,m=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,p=/\S/,t=/^\s+/,v=/\s+$/,w=/\d/,D=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,O=/^[\],:{}\s]*$/,
T=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,U=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Y=/(?:^|:|,)(?:\s*\[)+/g,ma=/(webkit)[ \/]([\w.]+)/,ca=/(opera)(?:.*version)?[ \/]([\w.]+)/,da=/(msie) ([\w.]+)/,ia=/(mozilla)(?:.*? rv:([\w.]+))?/,o=/-([a-z])/ig,s=function(q,E){return E.toUpperCase()},z=Bb.userAgent,B,y,A=Object.prototype.toString,F=Object.prototype.hasOwnProperty,H=Array.prototype.push,P=Array.prototype.slice,fa=String.prototype.trim,aa=Array.prototype.indexOf,ba={};f.fn=
f.prototype={constructor:f,init:function(q,E,L){var G;if(!q)return this;if(q.nodeType){this.context=this[0]=q;this.length=1;return this}if(q==="body"&&!E&&K.body){this.context=K;this[0]=K.body;this.selector=q;this.length=1;return this}if(typeof q==="string")if((G=q.charAt(0)==="<"&&q.charAt(q.length-1)===">"&&q.length>=3?[null,q,null]:m.exec(q))&&(G[1]||!E))if(G[1]){L=(E=E instanceof f?E[0]:E)?E.ownerDocument||E:K;if(q=D.exec(q))if(f.isPlainObject(E)){q=[K.createElement(q[1])];f.fn.attr.call(q,E,
true)}else q=[L.createElement(q[1])];else{q=f.buildFragment([G[1]],[L]);q=(q.cacheable?f.clone(q.fragment):q.fragment).childNodes}return f.merge(this,q)}else{if((E=K.getElementById(G[2]))&&E.parentNode){if(E.id!==G[2])return L.find(q);this.length=1;this[0]=E}this.context=K;this.selector=q;return this}else return!E||E.jquery?(E||L).find(q):this.constructor(E).find(q);else if(f.isFunction(q))return L.ready(q);if(q.selector!==b){this.selector=q.selector;this.context=q.context}return f.makeArray(q,this)},
selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return P.call(this,0)},get:function(q){return q==null?this.toArray():q<0?this[this.length+q]:this[q]},pushStack:function(q,E,L){var G=this.constructor();f.isArray(q)?H.apply(G,q):f.merge(G,q);G.prevObject=this;G.context=this.context;if(E==="find")G.selector=this.selector+(this.selector?" ":"")+L;else if(E)G.selector=this.selector+"."+E+"("+L+")";return G},each:function(q,E){return f.each(this,q,E)},ready:function(q){f.bindReady();
B.done(q);return this},eq:function(q){return q===-1?this.slice(q):this.slice(q,+q+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(P.apply(this,arguments),"slice",P.call(arguments).join(","))},map:function(q){return this.pushStack(f.map(this,function(E,L){return q.call(E,L,E)}))},end:function(){return this.prevObject||this.constructor(null)},push:H,sort:[].sort,splice:[].splice};f.fn.init.prototype=f.fn;f.extend=f.fn.extend=function(){var q,
E,L,G,Q,R=arguments[0]||{},Z=1,$=arguments.length,ja=false;if(typeof R==="boolean"){ja=R;R=arguments[1]||{};Z=2}if(typeof R!=="object"&&!f.isFunction(R))R={};if($===Z){R=this;--Z}for(;Z<$;Z++)if((q=arguments[Z])!=null)for(E in q){L=R[E];G=q[E];if(R!==G)if(ja&&G&&(f.isPlainObject(G)||(Q=f.isArray(G)))){if(Q){Q=false;L=L&&f.isArray(L)?L:[]}else L=L&&f.isPlainObject(L)?L:{};R[E]=f.extend(ja,L,G)}else if(G!==b)R[E]=G}return R};f.extend({noConflict:function(q){if(a.$===f)a.$=k;if(q&&a.jQuery===f)a.jQuery=
i;return f},isReady:false,readyWait:1,holdReady:function(q){if(q)f.readyWait++;else f.ready(true)},ready:function(q){if(q===true&&!--f.readyWait||q!==true&&!f.isReady){if(!K.body)return setTimeout(f.ready,1);f.isReady=true;if(!(q!==true&&--f.readyWait>0)){B.resolveWith(K,[f]);f.fn.trigger&&f(K).trigger("ready").unbind("ready")}}},bindReady:function(){if(!B){B=f._Deferred();if(K.readyState==="complete")return setTimeout(f.ready,1);if(K.addEventListener){K.addEventListener("DOMContentLoaded",y,false);
a.addEventListener("load",f.ready,false)}else if(K.attachEvent){K.attachEvent("onreadystatechange",y);a.attachEvent("onload",f.ready);var q=false;try{q=a.frameElement==null}catch(E){}K.documentElement.doScroll&&q&&d()}}},isFunction:function(q){return f.type(q)==="function"},isArray:Array.isArray||function(q){return f.type(q)==="array"},isWindow:function(q){return q&&typeof q==="object"&&"setInterval"in q},isNaN:function(q){return q==null||!w.test(q)||isNaN(q)},type:function(q){return q==null?String(q):
ba[A.call(q)]||"object"},isPlainObject:function(q){if(!q||f.type(q)!=="object"||q.nodeType||f.isWindow(q))return false;if(q.constructor&&!F.call(q,"constructor")&&!F.call(q.constructor.prototype,"isPrototypeOf"))return false;var E;for(E in q);return E===b||F.call(q,E)},isEmptyObject:function(q){for(var E in q)return false;return true},error:function(q){throw q;},parseJSON:function(q){if(typeof q!=="string"||!q)return null;q=f.trim(q);if(a.JSON&&a.JSON.parse)return a.JSON.parse(q);if(O.test(q.replace(T,
"@").replace(U,"]").replace(Y,"")))return(new Function("return "+q))();f.error("Invalid JSON: "+q)},parseXML:function(q,E,L){if(a.DOMParser){L=new DOMParser;E=L.parseFromString(q,"text/xml")}else{E=new ActiveXObject("Microsoft.XMLDOM");E.async="false";E.loadXML(q)}L=E.documentElement;if(!L||!L.nodeName||L.nodeName==="parsererror")f.error("Invalid XML: "+q);return E},noop:function(){},globalEval:function(q){if(q&&p.test(q))(a.execScript||function(E){a.eval.call(a,E)})(q)},camelCase:function(q){return q.replace(o,
s)},nodeName:function(q,E){return q.nodeName&&q.nodeName.toUpperCase()===E.toUpperCase()},each:function(q,E,L){var G,Q=0,R=q.length,Z=R===b||f.isFunction(q);if(L)if(Z)for(G in q){if(E.apply(q[G],L)===false)break}else for(;Q<R;){if(E.apply(q[Q++],L)===false)break}else if(Z)for(G in q){if(E.call(q[G],G,q[G])===false)break}else for(;Q<R;)if(E.call(q[Q],Q,q[Q++])===false)break;return q},trim:fa?function(q){return q==null?"":fa.call(q)}:function(q){return q==null?"":q.toString().replace(t,"").replace(v,
"")},makeArray:function(q,E){var L=E||[];if(q!=null){var G=f.type(q);q.length==null||G==="string"||G==="function"||G==="regexp"||f.isWindow(q)?H.call(L,q):f.merge(L,q)}return L},inArray:function(q,E){if(aa)return aa.call(E,q);for(var L=0,G=E.length;L<G;L++)if(E[L]===q)return L;return-1},merge:function(q,E){var L=q.length,G=0;if(typeof E.length==="number")for(var Q=E.length;G<Q;G++)q[L++]=E[G];else for(;E[G]!==b;)q[L++]=E[G++];q.length=L;return q},grep:function(q,E,L){var G=[],Q;L=!!L;for(var R=0,
Z=q.length;R<Z;R++){Q=!!E(q[R],R);L!==Q&&G.push(q[R])}return G},map:function(q,E,L){var G,Q,R=[],Z=0,$=q.length;if(q instanceof f||$!==b&&typeof $==="number"&&($>0&&q[0]&&q[$-1]||$===0||f.isArray(q)))for(;Z<$;Z++){G=E(q[Z],Z,L);if(G!=null)R[R.length]=G}else for(Q in q){G=E(q[Q],Q,L);if(G!=null)R[R.length]=G}return R.concat.apply([],R)},guid:1,proxy:function(q,E){if(typeof E==="string"){var L=q[E];E=q;q=L}if(!f.isFunction(q))return b;var G=P.call(arguments,2);L=function(){return q.apply(E,G.concat(P.call(arguments)))};
L.guid=q.guid=q.guid||L.guid||f.guid++;return L},access:function(q,E,L,G,Q,R){var Z=q.length;if(typeof E==="object"){for(var $ in E)f.access(q,$,E[$],G,Q,L);return q}if(L!==b){G=!R&&G&&f.isFunction(L);for($=0;$<Z;$++)Q(q[$],E,G?L.call(q[$],$,Q(q[$],E)):L,R);return q}return Z?Q(q[0],E):b},now:function(){return(new Date).getTime()},uaMatch:function(q){q=q.toLowerCase();q=ma.exec(q)||ca.exec(q)||da.exec(q)||q.indexOf("compatible")<0&&ia.exec(q)||[];return{browser:q[1]||"",version:q[2]||"0"}},sub:function(){function q(L,
G){return new q.fn.init(L,G)}f.extend(true,q,this);q.superclass=this;q.fn=q.prototype=this();q.fn.constructor=q;q.sub=this.sub;q.fn.init=function(L,G){if(G&&G instanceof f&&!(G instanceof q))G=q(G);return f.fn.init.call(this,L,G,E)};q.fn.init.prototype=q.fn;var E=q(K);return q},browser:{}});f.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(q,E){ba["[object "+E+"]"]=E.toLowerCase()});z=f.uaMatch(z);if(z.browser){f.browser[z.browser]=true;f.browser.version=z.version}if(f.browser.webkit)f.browser.safari=
true;if(p.test("\u00a0")){t=/^[\s\xA0]+/;v=/[\s\xA0]+$/}l=f(K);if(K.addEventListener)y=function(){K.removeEventListener("DOMContentLoaded",y,false);f.ready()};else if(K.attachEvent)y=function(){if(K.readyState==="complete"){K.detachEvent("onreadystatechange",y);f.ready()}};return f}(),Ja="done fail isResolved isRejected promise then always pipe".split(" "),Wa=[].slice;g.extend({_Deferred:function(){var d=[],f,i,k,l={done:function(){if(!k){var m=arguments,p,t,v,w,D;if(f){D=f;f=0}p=0;for(t=m.length;p<
t;p++){v=m[p];w=g.type(v);if(w==="array")l.done.apply(l,v);else w==="function"&&d.push(v)}D&&l.resolveWith(D[0],D[1])}return this},resolveWith:function(m,p){if(!k&&!f&&!i){p=p||[];i=1;try{for(;d[0];)d.shift().apply(m,p)}finally{f=[m,p];i=0}}return this},resolve:function(){l.resolveWith(this,arguments);return this},isResolved:function(){return!!(i||f)},cancel:function(){k=1;d=[];return this}};return l},Deferred:function(d){var f=g._Deferred(),i=g._Deferred(),k;g.extend(f,{then:function(l,m){f.done(l).fail(m);
return this},always:function(){return f.done.apply(f,arguments).fail.apply(this,arguments)},fail:i.done,rejectWith:i.resolveWith,reject:i.resolve,isRejected:i.isResolved,pipe:function(l,m){return g.Deferred(function(p){g.each({done:[l,"resolve"],fail:[m,"reject"]},function(t,v){var w=v[0],D=v[1],O;g.isFunction(w)?f[t](function(){(O=w.apply(this,arguments))&&g.isFunction(O.promise)?O.promise().then(p.resolve,p.reject):p[D](O)}):f[t](p[D])})}).promise()},promise:function(l){if(l==null){if(k)return k;
k=l={}}for(var m=Ja.length;m--;)l[Ja[m]]=f[Ja[m]];return l}});f.done(i.cancel).fail(f.cancel);delete f.cancel;d&&d.call(f,f);return f},when:function(d){function f(t){return function(v){i[t]=arguments.length>1?Wa.call(arguments,0):v;--m||p.resolveWith(p,Wa.call(i,0))}}var i=arguments,k=0,l=i.length,m=l,p=l<=1&&d&&g.isFunction(d.promise)?d:g.Deferred();if(l>1){for(;k<l;k++)if(i[k]&&g.isFunction(i[k].promise))i[k].promise().then(f(k),p.reject);else--m;m||p.resolveWith(p,i)}else if(p!==d)p.resolveWith(p,
l?[d]:[]);return p.promise()}});g.support=function(){var d=K.createElement("div"),f=K.documentElement,i,k,l,m,p,t;d.setAttribute("className","t");d.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";i=d.getElementsByTagName("*");k=d.getElementsByTagName("a")[0];if(!i||!i.length||!k)return{};l=K.createElement("select");m=l.appendChild(K.createElement("option"));i=d.getElementsByTagName("input")[0];p={leadingWhitespace:d.firstChild.nodeType===
3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(k.getAttribute("style")),hrefNormalized:k.getAttribute("href")==="/a",opacity:/^0.55$/.test(k.style.opacity),cssFloat:!!k.style.cssFloat,checkOn:i.value==="on",optSelected:m.selected,getSetAttribute:d.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};
i.checked=true;p.noCloneChecked=i.cloneNode(true).checked;l.disabled=true;p.optDisabled=!m.disabled;try{delete d.test}catch(v){p.deleteExpando=false}if(!d.addEventListener&&d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function(){p.noCloneEvent=false});d.cloneNode(true).fireEvent("onclick")}i=K.createElement("input");i.value="t";i.setAttribute("type","radio");p.radioValue=i.value==="t";i.setAttribute("checked","checked");d.appendChild(i);k=K.createDocumentFragment();k.appendChild(d.firstChild);
p.checkClone=k.cloneNode(true).cloneNode(true).lastChild.checked;d.innerHTML="";d.style.width=d.style.paddingLeft="1px";l=K.getElementsByTagName("body")[0];k=K.createElement(l?"div":"body");m={visibility:"hidden",width:0,height:0,border:0,margin:0};l&&g.extend(m,{position:"absolute",left:-1000,top:-1000});for(t in m)k.style[t]=m[t];k.appendChild(d);f=l||f;f.insertBefore(k,f.firstChild);p.appendChecked=i.checked;p.boxModel=d.offsetWidth===2;if("zoom"in d.style){d.style.display="inline";d.style.zoom=
1;p.inlineBlockNeedsLayout=d.offsetWidth===2;d.style.display="";d.innerHTML="<div style='width:4px;'></div>";p.shrinkWrapBlocks=d.offsetWidth!==2}d.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";l=d.getElementsByTagName("td");i=l[0].offsetHeight===0;l[0].style.display="";l[1].style.display="none";p.reliableHiddenOffsets=i&&l[0].offsetHeight===0;d.innerHTML="";if(K.defaultView&&K.defaultView.getComputedStyle){i=K.createElement("div");i.style.width="0";
i.style.marginRight="0";d.appendChild(i);p.reliableMarginRight=(parseInt((K.defaultView.getComputedStyle(i,null)||{marginRight:0}).marginRight,10)||0)===0}k.innerHTML="";f.removeChild(k);if(d.attachEvent)for(t in{submit:1,change:1,focusin:1}){f="on"+t;i=f in d;if(!i){d.setAttribute(f,"return;");i=typeof d[f]==="function"}p[t+"Bubbles"]=i}k=k=l=m=l=i=d=i=null;return p}();g.boxModel=g.support.boxModel;var sb=/^(?:\{.*\}|\[.*\])$/,rb=/([a-z])([A-Z])/g;g.extend({cache:{},uuid:0,expando:"jQuery"+(g.fn.jquery+
Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(d){d=d.nodeType?g.cache[d[g.expando]]:d[g.expando];return!!d&&!e(d)},data:function(d,f,i,k){if(g.acceptData(d)){var l=g.expando,m=typeof f==="string",p=d.nodeType,t=p?g.cache:d,v=p?d[g.expando]:d[g.expando]&&g.expando;if(!((!v||k&&v&&!t[v][l])&&m&&i===b)){if(!v)if(p)d[g.expando]=v=++g.uuid;else v=g.expando;if(!t[v]){t[v]={};if(!p)t[v].toJSON=g.noop}if(typeof f==="object"||
typeof f==="function")if(k)t[v][l]=g.extend(t[v][l],f);else t[v]=g.extend(t[v],f);d=t[v];if(k){d[l]||(d[l]={});d=d[l]}if(i!==b)d[g.camelCase(f)]=i;if(f==="events"&&!d[f])return d[l]&&d[l].events;return m?d[g.camelCase(f)]||d[f]:d}}},removeData:function(d,f,i){if(g.acceptData(d)){var k=g.expando,l=d.nodeType,m=l?g.cache:d,p=l?d[g.expando]:g.expando;if(m[p]){if(f){var t=i?m[p][k]:m[p];if(t){delete t[f];if(!e(t))return}}if(i){delete m[p][k];if(!e(m[p]))return}f=m[p][k];if(g.support.deleteExpando||m!=
a)delete m[p];else m[p]=null;if(f){m[p]={};if(!l)m[p].toJSON=g.noop;m[p][k]=f}else if(l)if(g.support.deleteExpando)delete d[g.expando];else if(d.removeAttribute)d.removeAttribute(g.expando);else d[g.expando]=null}}},_data:function(d,f,i){return g.data(d,f,i,true)},acceptData:function(d){if(d.nodeName){var f=g.noData[d.nodeName.toLowerCase()];if(f)return!(f===true||d.getAttribute("classid")!==f)}return true}});g.fn.extend({data:function(d,f){var i=null;if(typeof d==="undefined"){if(this.length){i=
g.data(this[0]);if(this[0].nodeType===1)for(var k=this[0].attributes,l,m=0,p=k.length;m<p;m++){l=k[m].name;if(l.indexOf("data-")===0){l=g.camelCase(l.substring(5));c(this[0],l,i[l])}}}return i}else if(typeof d==="object")return this.each(function(){g.data(this,d)});var t=d.split(".");t[1]=t[1]?"."+t[1]:"";if(f===b){i=this.triggerHandler("getData"+t[1]+"!",[t[0]]);if(i===b&&this.length){i=g.data(this[0],d);i=c(this[0],d,i)}return i===b&&t[1]?this.data(t[0]):i}else return this.each(function(){var v=
g(this),w=[t[0],f];v.triggerHandler("setData"+t[1]+"!",w);g.data(this,d,f);v.triggerHandler("changeData"+t[1]+"!",w)})},removeData:function(d){return this.each(function(){g.removeData(this,d)})}});g.extend({_mark:function(d,f){if(d){f=(f||"fx")+"mark";g.data(d,f,(g.data(d,f,b,true)||0)+1,true)}},_unmark:function(d,f,i){if(d!==true){i=f;f=d;d=false}if(f){i=i||"fx";var k=i+"mark";if(d=d?0:(g.data(f,k,b,true)||1)-1)g.data(f,k,d,true);else{g.removeData(f,k,true);h(f,i,"mark")}}},queue:function(d,f,i){if(d){f=
(f||"fx")+"queue";var k=g.data(d,f,b,true);if(i)if(!k||g.isArray(i))k=g.data(d,f,g.makeArray(i),true);else k.push(i);return k||[]}},dequeue:function(d,f){f=f||"fx";var i=g.queue(d,f),k=i.shift();if(k==="inprogress")k=i.shift();if(k){f==="fx"&&i.unshift("inprogress");k.call(d,function(){g.dequeue(d,f)})}if(!i.length){g.removeData(d,f+"queue",true);h(d,f,"queue")}}});g.fn.extend({queue:function(d,f){if(typeof d!=="string"){f=d;d="fx"}if(f===b)return g.queue(this[0],d);return this.each(function(){var i=
g.queue(this,d,f);d==="fx"&&i[0]!=="inprogress"&&g.dequeue(this,d)})},dequeue:function(d){return this.each(function(){g.dequeue(this,d)})},delay:function(d,f){d=g.fx?g.fx.speeds[d]||d:d;f=f||"fx";return this.queue(f,function(){var i=this;setTimeout(function(){g.dequeue(i,f)},d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,f){function i(){--p||k.resolveWith(l,[l])}if(typeof d!=="string"){f=d;d=b}d=d||"fx";for(var k=g.Deferred(),l=this,m=l.length,p=1,t=d+"defer",v=d+"queue",
w=d+"mark",D;m--;)if(D=g.data(l[m],t,b,true)||(g.data(l[m],v,b,true)||g.data(l[m],w,b,true))&&g.data(l[m],t,g._Deferred(),true)){p++;D.done(i)}i();return k.promise()}});var Xa=/[\n\t\r]/g,Ka=/\s+/,Db=/\r/g,Eb=/^(?:button|input)$/i,Fb=/^(?:button|input|object|select|textarea)$/i,Gb=/^a(?:rea)?$/i,Ya=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Hb=/\:|^on/,na,Za;g.fn.extend({attr:function(d,f){return g.access(this,d,f,
true,g.attr)},removeAttr:function(d){return this.each(function(){g.removeAttr(this,d)})},prop:function(d,f){return g.access(this,d,f,true,g.prop)},removeProp:function(d){d=g.propFix[d]||d;return this.each(function(){try{this[d]=b;delete this[d]}catch(f){}})},addClass:function(d){var f,i,k,l,m,p,t;if(g.isFunction(d))return this.each(function(v){g(this).addClass(d.call(this,v,this.className))});if(d&&typeof d==="string"){f=d.split(Ka);i=0;for(k=this.length;i<k;i++){l=this[i];if(l.nodeType===1)if(!l.className&&
f.length===1)l.className=d;else{m=" "+l.className+" ";p=0;for(t=f.length;p<t;p++)~m.indexOf(" "+f[p]+" ")||(m+=f[p]+" ");l.className=g.trim(m)}}}return this},removeClass:function(d){var f,i,k,l,m,p,t;if(g.isFunction(d))return this.each(function(v){g(this).removeClass(d.call(this,v,this.className))});if(d&&typeof d==="string"||d===b){f=(d||"").split(Ka);i=0;for(k=this.length;i<k;i++){l=this[i];if(l.nodeType===1&&l.className)if(d){m=(" "+l.className+" ").replace(Xa," ");p=0;for(t=f.length;p<t;p++)m=
m.replace(" "+f[p]+" "," ");l.className=g.trim(m)}else l.className=""}}return this},toggleClass:function(d,f){var i=typeof d,k=typeof f==="boolean";if(g.isFunction(d))return this.each(function(l){g(this).toggleClass(d.call(this,l,this.className,f),f)});return this.each(function(){if(i==="string")for(var l,m=0,p=g(this),t=f,v=d.split(Ka);l=v[m++];){t=k?t:!p.hasClass(l);p[t?"addClass":"removeClass"](l)}else if(i==="undefined"||i==="boolean"){this.className&&g._data(this,"__className__",this.className);
this.className=this.className||d===false?"":g._data(this,"__className__")||""}})},hasClass:function(d){d=" "+d+" ";for(var f=0,i=this.length;f<i;f++)if((" "+this[f].className+" ").replace(Xa," ").indexOf(d)>-1)return true;return false},val:function(d){var f,i,k=this[0];if(!arguments.length){if(k){if((f=g.valHooks[k.nodeName.toLowerCase()]||g.valHooks[k.type])&&"get"in f&&(i=f.get(k,"value"))!==b)return i;i=k.value;return typeof i==="string"?i.replace(Db,""):i==null?"":i}return b}var l=g.isFunction(d);
return this.each(function(m){var p=g(this);if(this.nodeType===1){m=l?d.call(this,m,p.val()):d;if(m==null)m="";else if(typeof m==="number")m+="";else if(g.isArray(m))m=g.map(m,function(t){return t==null?"":t+""});f=g.valHooks[this.nodeName.toLowerCase()]||g.valHooks[this.type];if(!f||!("set"in f)||f.set(this,m,"value")===b)this.value=m}})}});g.extend({valHooks:{option:{get:function(d){var f=d.attributes.value;return!f||f.specified?d.value:d.text}},select:{get:function(d){var f,i=d.selectedIndex,k=
[],l=d.options;d=d.type==="select-one";if(i<0)return null;for(var m=d?i:0,p=d?i+1:l.length;m<p;m++){f=l[m];if(f.selected&&(g.support.optDisabled?!f.disabled:f.getAttribute("disabled")===null)&&(!f.parentNode.disabled||!g.nodeName(f.parentNode,"optgroup"))){f=g(f).val();if(d)return f;k.push(f)}}if(d&&!k.length&&l.length)return g(l[i]).val();return k},set:function(d,f){var i=g.makeArray(f);g(d).find("option").each(function(){this.selected=g.inArray(g(this).val(),i)>=0});if(!i.length)d.selectedIndex=
-1;return i}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(d,f,i,k){var l=d.nodeType;if(!d||l===3||l===8||l===2)return b;if(k&&f in g.attrFn)return g(d)[f](i);if(!("getAttribute"in d))return g.prop(d,f,i);var m,p;if(k=l!==1||!g.isXMLDoc(d)){f=g.attrFix[f]||f;p=g.attrHooks[f];if(!p)if(Ya.test(f))p=Za;else if(na&&f!=="className"&&(g.nodeName(d,"form")||Hb.test(f)))p=na}if(i!==b)if(i===null){g.removeAttr(d,f);
return b}else if(p&&"set"in p&&k&&(m=p.set(d,i,f))!==b)return m;else{d.setAttribute(f,""+i);return i}else if(p&&"get"in p&&k&&(m=p.get(d,f))!==null)return m;else{m=d.getAttribute(f);return m===null?b:m}},removeAttr:function(d,f){var i;if(d.nodeType===1){f=g.attrFix[f]||f;if(g.support.getSetAttribute)d.removeAttribute(f);else{g.attr(d,f,"");d.removeAttributeNode(d.getAttributeNode(f))}if(Ya.test(f)&&(i=g.propFix[f]||f)in d)d[i]=false}},attrHooks:{type:{set:function(d,f){if(Eb.test(d.nodeName)&&d.parentNode)g.error("type property can't be changed");
else if(!g.support.radioValue&&f==="radio"&&g.nodeName(d,"input")){var i=d.value;d.setAttribute("type",f);if(i)d.value=i;return f}}},tabIndex:{get:function(d){var f=d.getAttributeNode("tabIndex");return f&&f.specified?parseInt(f.value,10):Fb.test(d.nodeName)||Gb.test(d.nodeName)&&d.href?0:b}},value:{get:function(d,f){if(na&&g.nodeName(d,"button"))return na.get(d,f);return f in d?d.value:null},set:function(d,f,i){if(na&&g.nodeName(d,"button"))return na.set(d,f,i);d.value=f}}},propFix:{tabindex:"tabIndex",
readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(d,f,i){var k=d.nodeType;if(!d||k===3||k===8||k===2)return b;var l,m;if(k!==1||!g.isXMLDoc(d)){f=g.propFix[f]||f;m=g.propHooks[f]}return i!==b?m&&"set"in m&&(l=m.set(d,i,f))!==b?l:d[f]=i:m&&"get"in m&&(l=m.get(d,f))!==b?l:d[f]},propHooks:{}});Za=
{get:function(d,f){return g.prop(d,f)?f.toLowerCase():b},set:function(d,f,i){if(f===false)g.removeAttr(d,i);else{f=g.propFix[i]||i;if(f in d)d[f]=true;d.setAttribute(i,i.toLowerCase())}return i}};if(!g.support.getSetAttribute){g.attrFix=g.propFix;na=g.attrHooks.name=g.attrHooks.title=g.valHooks.button={get:function(d,f){var i;return(i=d.getAttributeNode(f))&&i.nodeValue!==""?i.nodeValue:b},set:function(d,f,i){if(d=d.getAttributeNode(i))return d.nodeValue=f}};g.each(["width","height"],function(d,f){g.attrHooks[f]=
g.extend(g.attrHooks[f],{set:function(i,k){if(k===""){i.setAttribute(f,"auto");return k}}})})}g.support.hrefNormalized||g.each(["href","src","width","height"],function(d,f){g.attrHooks[f]=g.extend(g.attrHooks[f],{get:function(i){i=i.getAttribute(f,2);return i===null?b:i}})});if(!g.support.style)g.attrHooks.style={get:function(d){return d.style.cssText.toLowerCase()||b},set:function(d,f){return d.style.cssText=""+f}};if(!g.support.optSelected)g.propHooks.selected=g.extend(g.propHooks.selected,{get:function(){}});
g.support.checkOn||g.each(["radio","checkbox"],function(){g.valHooks[this]={get:function(d){return d.getAttribute("value")===null?"on":d.value}}});g.each(["radio","checkbox"],function(){g.valHooks[this]=g.extend(g.valHooks[this],{set:function(d,f){if(g.isArray(f))return d.checked=g.inArray(g(d).val(),f)>=0}})});var Ea=/\.(.*)$/,La=/^(?:textarea|input|select)$/i,tb=/\./g,ub=/ /g,Ib=/[^\w\s.|`]/g,Jb=function(d){return d.replace(Ib,"\\$&")};g.event={add:function(d,f,i,k){if(!(d.nodeType===3||d.nodeType===
8)){if(i===false)i=j;else if(!i)return;var l,m;if(i.handler){l=i;i=l.handler}if(!i.guid)i.guid=g.guid++;if(m=g._data(d)){var p=m.events,t=m.handle;if(!p)m.events=p={};if(!t)m.handle=t=function(U){return typeof g!=="undefined"&&(!U||g.event.triggered!==U.type)?g.event.handle.apply(t.elem,arguments):b};t.elem=d;f=f.split(" ");for(var v,w=0,D;v=f[w++];){m=l?g.extend({},l):{handler:i,data:k};if(v.indexOf(".")>-1){D=v.split(".");v=D.shift();m.namespace=D.slice(0).sort().join(".")}else{D=[];m.namespace=
""}m.type=v;if(!m.guid)m.guid=i.guid;var O=p[v],T=g.event.special[v]||{};if(!O){O=p[v]=[];if(!T.setup||T.setup.call(d,k,D,t)===false)if(d.addEventListener)d.addEventListener(v,t,false);else d.attachEvent&&d.attachEvent("on"+v,t)}if(T.add){T.add.call(d,m);if(!m.handler.guid)m.handler.guid=i.guid}O.push(m);g.event.global[v]=true}d=null}}},global:{},remove:function(d,f,i,k){if(!(d.nodeType===3||d.nodeType===8)){if(i===false)i=j;var l,m,p=0,t,v,w,D,O,T,U=g.hasData(d)&&g._data(d),Y=U&&U.events;if(U&&Y){if(f&&
f.type){i=f.handler;f=f.type}if(!f||typeof f==="string"&&f.charAt(0)==="."){f=f||"";for(l in Y)g.event.remove(d,l+f)}else{for(f=f.split(" ");l=f[p++];){D=l;t=l.indexOf(".")<0;v=[];if(!t){v=l.split(".");l=v.shift();w=RegExp("(^|\\.)"+g.map(v.slice(0).sort(),Jb).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(O=Y[l])if(i){D=g.event.special[l]||{};for(m=k||0;m<O.length;m++){T=O[m];if(i.guid===T.guid){if(t||w.test(T.namespace)){k==null&&O.splice(m--,1);D.remove&&D.remove.call(d,T)}if(k!=null)break}}if(O.length===
0||k!=null&&O.length===1){if(!D.teardown||D.teardown.call(d,v)===false)g.removeEvent(d,l,U.handle);delete Y[l]}}else for(m=0;m<O.length;m++){T=O[m];if(t||w.test(T.namespace)){g.event.remove(d,D,T.handler,m);O.splice(m--,1)}}}if(g.isEmptyObject(Y)){if(f=U.handle)f.elem=null;delete U.events;delete U.handle;g.isEmptyObject(U)&&g.removeData(d,b,true)}}}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(d,f,i,k){var l=d.type||d,m=[],p;if(l.indexOf("!")>=0){l=l.slice(0,-1);p=true}if(l.indexOf(".")>=
0){m=l.split(".");l=m.shift();m.sort()}if(!((!i||g.event.customEvent[l])&&!g.event.global[l])){d=typeof d==="object"?d[g.expando]?d:new g.Event(l,d):new g.Event(l);d.type=l;d.exclusive=p;d.namespace=m.join(".");d.namespace_re=RegExp("(^|\\.)"+m.join("\\.(?:.*\\.)?")+"(\\.|$)");if(k||!i){d.preventDefault();d.stopPropagation()}if(i){if(!(i.nodeType===3||i.nodeType===8)){d.result=b;d.target=i;f=f!=null?g.makeArray(f):[];f.unshift(d);m=i;k=l.indexOf(":")<0?"on"+l:"";do{p=g._data(m,"handle");d.currentTarget=
m;p&&p.apply(m,f);if(k&&g.acceptData(m)&&m[k]&&m[k].apply(m,f)===false){d.result=false;d.preventDefault()}m=m.parentNode||m.ownerDocument||m===d.target.ownerDocument&&a}while(m&&!d.isPropagationStopped());if(!d.isDefaultPrevented()){var t;m=g.event.special[l]||{};if((!m._default||m._default.call(i.ownerDocument,d)===false)&&!(l==="click"&&g.nodeName(i,"a"))&&g.acceptData(i)){try{if(k&&i[l]){if(t=i[k])i[k]=null;g.event.triggered=l;i[l]()}}catch(v){}if(t)i[k]=t;g.event.triggered=b}}return d.result}}else g.each(g.cache,
function(){var w=this[g.expando];w&&w.events&&w.events[l]&&g.event.trigger(d,f,w.handle.elem)})}},handle:function(d){d=g.event.fix(d||a.event);var f=((g._data(this,"events")||{})[d.type]||[]).slice(0),i=!d.exclusive&&!d.namespace,k=Array.prototype.slice.call(arguments,0);k[0]=d;d.currentTarget=this;for(var l=0,m=f.length;l<m;l++){var p=f[l];if(i||d.namespace_re.test(p.namespace)){d.handler=p.handler;d.data=p.data;d.handleObj=p;p=p.handler.apply(this,k);if(p!==b){d.result=p;if(p===false){d.preventDefault();
d.stopPropagation()}}if(d.isImmediatePropagationStopped())break}}return d.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(d){if(d[g.expando])return d;var f=d;d=g.Event(f);for(var i=this.props.length,
k;i;){k=this.props[--i];d[k]=f[k]}if(!d.target)d.target=d.srcElement||K;if(d.target.nodeType===3)d.target=d.target.parentNode;if(!d.relatedTarget&&d.fromElement)d.relatedTarget=d.fromElement===d.target?d.toElement:d.fromElement;if(d.pageX==null&&d.clientX!=null){i=d.target.ownerDocument||K;f=i.documentElement;i=i.body;d.pageX=d.clientX+(f&&f.scrollLeft||i&&i.scrollLeft||0)-(f&&f.clientLeft||i&&i.clientLeft||0);d.pageY=d.clientY+(f&&f.scrollTop||i&&i.scrollTop||0)-(f&&f.clientTop||i&&i.clientTop||
0)}if(d.which==null&&(d.charCode!=null||d.keyCode!=null))d.which=d.charCode!=null?d.charCode:d.keyCode;if(!d.metaKey&&d.ctrlKey)d.metaKey=d.ctrlKey;if(!d.which&&d.button!==b)d.which=d.button&1?1:d.button&2?3:d.button&4?2:0;return d},guid:1E8,proxy:g.proxy,special:{ready:{setup:g.bindReady,teardown:g.noop},live:{add:function(d){g.event.add(this,x(d.origType,d.selector),g.extend({},d,{handler:u,guid:d.handler.guid}))},remove:function(d){g.event.remove(this,x(d.origType,d.selector),d)}},beforeunload:{setup:function(d,
f,i){if(g.isWindow(this))this.onbeforeunload=i},teardown:function(d,f){if(this.onbeforeunload===f)this.onbeforeunload=null}}}};g.removeEvent=K.removeEventListener?function(d,f,i){d.removeEventListener&&d.removeEventListener(f,i,false)}:function(d,f,i){d.detachEvent&&d.detachEvent("on"+f,i)};g.Event=function(d,f){if(!this.preventDefault)return new g.Event(d,f);if(d&&d.type){this.originalEvent=d;this.type=d.type;this.isDefaultPrevented=d.defaultPrevented||d.returnValue===false||d.getPreventDefault&&
d.getPreventDefault()?n:j}else this.type=d;f&&g.extend(this,f);this.timeStamp=g.now();this[g.expando]=true};g.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var d=this.originalEvent;if(d)if(d.preventDefault)d.preventDefault();else d.returnValue=false},stopPropagation:function(){this.isPropagationStopped=n;var d=this.originalEvent;if(d){d.stopPropagation&&d.stopPropagation();d.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n;this.stopPropagation()},
isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j};var $a=function(d){var f=d.relatedTarget,i=false,k=d.type;d.type=d.data;if(f!==this){if(f)i=g.contains(this,f);if(!i){g.event.handle.apply(this,arguments);d.type=k}}},ab=function(d){d.type=d.data;g.event.handle.apply(this,arguments)};g.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(d,f){g.event.special[d]={setup:function(i){g.event.add(this,f,i&&i.selector?ab:$a,d)},teardown:function(i){g.event.remove(this,
f,i&&i.selector?ab:$a)}}});if(!g.support.submitBubbles)g.event.special.submit={setup:function(){if(g.nodeName(this,"form"))return false;else{g.event.add(this,"click.specialSubmit",function(d){var f=d.target,i=f.type;if((i==="submit"||i==="image")&&g(f).closest("form").length)r("submit",this,arguments)});g.event.add(this,"keypress.specialSubmit",function(d){var f=d.target,i=f.type;if((i==="text"||i==="password")&&g(f).closest("form").length&&d.keyCode===13)r("submit",this,arguments)})}},teardown:function(){g.event.remove(this,
".specialSubmit")}};if(!g.support.changeBubbles){var ya,bb=function(d){var f=d.type,i=d.value;if(f==="radio"||f==="checkbox")i=d.checked;else if(f==="select-multiple")i=d.selectedIndex>-1?g.map(d.options,function(k){return k.selected}).join("-"):"";else if(g.nodeName(d,"select"))i=d.selectedIndex;return i},Aa=function(d,f){var i=d.target,k,l;if(!(!La.test(i.nodeName)||i.readOnly)){k=g._data(i,"_change_data");l=bb(i);if(d.type!=="focusout"||i.type!=="radio")g._data(i,"_change_data",l);if(!(k===b||
l===k))if(k!=null||l){d.type="change";d.liveFired=b;g.event.trigger(d,f,i)}}};g.event.special.change={filters:{focusout:Aa,beforedeactivate:Aa,click:function(d){var f=d.target,i=g.nodeName(f,"input")?f.type:"";if(i==="radio"||i==="checkbox"||g.nodeName(f,"select"))Aa.call(this,d)},keydown:function(d){var f=d.target,i=g.nodeName(f,"input")?f.type:"";if(d.keyCode===13&&!g.nodeName(f,"textarea")||d.keyCode===32&&(i==="checkbox"||i==="radio")||i==="select-multiple")Aa.call(this,d)},beforeactivate:function(d){d=
d.target;g._data(d,"_change_data",bb(d))}},setup:function(){if(this.type==="file")return false;for(var d in ya)g.event.add(this,d+".specialChange",ya[d]);return La.test(this.nodeName)},teardown:function(){g.event.remove(this,".specialChange");return La.test(this.nodeName)}};ya=g.event.special.change.filters;ya.focus=ya.beforeactivate}g.support.focusinBubbles||g.each({focus:"focusin",blur:"focusout"},function(d,f){function i(l){var m=g.event.fix(l);m.type=f;m.originalEvent={};g.event.trigger(m,null,
m.target);m.isDefaultPrevented()&&l.preventDefault()}var k=0;g.event.special[f]={setup:function(){k++===0&&K.addEventListener(d,i,true)},teardown:function(){--k===0&&K.removeEventListener(d,i,true)}}});g.each(["bind","one"],function(d,f){g.fn[f]=function(i,k,l){var m;if(typeof i==="object"){for(var p in i)this[f](p,k,i[p],l);return this}if(arguments.length===2||k===false){l=k;k=b}if(f==="one"){m=function(v){g(this).unbind(v,m);return l.apply(this,arguments)};m.guid=l.guid||g.guid++}else m=l;if(i===
"unload"&&f!=="one")this.one(i,k,l);else{p=0;for(var t=this.length;p<t;p++)g.event.add(this[p],i,m,k)}return this}});g.fn.extend({unbind:function(d,f){if(typeof d==="object"&&!d.preventDefault)for(var i in d)this.unbind(i,d[i]);else{i=0;for(var k=this.length;i<k;i++)g.event.remove(this[i],d,f)}return this},delegate:function(d,f,i,k){return this.live(f,i,k,d)},undelegate:function(d,f,i){return arguments.length===0?this.unbind("live"):this.die(f,null,i,d)},trigger:function(d,f){return this.each(function(){g.event.trigger(d,
f,this)})},triggerHandler:function(d,f){if(this[0])return g.event.trigger(d,f,this[0],true)},toggle:function(d){var f=arguments,i=d.guid||g.guid++,k=0,l=function(m){var p=(g.data(this,"lastToggle"+d.guid)||0)%k;g.data(this,"lastToggle"+d.guid,p+1);m.preventDefault();return f[p].apply(this,arguments)||false};for(l.guid=i;k<f.length;)f[k++].guid=i;return this.click(l)},hover:function(d,f){return this.mouseenter(d).mouseleave(f||d)}});var Ma={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};
g.each(["live","die"],function(d,f){g.fn[f]=function(i,k,l,m){var p=0,t,v,w=m||this.selector,D=m?this:g(this.context);if(typeof i==="object"&&!i.preventDefault){for(t in i)D[f](t,k,i[t],w);return this}if(f==="die"&&!i&&m&&m.charAt(0)==="."){D.unbind(m);return this}if(k===false||g.isFunction(k)){l=k||j;k=b}for(i=(i||"").split(" ");(m=i[p++])!=null;){t=Ea.exec(m);v="";if(t){v=t[0];m=m.replace(Ea,"")}if(m==="hover")i.push("mouseenter"+v,"mouseleave"+v);else{t=m;if(Ma[m]){i.push(Ma[m]+v);m+=v}else m=
(Ma[m]||m)+v;if(f==="live"){v=0;for(var O=D.length;v<O;v++)g.event.add(D[v],"live."+x(m,w),{data:k,selector:w,handler:l,origType:m,origHandler:l,preType:t})}else D.unbind("live."+x(m,w),l)}}return this}});g.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(d,f){g.fn[f]=function(i,k){if(k==null){k=i;i=null}return arguments.length>0?this.bind(f,
i,k):this.trigger(f)};if(g.attrFn)g.attrFn[f]=true});(function(){function d(o,s,z,B,y,A){y=0;for(var F=B.length;y<F;y++){var H=B[y];if(H){var P=false;for(H=H[o];H;){if(H.sizcache===z){P=B[H.sizset];break}if(H.nodeType===1&&!A){H.sizcache=z;H.sizset=y}if(H.nodeName.toLowerCase()===s){P=H;break}H=H[o]}B[y]=P}}}function f(o,s,z,B,y,A){y=0;for(var F=B.length;y<F;y++){var H=B[y];if(H){var P=false;for(H=H[o];H;){if(H.sizcache===z){P=B[H.sizset];break}if(H.nodeType===1){if(!A){H.sizcache=z;H.sizset=y}if(typeof s!==
"string"){if(H===s){P=true;break}}else if(w.filter(s,[H]).length>0){P=H;break}}H=H[o]}B[y]=P}}}var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,k=0,l=Object.prototype.toString,m=false,p=true,t=/\\/g,v=/\W/;[0,0].sort(function(){p=false;return 0});var w=function(o,s,z,B){z=z||[];var y=s=s||K;if(s.nodeType!==1&&s.nodeType!==9)return[];if(!o||typeof o!=="string")return z;var A,F,H,P,fa,aa=true,ba=w.isXML(s),q=
[],E=o;do{i.exec("");if(A=i.exec(E)){E=A[3];q.push(A[1]);if(A[2]){P=A[3];break}}}while(A);if(q.length>1&&O.exec(o))if(q.length===2&&D.relative[q[0]])F=ia(q[0]+q[1],s);else for(F=D.relative[q[0]]?[s]:w(q.shift(),s);q.length;){o=q.shift();if(D.relative[o])o+=q.shift();F=ia(o,F)}else{if(!B&&q.length>1&&s.nodeType===9&&!ba&&D.match.ID.test(q[0])&&!D.match.ID.test(q[q.length-1])){A=w.find(q.shift(),s,ba);s=A.expr?w.filter(A.expr,A.set)[0]:A.set[0]}if(s){A=B?{expr:q.pop(),set:Y(B)}:w.find(q.pop(),q.length===
1&&(q[0]==="~"||q[0]==="+")&&s.parentNode?s.parentNode:s,ba);F=A.expr?w.filter(A.expr,A.set):A.set;if(q.length>0)H=Y(F);else aa=false;for(;q.length;){A=fa=q.pop();if(D.relative[fa])A=q.pop();else fa="";if(A==null)A=s;D.relative[fa](H,A,ba)}}else H=[]}H||(H=F);H||w.error(fa||o);if(l.call(H)==="[object Array]")if(aa)if(s&&s.nodeType===1)for(o=0;H[o]!=null;o++){if(H[o]&&(H[o]===true||H[o].nodeType===1&&w.contains(s,H[o])))z.push(F[o])}else for(o=0;H[o]!=null;o++)H[o]&&H[o].nodeType===1&&z.push(F[o]);
else z.push.apply(z,H);else Y(H,z);if(P){w(P,y,z,B);w.uniqueSort(z)}return z};w.uniqueSort=function(o){if(ca){m=p;o.sort(ca);if(m)for(var s=1;s<o.length;s++)o[s]===o[s-1]&&o.splice(s--,1)}return o};w.matches=function(o,s){return w(o,null,null,s)};w.matchesSelector=function(o,s){return w(s,null,null,[o]).length>0};w.find=function(o,s,z){var B;if(!o)return[];for(var y=0,A=D.order.length;y<A;y++){var F,H=D.order[y];if(F=D.leftMatch[H].exec(o)){var P=F[1];F.splice(1,1);if(P.substr(P.length-1)!=="\\"){F[1]=
(F[1]||"").replace(t,"");B=D.find[H](F,s,z);if(B!=null){o=o.replace(D.match[H],"");break}}}}B||(B=typeof s.getElementsByTagName!=="undefined"?s.getElementsByTagName("*"):[]);return{set:B,expr:o}};w.filter=function(o,s,z,B){for(var y,A,F=o,H=[],P=s,fa=s&&s[0]&&w.isXML(s[0]);o&&s.length;){for(var aa in D.filter)if((y=D.leftMatch[aa].exec(o))!=null&&y[2]){var ba,q,E=D.filter[aa];q=y[1];A=false;y.splice(1,1);if(q.substr(q.length-1)!=="\\"){if(P===H)H=[];if(D.preFilter[aa])if(y=D.preFilter[aa](y,P,z,H,
B,fa)){if(y===true)continue}else A=ba=true;if(y)for(var L=0;(q=P[L])!=null;L++)if(q){ba=E(q,y,L,P);var G=B^!!ba;if(z&&ba!=null)if(G)A=true;else P[L]=false;else if(G){H.push(q);A=true}}if(ba!==b){z||(P=H);o=o.replace(D.match[aa],"");if(!A)return[];break}}}if(o===F)if(A==null)w.error(o);else break;F=o}return P};w.error=function(o){throw"Syntax error, unrecognized expression: "+o;};var D=w.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className",
"for":"htmlFor"},attrHandle:{href:function(o){return o.getAttribute("href")},type:function(o){return o.getAttribute("type")}},relative:{"+":function(o,s){var z=typeof s==="string",B=z&&!v.test(s);z=z&&!B;if(B)s=s.toLowerCase();B=0;for(var y=o.length,A;B<y;B++)if(A=o[B]){for(;(A=A.previousSibling)&&A.nodeType!==1;);o[B]=z||A&&A.nodeName.toLowerCase()===s?A||false:A===s}z&&w.filter(s,o,true)},">":function(o,s){var z,B=typeof s==="string",y=0,A=o.length;if(B&&!v.test(s))for(s=s.toLowerCase();y<A;y++){if(z=
o[y]){z=z.parentNode;o[y]=z.nodeName.toLowerCase()===s?z:false}}else{for(;y<A;y++)if(z=o[y])o[y]=B?z.parentNode:z.parentNode===s;B&&w.filter(s,o,true)}},"":function(o,s,z){var B,y=k++,A=f;if(typeof s==="string"&&!v.test(s)){B=s=s.toLowerCase();A=d}A("parentNode",s,y,o,B,z)},"~":function(o,s,z){var B,y=k++,A=f;if(typeof s==="string"&&!v.test(s)){B=s=s.toLowerCase();A=d}A("previousSibling",s,y,o,B,z)}},find:{ID:function(o,s,z){if(typeof s.getElementById!=="undefined"&&!z)return(o=s.getElementById(o[1]))&&
o.parentNode?[o]:[]},NAME:function(o,s){if(typeof s.getElementsByName!=="undefined"){for(var z=[],B=s.getElementsByName(o[1]),y=0,A=B.length;y<A;y++)B[y].getAttribute("name")===o[1]&&z.push(B[y]);return z.length===0?null:z}},TAG:function(o,s){if(typeof s.getElementsByTagName!=="undefined")return s.getElementsByTagName(o[1])}},preFilter:{CLASS:function(o,s,z,B,y,A){o=" "+o[1].replace(t,"")+" ";if(A)return o;A=0;for(var F;(F=s[A])!=null;A++)if(F)if(y^(F.className&&(" "+F.className+" ").replace(/[\t\n\r]/g,
" ").indexOf(o)>=0))z||B.push(F);else if(z)s[A]=false;return false},ID:function(o){return o[1].replace(t,"")},TAG:function(o){return o[1].replace(t,"").toLowerCase()},CHILD:function(o){if(o[1]==="nth"){o[2]||w.error(o[0]);o[2]=o[2].replace(/^\+|\s*/g,"");var s=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(o[2]==="even"&&"2n"||o[2]==="odd"&&"2n+1"||!/\D/.test(o[2])&&"0n+"+o[2]||o[2]);o[2]=s[1]+(s[2]||1)-0;o[3]=s[3]-0}else o[2]&&w.error(o[0]);o[0]=k++;return o},ATTR:function(o,s,z,B,y,A){s=o[1]=o[1].replace(t,
"");if(!A&&D.attrMap[s])o[1]=D.attrMap[s];o[4]=(o[4]||o[5]||"").replace(t,"");if(o[2]==="~=")o[4]=" "+o[4]+" ";return o},PSEUDO:function(o,s,z,B,y){if(o[1]==="not")if((i.exec(o[3])||"").length>1||/^\w/.test(o[3]))o[3]=w(o[3],null,null,s);else{o=w.filter(o[3],s,z,true^y);z||B.push.apply(B,o);return false}else if(D.match.POS.test(o[0])||D.match.CHILD.test(o[0]))return true;return o},POS:function(o){o.unshift(true);return o}},filters:{enabled:function(o){return o.disabled===false&&o.type!=="hidden"},
disabled:function(o){return o.disabled===true},checked:function(o){return o.checked===true},selected:function(o){return o.selected===true},parent:function(o){return!!o.firstChild},empty:function(o){return!o.firstChild},has:function(o,s,z){return!!w(z[3],o).length},header:function(o){return/h\d/i.test(o.nodeName)},text:function(o){var s=o.getAttribute("type"),z=o.type;return o.nodeName.toLowerCase()==="input"&&"text"===z&&(s===z||s===null)},radio:function(o){return o.nodeName.toLowerCase()==="input"&&
"radio"===o.type},checkbox:function(o){return o.nodeName.toLowerCase()==="input"&&"checkbox"===o.type},file:function(o){return o.nodeName.toLowerCase()==="input"&&"file"===o.type},password:function(o){return o.nodeName.toLowerCase()==="input"&&"password"===o.type},submit:function(o){var s=o.nodeName.toLowerCase();return(s==="input"||s==="button")&&"submit"===o.type},image:function(o){return o.nodeName.toLowerCase()==="input"&&"image"===o.type},reset:function(o){var s=o.nodeName.toLowerCase();return(s===
"input"||s==="button")&&"reset"===o.type},button:function(o){var s=o.nodeName.toLowerCase();return s==="input"&&"button"===o.type||s==="button"},input:function(o){return/input|select|textarea|button/i.test(o.nodeName)},focus:function(o){return o===o.ownerDocument.activeElement}},setFilters:{first:function(o,s){return s===0},last:function(o,s,z,B){return s===B.length-1},even:function(o,s){return s%2===0},odd:function(o,s){return s%2===1},lt:function(o,s,z){return s<z[3]-0},gt:function(o,s,z){return s>
z[3]-0},nth:function(o,s,z){return z[3]-0===s},eq:function(o,s,z){return z[3]-0===s}},filter:{PSEUDO:function(o,s,z,B){var y=s[1],A=D.filters[y];if(A)return A(o,z,s,B);else if(y==="contains")return(o.textContent||o.innerText||w.getText([o])||"").indexOf(s[3])>=0;else if(y==="not"){s=s[3];z=0;for(B=s.length;z<B;z++)if(s[z]===o)return false;return true}else w.error(y)},CHILD:function(o,s){var z=s[1],B=o;switch(z){case "only":case "first":for(;B=B.previousSibling;)if(B.nodeType===1)return false;if(z===
"first")return true;B=o;case "last":for(;B=B.nextSibling;)if(B.nodeType===1)return false;return true;case "nth":z=s[2];var y=s[3];if(z===1&&y===0)return true;var A=s[0],F=o.parentNode;if(F&&(F.sizcache!==A||!o.nodeIndex)){var H=0;for(B=F.firstChild;B;B=B.nextSibling)if(B.nodeType===1)B.nodeIndex=++H;F.sizcache=A}B=o.nodeIndex-y;return z===0?B===0:B%z===0&&B/z>=0}},ID:function(o,s){return o.nodeType===1&&o.getAttribute("id")===s},TAG:function(o,s){return s==="*"&&o.nodeType===1||o.nodeName.toLowerCase()===
s},CLASS:function(o,s){return(" "+(o.className||o.getAttribute("class"))+" ").indexOf(s)>-1},ATTR:function(o,s){var z=s[1];z=D.attrHandle[z]?D.attrHandle[z](o):o[z]!=null?o[z]:o.getAttribute(z);var B=z+"",y=s[2],A=s[4];return z==null?y==="!=":y==="="?B===A:y==="*="?B.indexOf(A)>=0:y==="~="?(" "+B+" ").indexOf(A)>=0:!A?B&&z!==false:y==="!="?B!==A:y==="^="?B.indexOf(A)===0:y==="$="?B.substr(B.length-A.length)===A:y==="|="?B===A||B.substr(0,A.length+1)===A+"-":false},POS:function(o,s,z,B){var y=D.setFilters[s[2]];
if(y)return y(o,z,s,B)}}},O=D.match.POS,T=function(o,s){return"\\"+(s-0+1)};for(var U in D.match){D.match[U]=RegExp(D.match[U].source+/(?![^\[]*\])(?![^\(]*\))/.source);D.leftMatch[U]=RegExp(/(^(?:.|\r|\n)*?)/.source+D.match[U].source.replace(/\\(\d+)/g,T))}var Y=function(o,s){o=Array.prototype.slice.call(o,0);if(s){s.push.apply(s,o);return s}return o};try{Array.prototype.slice.call(K.documentElement.childNodes,0)}catch(ma){Y=function(o,s){var z=0,B=s||[];if(l.call(o)==="[object Array]")Array.prototype.push.apply(B,
o);else if(typeof o.length==="number")for(var y=o.length;z<y;z++)B.push(o[z]);else for(;o[z];z++)B.push(o[z]);return B}}var ca,da;if(K.documentElement.compareDocumentPosition)ca=function(o,s){if(o===s){m=true;return 0}if(!o.compareDocumentPosition||!s.compareDocumentPosition)return o.compareDocumentPosition?-1:1;return o.compareDocumentPosition(s)&4?-1:1};else{ca=function(o,s){if(o===s){m=true;return 0}else if(o.sourceIndex&&s.sourceIndex)return o.sourceIndex-s.sourceIndex;var z,B,y=[],A=[];z=o.parentNode;
B=s.parentNode;var F=z;if(z===B)return da(o,s);else if(z){if(!B)return 1}else return-1;for(;F;){y.unshift(F);F=F.parentNode}for(F=B;F;){A.unshift(F);F=F.parentNode}z=y.length;B=A.length;for(F=0;F<z&&F<B;F++)if(y[F]!==A[F])return da(y[F],A[F]);return F===z?da(o,A[F],-1):da(y[F],s,1)};da=function(o,s,z){if(o===s)return z;for(o=o.nextSibling;o;){if(o===s)return-1;o=o.nextSibling}return 1}}w.getText=function(o){for(var s="",z,B=0;o[B];B++){z=o[B];if(z.nodeType===3||z.nodeType===4)s+=z.nodeValue;else if(z.nodeType!==
8)s+=w.getText(z.childNodes)}return s};(function(){var o=K.createElement("div"),s="script"+(new Date).getTime(),z=K.documentElement;o.innerHTML="<a name='"+s+"'/>";z.insertBefore(o,z.firstChild);if(K.getElementById(s)){D.find.ID=function(B,y,A){if(typeof y.getElementById!=="undefined"&&!A)return(y=y.getElementById(B[1]))?y.id===B[1]||typeof y.getAttributeNode!=="undefined"&&y.getAttributeNode("id").nodeValue===B[1]?[y]:b:[]};D.filter.ID=function(B,y){var A=typeof B.getAttributeNode!=="undefined"&&
B.getAttributeNode("id");return B.nodeType===1&&A&&A.nodeValue===y}}z.removeChild(o);z=o=null})();(function(){var o=K.createElement("div");o.appendChild(K.createComment(""));if(o.getElementsByTagName("*").length>0)D.find.TAG=function(s,z){var B=z.getElementsByTagName(s[1]);if(s[1]==="*"){for(var y=[],A=0;B[A];A++)B[A].nodeType===1&&y.push(B[A]);B=y}return B};o.innerHTML="<a href='#'></a>";if(o.firstChild&&typeof o.firstChild.getAttribute!=="undefined"&&o.firstChild.getAttribute("href")!=="#")D.attrHandle.href=
function(s){return s.getAttribute("href",2)};o=null})();K.querySelectorAll&&function(){var o=w,s=K.createElement("div");s.innerHTML="<p class='TEST'></p>";if(!(s.querySelectorAll&&s.querySelectorAll(".TEST").length===0)){w=function(B,y,A,F){y=y||K;if(!F&&!w.isXML(y)){var H=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(B);if(H&&(y.nodeType===1||y.nodeType===9))if(H[1])return Y(y.getElementsByTagName(B),A);else if(H[2]&&D.find.CLASS&&y.getElementsByClassName)return Y(y.getElementsByClassName(H[2]),A);if(y.nodeType===
9){if(B==="body"&&y.body)return Y([y.body],A);else if(H&&H[3]){var P=y.getElementById(H[3]);if(P&&P.parentNode){if(P.id===H[3])return Y([P],A)}else return Y([],A)}try{return Y(y.querySelectorAll(B),A)}catch(fa){}}else if(y.nodeType===1&&y.nodeName.toLowerCase()!=="object"){H=y;var aa=(P=y.getAttribute("id"))||"__sizzle__",ba=y.parentNode,q=/^\s*[+~]/.test(B);if(P)aa=aa.replace(/'/g,"\\$&");else y.setAttribute("id",aa);if(q&&ba)y=y.parentNode;try{if(!q||ba)return Y(y.querySelectorAll("[id='"+aa+"'] "+
B),A)}catch(E){}finally{P||H.removeAttribute("id")}}}return o(B,y,A,F)};for(var z in o)w[z]=o[z];s=null}}();(function(){var o=K.documentElement,s=o.matchesSelector||o.mozMatchesSelector||o.webkitMatchesSelector||o.msMatchesSelector;if(s){var z=!s.call(K.createElement("div"),"div"),B=false;try{s.call(K.documentElement,"[test!='']:sizzle")}catch(y){B=true}w.matchesSelector=function(A,F){F=F.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!w.isXML(A))try{if(B||!D.match.PSEUDO.test(F)&&!/!=/.test(F)){var H=
s.call(A,F);if(H||!z||A.document&&A.document.nodeType!==11)return H}}catch(P){}return w(F,null,null,[A]).length>0}}})();(function(){var o=K.createElement("div");o.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!o.getElementsByClassName||o.getElementsByClassName("e").length===0)){o.lastChild.className="e";if(o.getElementsByClassName("e").length!==1){D.order.splice(1,0,"CLASS");D.find.CLASS=function(s,z,B){if(typeof z.getElementsByClassName!=="undefined"&&!B)return z.getElementsByClassName(s[1])};
o=null}}})();w.contains=K.documentElement.contains?function(o,s){return o!==s&&(o.contains?o.contains(s):true)}:K.documentElement.compareDocumentPosition?function(o,s){return!!(o.compareDocumentPosition(s)&16)}:function(){return false};w.isXML=function(o){return(o=(o?o.ownerDocument||o:0).documentElement)?o.nodeName!=="HTML":false};var ia=function(o,s){for(var z,B=[],y="",A=s.nodeType?[s]:s;z=D.match.PSEUDO.exec(o);){y+=z[0];o=o.replace(D.match.PSEUDO,"")}o=D.relative[o]?o+"*":o;z=0;for(var F=A.length;z<
F;z++)w(o,A[z],B);return w.filter(y,B)};g.find=w;g.expr=w.selectors;g.expr[":"]=g.expr.filters;g.unique=w.uniqueSort;g.text=w.getText;g.isXMLDoc=w.isXML;g.contains=w.contains})();var Kb=/Until$/,Lb=/^(?:parents|prevUntil|prevAll)/,Mb=/,/,vb=/^.[^:#\[\.,]*$/,Nb=Array.prototype.slice,cb=g.expr.match.POS,Ob={children:true,contents:true,next:true,prev:true};g.fn.extend({find:function(d){var f=this,i,k;if(typeof d!=="string")return g(d).filter(function(){i=0;for(k=f.length;i<k;i++)if(g.contains(f[i],this))return true});
var l=this.pushStack("","find",d),m,p,t;i=0;for(k=this.length;i<k;i++){m=l.length;g.find(d,this[i],l);if(i>0)for(p=m;p<l.length;p++)for(t=0;t<m;t++)if(l[t]===l[p]){l.splice(p--,1);break}}return l},has:function(d){var f=g(d);return this.filter(function(){for(var i=0,k=f.length;i<k;i++)if(g.contains(this,f[i]))return true})},not:function(d){return this.pushStack(C(this,d,false),"not",d)},filter:function(d){return this.pushStack(C(this,d,true),"filter",d)},is:function(d){return!!d&&(typeof d==="string"?
g.filter(d,this).length>0:this.filter(d).length>0)},closest:function(d,f){var i=[],k,l,m=this[0];if(g.isArray(d)){var p,t={},v=1;if(m&&d.length){k=0;for(l=d.length;k<l;k++){p=d[k];t[p]||(t[p]=cb.test(p)?g(p,f||this.context):p)}for(;m&&m.ownerDocument&&m!==f;){for(p in t){k=t[p];if(k.jquery?k.index(m)>-1:g(m).is(k))i.push({selector:p,elem:m,level:v})}m=m.parentNode;v++}}return i}p=cb.test(d)||typeof d!=="string"?g(d,f||this.context):0;k=0;for(l=this.length;k<l;k++)for(m=this[k];m;)if(p?p.index(m)>
-1:g.find.matchesSelector(m,d)){i.push(m);break}else{m=m.parentNode;if(!m||!m.ownerDocument||m===f||m.nodeType===11)break}i=i.length>1?g.unique(i):i;return this.pushStack(i,"closest",d)},index:function(d){if(!d||typeof d==="string")return g.inArray(this[0],d?g(d):this.parent().children());return g.inArray(d.jquery?d[0]:d,this)},add:function(d,f){var i=typeof d==="string"?g(d,f):g.makeArray(d&&d.nodeType?[d]:d),k=g.merge(this.get(),i);return this.pushStack(!i[0]||!i[0].parentNode||i[0].parentNode.nodeType===
11||!k[0]||!k[0].parentNode||k[0].parentNode.nodeType===11?k:g.unique(k))},andSelf:function(){return this.add(this.prevObject)}});g.each({parent:function(d){return(d=d.parentNode)&&d.nodeType!==11?d:null},parents:function(d){return g.dir(d,"parentNode")},parentsUntil:function(d,f,i){return g.dir(d,"parentNode",i)},next:function(d){return g.nth(d,2,"nextSibling")},prev:function(d){return g.nth(d,2,"previousSibling")},nextAll:function(d){return g.dir(d,"nextSibling")},prevAll:function(d){return g.dir(d,
"previousSibling")},nextUntil:function(d,f,i){return g.dir(d,"nextSibling",i)},prevUntil:function(d,f,i){return g.dir(d,"previousSibling",i)},siblings:function(d){return g.sibling(d.parentNode.firstChild,d)},children:function(d){return g.sibling(d.firstChild)},contents:function(d){return g.nodeName(d,"iframe")?d.contentDocument||d.contentWindow.document:g.makeArray(d.childNodes)}},function(d,f){g.fn[d]=function(i,k){var l=g.map(this,f,i),m=Nb.call(arguments);Kb.test(d)||(k=i);if(k&&typeof k==="string")l=
g.filter(k,l);l=this.length>1&&!Ob[d]?g.unique(l):l;if((this.length>1||Mb.test(k))&&Lb.test(d))l=l.reverse();return this.pushStack(l,d,m.join(","))}});g.extend({filter:function(d,f,i){if(i)d=":not("+d+")";return f.length===1?g.find.matchesSelector(f[0],d)?[f[0]]:[]:g.find.matches(d,f)},dir:function(d,f,i){var k=[];for(d=d[f];d&&d.nodeType!==9&&(i===b||d.nodeType!==1||!g(d).is(i));){d.nodeType===1&&k.push(d);d=d[f]}return k},nth:function(d,f,i){f=f||1;for(var k=0;d;d=d[i])if(d.nodeType===1&&++k===
f)break;return d},sibling:function(d,f){for(var i=[];d;d=d.nextSibling)d.nodeType===1&&d!==f&&i.push(d);return i}});var Pb=/ jQuery\d+="(?:\d+|null)"/g,Na=/^\s+/,db=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,eb=/<([\w:]+)/,Qb=/<tbody/i,Rb=/<|&#?\w+;/,fb=/<(?:script|object|embed|option|style)/i,gb=/checked\s*(?:[^=]|=\s*.checked.)/i,Sb=/\/(java|ecma)script/i,wb=/^\s*<!(?:\[CDATA\[|\-\-)/,ga={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>",
"</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};ga.optgroup=ga.option;ga.tbody=ga.tfoot=ga.colgroup=ga.caption=ga.thead;ga.th=ga.td;if(!g.support.htmlSerialize)ga._default=[1,"div<div>","</div>"];g.fn.extend({text:function(d){if(g.isFunction(d))return this.each(function(f){var i=g(this);i.text(d.call(this,
f,i.text()))});if(typeof d!=="object"&&d!==b)return this.empty().append((this[0]&&this[0].ownerDocument||K).createTextNode(d));return g.text(this)},wrapAll:function(d){if(g.isFunction(d))return this.each(function(i){g(this).wrapAll(d.call(this,i))});if(this[0]){var f=g(d,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&f.insertBefore(this[0]);f.map(function(){for(var i=this;i.firstChild&&i.firstChild.nodeType===1;)i=i.firstChild;return i}).append(this)}return this},wrapInner:function(d){if(g.isFunction(d))return this.each(function(f){g(this).wrapInner(d.call(this,
f))});return this.each(function(){var f=g(this),i=f.contents();i.length?i.wrapAll(d):f.append(d)})},wrap:function(d){return this.each(function(){g(this).wrapAll(d)})},unwrap:function(){return this.parent().each(function(){g.nodeName(this,"body")||g(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(d){this.nodeType===1&&this.appendChild(d)})},prepend:function(){return this.domManip(arguments,true,function(d){this.nodeType===1&&this.insertBefore(d,
this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(f){this.parentNode.insertBefore(f,this)});else if(arguments.length){var d=g(arguments[0]);d.push.apply(d,this.toArray());return this.pushStack(d,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(f){this.parentNode.insertBefore(f,this.nextSibling)});else if(arguments.length){var d=this.pushStack(this,"after",arguments);
d.push.apply(d,g(arguments[0]).toArray());return d}},remove:function(d,f){for(var i=0,k;(k=this[i])!=null;i++)if(!d||g.filter(d,[k]).length){if(!f&&k.nodeType===1){g.cleanData(k.getElementsByTagName("*"));g.cleanData([k])}k.parentNode&&k.parentNode.removeChild(k)}return this},empty:function(){for(var d=0,f;(f=this[d])!=null;d++)for(f.nodeType===1&&g.cleanData(f.getElementsByTagName("*"));f.firstChild;)f.removeChild(f.firstChild);return this},clone:function(d,f){d=d==null?false:d;f=f==null?d:f;return this.map(function(){return g.clone(this,
d,f)})},html:function(d){if(d===b)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Pb,""):null;else if(typeof d==="string"&&!fb.test(d)&&(g.support.leadingWhitespace||!Na.test(d))&&!ga[(eb.exec(d)||["",""])[1].toLowerCase()]){d=d.replace(db,"<$1></$2>");try{for(var f=0,i=this.length;f<i;f++)if(this[f].nodeType===1){g.cleanData(this[f].getElementsByTagName("*"));this[f].innerHTML=d}}catch(k){this.empty().append(d)}}else g.isFunction(d)?this.each(function(l){var m=g(this);m.html(d.call(this,
l,m.html()))}):this.empty().append(d);return this},replaceWith:function(d){if(this[0]&&this[0].parentNode){if(g.isFunction(d))return this.each(function(f){var i=g(this),k=i.html();i.replaceWith(d.call(this,f,k))});if(typeof d!=="string")d=g(d).detach();return this.each(function(){var f=this.nextSibling,i=this.parentNode;g(this).remove();f?g(f).before(d):g(i).append(d)})}else return this.length?this.pushStack(g(g.isFunction(d)?d():d),"replaceWith",d):this},detach:function(d){return this.remove(d,true)},
domManip:function(d,f,i){var k,l,m,p=d[0],t=[];if(!g.support.checkClone&&arguments.length===3&&typeof p==="string"&&gb.test(p))return this.each(function(){g(this).domManip(d,f,i,true)});if(g.isFunction(p))return this.each(function(D){var O=g(this);d[0]=p.call(this,D,f?O.html():b);O.domManip(d,f,i)});if(this[0]){k=p&&p.parentNode;k=g.support.parentNode&&k&&k.nodeType===11&&k.childNodes.length===this.length?{fragment:k}:g.buildFragment(d,this,t);m=k.fragment;if(l=m.childNodes.length===1?m=m.firstChild:
m.firstChild){f=f&&g.nodeName(l,"tr");l=0;for(var v=this.length,w=v-1;l<v;l++)i.call(f?g.nodeName(this[l],"table")?this[l].getElementsByTagName("tbody")[0]||this[l].appendChild(this[l].ownerDocument.createElement("tbody")):this[l]:this[l],k.cacheable||v>1&&l<w?g.clone(m,true,true):m)}t.length&&g.each(t,V)}return this}});g.buildFragment=function(d,f,i){var k,l,m,p;if(f&&f[0])p=f[0].ownerDocument||f[0];p.createDocumentFragment||(p=K);if(d.length===1&&typeof d[0]==="string"&&d[0].length<512&&p===K&&
d[0].charAt(0)==="<"&&!fb.test(d[0])&&(g.support.checkClone||!gb.test(d[0]))){l=true;if((m=g.fragments[d[0]])&&m!==1)k=m}if(!k){k=p.createDocumentFragment();g.clean(d,p,k,i)}if(l)g.fragments[d[0]]=m?k:1;return{fragment:k,cacheable:l}};g.fragments={};g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,f){g.fn[d]=function(i){var k=[];i=g(i);var l=this.length===1&&this[0].parentNode;if(l&&l.nodeType===11&&l.childNodes.length===
1&&i.length===1){i[f](this[0]);return this}else{l=0;for(var m=i.length;l<m;l++){var p=(l>0?this.clone(true):this).get();g(i[l])[f](p);k=k.concat(p)}return this.pushStack(k,d,i.selector)}}});g.extend({clone:function(d,f,i){var k=d.cloneNode(true),l,m,p;if((!g.support.noCloneEvent||!g.support.noCloneChecked)&&(d.nodeType===1||d.nodeType===11)&&!g.isXMLDoc(d)){M(d,k);l=I(d);m=I(k);for(p=0;l[p];++p)M(l[p],m[p])}if(f){J(d,k);if(i){l=I(d);m=I(k);for(p=0;l[p];++p)J(l[p],m[p])}}return k},clean:function(d,
f,i,k){f=f||K;if(typeof f.createElement==="undefined")f=f.ownerDocument||f[0]&&f[0].ownerDocument||K;for(var l=[],m,p=0,t;(t=d[p])!=null;p++){if(typeof t==="number")t+="";if(t){if(typeof t==="string")if(Rb.test(t)){t=t.replace(db,"<$1></$2>");m=(eb.exec(t)||["",""])[1].toLowerCase();var v=ga[m]||ga._default,w=v[0],D=f.createElement("div");for(D.innerHTML=v[1]+t+v[2];w--;)D=D.lastChild;if(!g.support.tbody){w=Qb.test(t);v=m==="table"&&!w?D.firstChild&&D.firstChild.childNodes:v[1]==="<table>"&&!w?D.childNodes:
[];for(m=v.length-1;m>=0;--m)g.nodeName(v[m],"tbody")&&!v[m].childNodes.length&&v[m].parentNode.removeChild(v[m])}!g.support.leadingWhitespace&&Na.test(t)&&D.insertBefore(f.createTextNode(Na.exec(t)[0]),D.firstChild);t=D.childNodes}else t=f.createTextNode(t);var O;if(!g.support.appendChecked)if(t[0]&&typeof(O=t.length)==="number")for(m=0;m<O;m++)S(t[m]);else S(t);if(t.nodeType)l.push(t);else l=g.merge(l,t)}}if(i){d=function(T){return!T.type||Sb.test(T.type)};for(p=0;l[p];p++)if(k&&g.nodeName(l[p],
"script")&&(!l[p].type||l[p].type.toLowerCase()==="text/javascript"))k.push(l[p].parentNode?l[p].parentNode.removeChild(l[p]):l[p]);else{if(l[p].nodeType===1){f=g.grep(l[p].getElementsByTagName("script"),d);l.splice.apply(l,[p+1,0].concat(f))}i.appendChild(l[p])}}return l},cleanData:function(d){for(var f,i,k=g.cache,l=g.expando,m=g.event.special,p=g.support.deleteExpando,t=0,v;(v=d[t])!=null;t++)if(!(v.nodeName&&g.noData[v.nodeName.toLowerCase()]))if(i=v[g.expando]){if((f=k[i]&&k[i][l])&&f.events){for(var w in f.events)m[w]?
g.event.remove(v,w):g.removeEvent(v,w,f.handle);if(f.handle)f.handle.elem=null}if(p)delete v[g.expando];else v.removeAttribute&&v.removeAttribute(g.expando);delete k[i]}}});var hb=/alpha\([^)]*\)/i,Tb=/opacity=([^)]*)/,Ub=/([A-Z]|^ms)/g,ib=/^-?\d+(?:px)?$/i,Vb=/^-?\d/,Wb=/^[+\-]=/,Xb=/[^+\-\.\de]+/g,Yb={position:"absolute",visibility:"hidden",display:"block"},xb=["Left","Right"],yb=["Top","Bottom"],ra,jb,kb;g.fn.css=function(d,f){if(arguments.length===2&&f===b)return this;return g.access(this,d,f,
true,function(i,k,l){return l!==b?g.style(i,k,l):g.css(i,k)})};g.extend({cssHooks:{opacity:{get:function(d,f){if(f){var i=ra(d,"opacity","opacity");return i===""?"1":i}else return d.style.opacity}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":g.support.cssFloat?"cssFloat":"styleFloat"},style:function(d,f,i,k){if(!(!d||d.nodeType===3||d.nodeType===8||!d.style)){var l,m=g.camelCase(f),p=d.style,t=g.cssHooks[m];
f=g.cssProps[m]||m;if(i!==b){k=typeof i;if(!(k==="number"&&isNaN(i)||i==null)){if(k==="string"&&Wb.test(i)){i=+i.replace(Xb,"")+parseFloat(g.css(d,f));k="number"}if(k==="number"&&!g.cssNumber[m])i+="px";if(!t||!("set"in t)||(i=t.set(d,i))!==b)try{p[f]=i}catch(v){}}}else{if(t&&"get"in t&&(l=t.get(d,false,k))!==b)return l;return p[f]}}},css:function(d,f,i){var k,l;f=g.camelCase(f);l=g.cssHooks[f];f=g.cssProps[f]||f;if(f==="cssFloat")f="float";if(l&&"get"in l&&(k=l.get(d,true,i))!==b)return k;else if(ra)return ra(d,
f)},swap:function(d,f,i){var k={};for(var l in f){k[l]=d.style[l];d.style[l]=f[l]}i.call(d);for(l in f)d.style[l]=k[l]}});g.curCSS=g.css;g.each(["height","width"],function(d,f){g.cssHooks[f]={get:function(i,k,l){var m;if(k){if(i.offsetWidth!==0)return W(i,f,l);else g.swap(i,Yb,function(){m=W(i,f,l)});return m}},set:function(i,k){if(ib.test(k)){k=parseFloat(k);if(k>=0)return k+"px"}else return k}}});if(!g.support.opacity)g.cssHooks.opacity={get:function(d,f){return Tb.test((f&&d.currentStyle?d.currentStyle.filter:
d.style.filter)||"")?parseFloat(RegExp.$1)/100+"":f?"1":""},set:function(d,f){var i=d.style,k=d.currentStyle;i.zoom=1;var l=g.isNaN(f)?"":"alpha(opacity="+f*100+")";k=k&&k.filter||i.filter||"";i.filter=hb.test(k)?k.replace(hb,l):k+" "+l}};g(function(){if(!g.support.reliableMarginRight)g.cssHooks.marginRight={get:function(d,f){var i;g.swap(d,{display:"inline-block"},function(){i=f?ra(d,"margin-right","marginRight"):d.style.marginRight});return i}}});if(K.defaultView&&K.defaultView.getComputedStyle)jb=
function(d,f){var i,k;f=f.replace(Ub,"-$1").toLowerCase();if(!(k=d.ownerDocument.defaultView))return b;if(k=k.getComputedStyle(d,null)){i=k.getPropertyValue(f);if(i===""&&!g.contains(d.ownerDocument.documentElement,d))i=g.style(d,f)}return i};if(K.documentElement.currentStyle)kb=function(d,f){var i,k=d.currentStyle&&d.currentStyle[f],l=d.runtimeStyle&&d.runtimeStyle[f],m=d.style;if(!ib.test(k)&&Vb.test(k)){i=m.left;if(l)d.runtimeStyle.left=d.currentStyle.left;m.left=f==="fontSize"?"1em":k||0;k=m.pixelLeft+
"px";m.left=i;if(l)d.runtimeStyle.left=l}return k===""?"auto":k};ra=jb||kb;if(g.expr&&g.expr.filters){g.expr.filters.hidden=function(d){var f=d.offsetHeight;return d.offsetWidth===0&&f===0||!g.support.reliableHiddenOffsets&&(d.style.display||g.css(d,"display"))==="none"};g.expr.filters.visible=function(d){return!g.expr.filters.hidden(d)}}var Zb=/%20/g,zb=/\[\]$/,lb=/\r?\n/g,$b=/#.*$/,ac=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bc=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
cc=/^(?:GET|HEAD)$/,dc=/^\/\//,mb=/\?/,ec=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,fc=/^(?:select|textarea)/i,Ra=/\s+/,gc=/([?&])_=[^&]*/,nb=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,ob=g.fn.load,Fa={},pb={},oa,pa;try{oa=Cb.href}catch(oc){oa=K.createElement("a");oa.href="";oa=oa.href}pa=nb.exec(oa.toLowerCase())||[];g.fn.extend({load:function(d,f,i){if(typeof d!=="string"&&ob)return ob.apply(this,arguments);else if(!this.length)return this;var k=d.indexOf(" ");if(k>=0){var l=d.slice(k,
d.length);d=d.slice(0,k)}k="GET";if(f)if(g.isFunction(f)){i=f;f=b}else if(typeof f==="object"){f=g.param(f,g.ajaxSettings.traditional);k="POST"}var m=this;g.ajax({url:d,type:k,dataType:"html",data:f,complete:function(p,t,v){v=p.responseText;if(p.isResolved()){p.done(function(w){v=w});m.html(l?g("<div>").append(v.replace(ec,"")).find(l):v)}i&&m.each(i,[v,t,p])}});return this},serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?
g.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||fc.test(this.nodeName)||bc.test(this.type))}).map(function(d,f){var i=g(this).val();return i==null?null:g.isArray(i)?g.map(i,function(k){return{name:f.name,value:k.replace(lb,"\r\n")}}):{name:f.name,value:i.replace(lb,"\r\n")}}).get()}});g.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(d,f){g.fn[f]=function(i){return this.bind(f,i)}});g.each(["get","post"],
function(d,f){g[f]=function(i,k,l,m){if(g.isFunction(k)){m=m||l;l=k;k=b}return g.ajax({type:f,url:i,data:k,success:l,dataType:m})}});g.extend({getScript:function(d,f){return g.get(d,b,f,"script")},getJSON:function(d,f,i){return g.get(d,f,i,"json")},ajaxSetup:function(d,f){if(f)g.extend(true,d,g.ajaxSettings,f);else{f=d;d=g.extend(true,g.ajaxSettings,f)}for(var i in{context:1,url:1})if(i in f)d[i]=f[i];else if(i in g.ajaxSettings)d[i]=g.ajaxSettings[i];return d},ajaxSettings:{url:oa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|widget):$/.test(pa[1]),
global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":true,"text json":g.parseJSON,"text xml":g.parseXML}},ajaxPrefilter:X(Fa),ajaxTransport:X(pb),ajax:function(d,f){function i(y,A,F,H){if(da!==
2){da=2;ma&&clearTimeout(ma);Y=b;T=H||"";s.readyState=y?4:0;var P,fa,aa;if(F){H=k;var ba=s,q=H.contents,E=H.dataTypes,L=H.responseFields,G,Q,R,Z;for(Q in L)if(Q in F)ba[L[Q]]=F[Q];for(;E[0]==="*";){E.shift();if(G===b)G=H.mimeType||ba.getResponseHeader("content-type")}if(G)for(Q in q)if(q[Q]&&q[Q].test(G)){E.unshift(Q);break}if(E[0]in F)R=E[0];else{for(Q in F){if(!E[0]||H.converters[Q+" "+E[0]]){R=Q;break}Z||(Z=Q)}R=R||Z}if(R){R!==E[0]&&E.unshift(R);F=F[R]}else F=void 0}else F=b;F=F;if(y>=200&&y<300||
y===304){if(k.ifModified){if(G=s.getResponseHeader("Last-Modified"))g.lastModified[w]=G;if(G=s.getResponseHeader("Etag"))g.etag[w]=G}if(y===304){A="notmodified";P=true}else try{G=k;F=F;if(G.dataFilter)F=G.dataFilter(F,G.dataType);var $=G.dataTypes;Q={};var ja,Ba,hc=$.length,Ca,ka=$[0],ua,Oa,la,qa,va;for(ja=1;ja<hc;ja++){if(ja===1)for(Ba in G.converters)if(typeof Ba==="string")Q[Ba.toLowerCase()]=G.converters[Ba];ua=ka;ka=$[ja];if(ka==="*")ka=ua;else if(ua!=="*"&&ua!==ka){Oa=ua+" "+ka;la=Q[Oa]||Q["* "+
ka];if(!la){va=b;for(qa in Q){Ca=qa.split(" ");if(Ca[0]===ua||Ca[0]==="*")if(va=Q[Ca[1]+" "+ka]){qa=Q[qa];if(qa===true)la=va;else if(va===true)la=qa;break}}}la||va||g.error("No conversion from "+Oa.replace(" "," to "));if(la!==true)F=la?la(F):va(qa(F))}}fa=F;A="success";P=true}catch(ic){A="parsererror";aa=ic}}else{aa=A;if(!A||y){A="error";if(y<0)y=0}}s.status=y;s.statusText=A;P?p.resolveWith(l,[fa,A,s]):p.rejectWith(l,[s,A,aa]);s.statusCode(v);v=b;if(ia)m.trigger("ajax"+(P?"Success":"Error"),[s,k,
P?fa:aa]);t.resolveWith(l,[s,A]);if(ia){m.trigger("ajaxComplete",[s,k]);--g.active||g.event.trigger("ajaxStop")}}}if(typeof d==="object"){f=d;d=b}f=f||{};var k=g.ajaxSetup({},f),l=k.context||k,m=l!==k&&(l.nodeType||l instanceof g)?g(l):g.event,p=g.Deferred(),t=g._Deferred(),v=k.statusCode||{},w,D={},O={},T,U,Y,ma,ca,da=0,ia,o,s={readyState:0,setRequestHeader:function(y,A){if(!da){var F=y.toLowerCase();y=O[F]=O[F]||y;D[y]=A}return this},getAllResponseHeaders:function(){return da===2?T:null},getResponseHeader:function(y){var A;
if(da===2){if(!U)for(U={};A=ac.exec(T);)U[A[1].toLowerCase()]=A[2];A=U[y.toLowerCase()]}return A===b?null:A},overrideMimeType:function(y){if(!da)k.mimeType=y;return this},abort:function(y){y=y||"abort";Y&&Y.abort(y);i(0,y);return this}};p.promise(s);s.success=s.done;s.error=s.fail;s.complete=t.done;s.statusCode=function(y){if(y){var A;if(da<2)for(A in y)v[A]=[v[A],y[A]];else{A=y[s.status];s.then(A,A)}}return this};k.url=((d||k.url)+"").replace($b,"").replace(dc,pa[1]+"//");k.dataTypes=g.trim(k.dataType||
"*").toLowerCase().split(Ra);if(k.crossDomain==null){ca=nb.exec(k.url.toLowerCase());k.crossDomain=!!(ca&&(ca[1]!=pa[1]||ca[2]!=pa[2]||(ca[3]||(ca[1]==="http:"?80:443))!=(pa[3]||(pa[1]==="http:"?80:443))))}if(k.data&&k.processData&&typeof k.data!=="string")k.data=g.param(k.data,k.traditional);ea(Fa,k,f,s);if(da===2)return false;ia=k.global;k.type=k.type.toUpperCase();k.hasContent=!cc.test(k.type);ia&&g.active++===0&&g.event.trigger("ajaxStart");if(!k.hasContent){if(k.data)k.url+=(mb.test(k.url)?"&":
"?")+k.data;w=k.url;if(k.cache===false){ca=g.now();var z=k.url.replace(gc,"$1_="+ca);k.url=z+(z===k.url?(mb.test(k.url)?"&":"?")+"_="+ca:"")}}if(k.data&&k.hasContent&&k.contentType!==false||f.contentType)s.setRequestHeader("Content-Type",k.contentType);if(k.ifModified){w=w||k.url;g.lastModified[w]&&s.setRequestHeader("If-Modified-Since",g.lastModified[w]);g.etag[w]&&s.setRequestHeader("If-None-Match",g.etag[w])}s.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+
(k.dataTypes[0]!=="*"?", */*; q=0.01":""):k.accepts["*"]);for(o in k.headers)s.setRequestHeader(o,k.headers[o]);if(k.beforeSend&&(k.beforeSend.call(l,s,k)===false||da===2)){s.abort();return false}for(o in{success:1,error:1,complete:1})s[o](k[o]);if(Y=ea(pb,k,f,s)){s.readyState=1;ia&&m.trigger("ajaxSend",[s,k]);if(k.async&&k.timeout>0)ma=setTimeout(function(){s.abort("timeout")},k.timeout);try{da=1;Y.send(D,i)}catch(B){status<2?i(-1,B):g.error(B)}}else i(-1,"No Transport");return s},param:function(d,
f){var i=[],k=function(m,p){p=g.isFunction(p)?p():p;i[i.length]=encodeURIComponent(m)+"="+encodeURIComponent(p)};if(f===b)f=g.ajaxSettings.traditional;if(g.isArray(d)||d.jquery&&!g.isPlainObject(d))g.each(d,function(){k(this.name,this.value)});else for(var l in d)Ga(l,d[l],f,k);return i.join("&").replace(Zb,"+")}});g.extend({active:0,lastModified:{},etag:{}});var jc=g.now(),Da=/(\=)\?(&|$)|\?\?/i;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return g.expando+"_"+jc++}});g.ajaxPrefilter("json jsonp",
function(d,f,i){f=d.contentType==="application/x-www-form-urlencoded"&&typeof d.data==="string";if(d.dataTypes[0]==="jsonp"||d.jsonp!==false&&(Da.test(d.url)||f&&Da.test(d.data))){var k,l=d.jsonpCallback=g.isFunction(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,m=a[l],p=d.url,t=d.data,v="$1"+l+"$2";if(d.jsonp!==false){p=p.replace(Da,v);if(d.url===p){if(f)t=t.replace(Da,v);if(d.data===t)p+=(/\?/.test(p)?"&":"?")+d.jsonp+"="+l}}d.url=p;d.data=t;a[l]=function(w){k=[w]};i.always(function(){a[l]=
m;k&&g.isFunction(m)&&a[l](k[0])});d.converters["script json"]=function(){k||g.error(l+" was not called");return k[0]};d.dataTypes[0]="json";return"script"}});g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(d){g.globalEval(d);return d}}});g.ajaxPrefilter("script",function(d){if(d.cache===b)d.cache=false;if(d.crossDomain){d.type="GET";d.global=false}});
g.ajaxTransport("script",function(d){if(d.crossDomain){var f,i=K.head||K.getElementsByTagName("head")[0]||K.documentElement;return{send:function(k,l){f=K.createElement("script");f.async="async";if(d.scriptCharset)f.charset=d.scriptCharset;f.src=d.url;f.onload=f.onreadystatechange=function(m,p){if(p||!f.readyState||/loaded|complete/.test(f.readyState)){f.onload=f.onreadystatechange=null;i&&f.parentNode&&i.removeChild(f);f=b;p||l(200,"success")}};i.insertBefore(f,i.firstChild)},abort:function(){f&&
f.onload(0,1)}}}});var Pa=a.ActiveXObject?function(){for(var d in wa)wa[d](0,1)}:false,kc=0,wa;g.ajaxSettings.xhr=a.ActiveXObject?function(){var d;if(!(d=!this.isLocal&&Sa()))a:{try{d=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(f){}d=void 0}return d}:Sa;(function(d){g.extend(g.support,{ajax:!!d,cors:!!d&&"withCredentials"in d})})(g.ajaxSettings.xhr());g.support.ajax&&g.ajaxTransport(function(d){if(!d.crossDomain||g.support.cors){var f;return{send:function(i,k){var l=d.xhr(),m,p;d.username?
l.open(d.type,d.url,d.async,d.username,d.password):l.open(d.type,d.url,d.async);if(d.xhrFields)for(p in d.xhrFields)l[p]=d.xhrFields[p];d.mimeType&&l.overrideMimeType&&l.overrideMimeType(d.mimeType);if(!d.crossDomain&&!i["X-Requested-With"])i["X-Requested-With"]="XMLHttpRequest";try{for(p in i)l.setRequestHeader(p,i[p])}catch(t){}l.send(d.hasContent&&d.data||null);f=function(v,w){var D,O,T,U,Y;try{if(f&&(w||l.readyState===4)){f=b;if(m){l.onreadystatechange=g.noop;Pa&&delete wa[m]}if(w)l.readyState!==
4&&l.abort();else{D=l.status;T=l.getAllResponseHeaders();U={};if((Y=l.responseXML)&&Y.documentElement)U.xml=Y;U.text=l.responseText;try{O=l.statusText}catch(ma){O=""}if(!D&&d.isLocal&&!d.crossDomain)D=U.text?200:404;else if(D===1223)D=204}}}catch(ca){w||k(-1,ca)}U&&k(D,O,U,T)};if(!d.async||l.readyState===4)f();else{m=++kc;if(Pa){if(!wa){wa={};g(a).unload(Pa)}wa[m]=f}l.onreadystatechange=f}},abort:function(){f&&f(0,1)}}}});var Ha={},ha,ta,lc=/^(?:toggle|show|hide)$/,mc=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
xa,Ua=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],za,Qa=a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame;g.fn.extend({show:function(d,f,i){if(d||d===0)return this.animate(sa("show",3),d,f,i);else{i=0;for(var k=this.length;i<k;i++){d=this[i];if(d.style){f=d.style.display;if(!g._data(d,"olddisplay")&&f==="none")f=d.style.display="";f===""&&g.css(d,"display")==="none"&&
g._data(d,"olddisplay",Va(d.nodeName))}}for(i=0;i<k;i++){d=this[i];if(d.style){f=d.style.display;if(f===""||f==="none")d.style.display=g._data(d,"olddisplay")||""}}return this}},hide:function(d,f,i){if(d||d===0)return this.animate(sa("hide",3),d,f,i);else{d=0;for(f=this.length;d<f;d++)if(this[d].style){i=g.css(this[d],"display");i!=="none"&&!g._data(this[d],"olddisplay")&&g._data(this[d],"olddisplay",i)}for(d=0;d<f;d++)if(this[d].style)this[d].style.display="none";return this}},_toggle:g.fn.toggle,
toggle:function(d,f,i){var k=typeof d==="boolean";if(g.isFunction(d)&&g.isFunction(f))this._toggle.apply(this,arguments);else d==null||k?this.each(function(){var l=k?d:g(this).is(":hidden");g(this)[l?"show":"hide"]()}):this.animate(sa("toggle",3),d,f,i);return this},fadeTo:function(d,f,i,k){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:f},d,i,k)},animate:function(d,f,i,k){var l=g.speed(f,i,k);if(g.isEmptyObject(d))return this.each(l.complete,[false]);d=g.extend({},d);
return this[l.queue===false?"each":"queue"](function(){l.queue===false&&g._mark(this);var m=g.extend({},l),p=this.nodeType===1,t=p&&g(this).is(":hidden"),v,w,D,O,T;m.animatedProperties={};for(D in d){v=g.camelCase(D);if(D!==v){d[v]=d[D];delete d[D]}w=d[v];if(g.isArray(w)){m.animatedProperties[v]=w[1];w=d[v]=w[0]}else m.animatedProperties[v]=m.specialEasing&&m.specialEasing[v]||m.easing||"swing";if(w==="hide"&&t||w==="show"&&!t)return m.complete.call(this);if(p&&(v==="height"||v==="width")){m.overflow=
[this.style.overflow,this.style.overflowX,this.style.overflowY];if(g.css(this,"display")==="inline"&&g.css(this,"float")==="none")if(g.support.inlineBlockNeedsLayout){w=Va(this.nodeName);if(w==="inline")this.style.display="inline-block";else{this.style.display="inline";this.style.zoom=1}}else this.style.display="inline-block"}}if(m.overflow!=null)this.style.overflow="hidden";for(D in d){p=new g.fx(this,m,D);w=d[D];if(lc.test(w))p[w==="toggle"?t?"show":"hide":w]();else{v=mc.exec(w);O=p.cur();if(v){w=
parseFloat(v[2]);T=v[3]||(g.cssNumber[D]?"":"px");if(T!=="px"){g.style(this,D,(w||1)+T);O=(w||1)/p.cur()*O;g.style(this,D,O+T)}if(v[1])w=(v[1]==="-="?-1:1)*w+O;p.custom(O,w,T)}else p.custom(O,w,"")}}return true})},stop:function(d,f){d&&this.queue([]);this.each(function(){var i=g.timers,k=i.length;for(f||g._unmark(true,this);k--;)if(i[k].elem===this){f&&i[k](true);i.splice(k,1)}});f||this.dequeue();return this}});g.each({slideDown:sa("show",1),slideUp:sa("hide",1),slideToggle:sa("toggle",1),fadeIn:{opacity:"show"},
fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,f){g.fn[d]=function(i,k,l){return this.animate(f,i,k,l)}});g.extend({speed:function(d,f,i){var k=d&&typeof d==="object"?g.extend({},d):{complete:i||!i&&f||g.isFunction(d)&&d,duration:d,easing:i&&f||f&&!g.isFunction(f)&&f};k.duration=g.fx.off?0:typeof k.duration==="number"?k.duration:k.duration in g.fx.speeds?g.fx.speeds[k.duration]:g.fx.speeds._default;k.old=k.complete;k.complete=function(l){g.isFunction(k.old)&&k.old.call(this);if(k.queue!==
false)g.dequeue(this);else l!==false&&g._unmark(this)};return k},easing:{linear:function(d,f,i,k){return i+k*d},swing:function(d,f,i,k){return(-Math.cos(d*Math.PI)/2+0.5)*k+i}},timers:[],fx:function(d,f,i){this.options=f;this.elem=d;this.prop=i;f.orig=f.orig||{}}});g.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(g.fx.step[this.prop]||g.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==
null))return this.elem[this.prop];var d,f=g.css(this.elem,this.prop);return isNaN(d=parseFloat(f))?!f||f==="auto"?0:f:d},custom:function(d,f,i){function k(t){return l.step(t)}var l=this,m=g.fx,p;this.startTime=za||Ta();this.start=d;this.end=f;this.unit=i||this.unit||(g.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;k.elem=this.elem;if(k()&&g.timers.push(k)&&!xa)if(Qa){xa=true;p=function(){if(xa){Qa(p);m.tick()}};Qa(p)}else xa=setInterval(m.tick,m.interval)},show:function(){this.options.orig[this.prop]=
g.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());g(this.elem).show()},hide:function(){this.options.orig[this.prop]=g.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(d){var f=za||Ta(),i=true,k=this.elem,l=this.options,m;if(d||f>=l.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();l.animatedProperties[this.prop]=true;for(m in l.animatedProperties)if(l.animatedProperties[m]!==
true)i=false;if(i){l.overflow!=null&&!g.support.shrinkWrapBlocks&&g.each(["","X","Y"],function(t,v){k.style["overflow"+v]=l.overflow[t]});l.hide&&g(k).hide();if(l.hide||l.show)for(var p in l.animatedProperties)g.style(k,p,l.orig[p]);l.complete.call(k)}return false}else{if(l.duration==Infinity)this.now=f;else{d=f-this.startTime;this.state=d/l.duration;this.pos=g.easing[l.animatedProperties[this.prop]](this.state,d,0,1,l.duration);this.now=this.start+(this.end-this.start)*this.pos}this.update()}return true}};
g.extend(g.fx,{tick:function(){for(var d=g.timers,f=0;f<d.length;++f)d[f]()||d.splice(f--,1);d.length||g.fx.stop()},interval:13,stop:function(){clearInterval(xa);xa=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(d){g.style(d.elem,"opacity",d.now)},_default:function(d){if(d.elem.style&&d.elem.style[d.prop]!=null)d.elem.style[d.prop]=(d.prop==="width"||d.prop==="height"?Math.max(0,d.now):d.now)+d.unit;else d.elem[d.prop]=d.now}}});if(g.expr&&g.expr.filters)g.expr.filters.animated=
function(d){return g.grep(g.timers,function(f){return d===f.elem}).length};var nc=/^t(?:able|d|h)$/i,qb=/^(?:body|html)$/i;g.fn.offset="getBoundingClientRect"in K.documentElement?function(d){var f=this[0],i;if(d)return this.each(function(p){g.offset.setOffset(this,d,p)});if(!f||!f.ownerDocument)return null;if(f===f.ownerDocument.body)return g.offset.bodyOffset(f);try{i=f.getBoundingClientRect()}catch(k){}var l=f.ownerDocument,m=l.documentElement;if(!i||!g.contains(m,f))return i?{top:i.top,left:i.left}:
{top:0,left:0};f=l.body;l=Ia(l);return{top:i.top+(l.pageYOffset||g.support.boxModel&&m.scrollTop||f.scrollTop)-(m.clientTop||f.clientTop||0),left:i.left+(l.pageXOffset||g.support.boxModel&&m.scrollLeft||f.scrollLeft)-(m.clientLeft||f.clientLeft||0)}}:function(d){var f=this[0];if(d)return this.each(function(D){g.offset.setOffset(this,d,D)});if(!f||!f.ownerDocument)return null;if(f===f.ownerDocument.body)return g.offset.bodyOffset(f);g.offset.initialize();var i,k=f.offsetParent,l=f,m=f.ownerDocument,
p=m.documentElement,t=m.body;i=(m=m.defaultView)?m.getComputedStyle(f,null):f.currentStyle;for(var v=f.offsetTop,w=f.offsetLeft;(f=f.parentNode)&&f!==t&&f!==p;){if(g.offset.supportsFixedPosition&&i.position==="fixed")break;i=m?m.getComputedStyle(f,null):f.currentStyle;v-=f.scrollTop;w-=f.scrollLeft;if(f===k){v+=f.offsetTop;w+=f.offsetLeft;if(g.offset.doesNotAddBorder&&!(g.offset.doesAddBorderForTableAndCells&&nc.test(f.nodeName))){v+=parseFloat(i.borderTopWidth)||0;w+=parseFloat(i.borderLeftWidth)||
0}l=k;k=f.offsetParent}if(g.offset.subtractsBorderForOverflowNotVisible&&i.overflow!=="visible"){v+=parseFloat(i.borderTopWidth)||0;w+=parseFloat(i.borderLeftWidth)||0}i=i}if(i.position==="relative"||i.position==="static"){v+=t.offsetTop;w+=t.offsetLeft}if(g.offset.supportsFixedPosition&&i.position==="fixed"){v+=Math.max(p.scrollTop,t.scrollTop);w+=Math.max(p.scrollLeft,t.scrollLeft)}return{top:v,left:w}};g.offset={initialize:function(){var d=K.body,f=K.createElement("div"),i,k,l,m=parseFloat(g.css(d,
"marginTop"))||0;g.extend(f.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});f.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";d.insertBefore(f,d.firstChild);i=f.firstChild;k=i.firstChild;l=
i.nextSibling.firstChild.firstChild;this.doesNotAddBorder=k.offsetTop!==5;this.doesAddBorderForTableAndCells=l.offsetTop===5;k.style.position="fixed";k.style.top="20px";this.supportsFixedPosition=k.offsetTop===20||k.offsetTop===15;k.style.position=k.style.top="";i.style.overflow="hidden";i.style.position="relative";this.subtractsBorderForOverflowNotVisible=k.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=d.offsetTop!==m;d.removeChild(f);g.offset.initialize=g.noop},bodyOffset:function(d){var f=
d.offsetTop,i=d.offsetLeft;g.offset.initialize();if(g.offset.doesNotIncludeMarginInBodyOffset){f+=parseFloat(g.css(d,"marginTop"))||0;i+=parseFloat(g.css(d,"marginLeft"))||0}return{top:f,left:i}},setOffset:function(d,f,i){var k=g.css(d,"position");if(k==="static")d.style.position="relative";var l=g(d),m=l.offset(),p=g.css(d,"top"),t=g.css(d,"left"),v={},w={};if((k==="absolute"||k==="fixed")&&g.inArray("auto",[p,t])>-1){w=l.position();k=w.top;t=w.left}else{k=parseFloat(p)||0;t=parseFloat(t)||0}if(g.isFunction(f))f=
f.call(d,i,m);if(f.top!=null)v.top=f.top-m.top+k;if(f.left!=null)v.left=f.left-m.left+t;"using"in f?f.using.call(d,v):l.css(v)}};g.fn.extend({position:function(){if(!this[0])return null;var d=this[0],f=this.offsetParent(),i=this.offset(),k=qb.test(f[0].nodeName)?{top:0,left:0}:f.offset();i.top-=parseFloat(g.css(d,"marginTop"))||0;i.left-=parseFloat(g.css(d,"marginLeft"))||0;k.top+=parseFloat(g.css(f[0],"borderTopWidth"))||0;k.left+=parseFloat(g.css(f[0],"borderLeftWidth"))||0;return{top:i.top-k.top,
left:i.left-k.left}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent||K.body;d&&!qb.test(d.nodeName)&&g.css(d,"position")==="static";)d=d.offsetParent;return d})}});g.each(["Left","Top"],function(d,f){var i="scroll"+f;g.fn[i]=function(k){var l,m;if(k===b){l=this[0];if(!l)return null;return(m=Ia(l))?"pageXOffset"in m?m[d?"pageYOffset":"pageXOffset"]:g.support.boxModel&&m.document.documentElement[i]||m.document.body[i]:l[i]}return this.each(function(){if(m=Ia(this))m.scrollTo(!d?
k:g(m).scrollLeft(),d?k:g(m).scrollTop());else this[i]=k})}});g.each(["Height","Width"],function(d,f){var i=f.toLowerCase();g.fn["inner"+f]=function(){var k=this[0];return k&&k.style?parseFloat(g.css(k,i,"padding")):null};g.fn["outer"+f]=function(k){var l=this[0];return l&&l.style?parseFloat(g.css(l,i,k?"margin":"border")):null};g.fn[i]=function(k){var l=this[0];if(!l)return k==null?null:this;if(g.isFunction(k))return this.each(function(p){var t=g(this);t[i](k.call(this,p,t[i]()))});if(g.isWindow(l)){var m=
l.document.documentElement["client"+f];return l.document.compatMode==="CSS1Compat"&&m||l.document.body["client"+f]||m}else if(l.nodeType===9)return Math.max(l.documentElement["client"+f],l.body["scroll"+f],l.documentElement["scroll"+f],l.body["offset"+f],l.documentElement["offset"+f]);else if(k===b){l=g.css(l,i);m=parseFloat(l);return g.isNaN(m)?l:m}else return this.css(i,typeof k==="string"?k:k+"px")}});a.jQuery=a.$=g})(window);var Drupal=Drupal||{settings:{},behaviors:{},locale:{}};jQuery.noConflict();
(function(a){Drupal.attachBehaviors=function(b,c){b=b||document;c=c||Drupal.settings;a.each(Drupal.behaviors,function(){a.isFunction(this.attach)&&this.attach(b,c)})};Drupal.detachBehaviors=function(b,c,e){b=b||document;c=c||Drupal.settings;e=e||"unload";a.each(Drupal.behaviors,function(){a.isFunction(this.detach)&&this.detach(b,c,e)})};Drupal.checkPlain=function(b){var c,e,h={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"};b=String(b);for(c in h)if(h.hasOwnProperty(c)){e=RegExp(c,"g");b=b.replace(e,
h[c])}return b};Drupal.t=function(b,c){if(Drupal.locale.strings&&Drupal.locale.strings[b])b=Drupal.locale.strings[b];if(c)for(var e in c){switch(e.charAt(0)){case "@":c[e]=Drupal.checkPlain(c[e]);break;case "!":break;case "%":default:c[e]=Drupal.theme("placeholder",c[e]);break}b=b.replace(e,c[e])}return b};Drupal.formatPlural=function(b,c,e,h){h=h||{};h["@count"]=b;b=Drupal.locale.pluralFormula?Drupal.locale.pluralFormula(h["@count"]):h["@count"]==1?0:1;if(b==0)return Drupal.t(c,h);else if(b==1)return Drupal.t(e,
h);else{h["@count["+b+"]"]=h["@count"];delete h["@count"];return Drupal.t(e.replace("@count","@count["+b+"]"),h)}};Drupal.theme=function(b){var c=Array.prototype.slice.apply(arguments,[1]);return(Drupal.theme[b]||Drupal.theme.prototype[b]).apply(this,c)};Drupal.freezeHeight=function(){Drupal.unfreezeHeight();a('<div id="freeze-height"></div>').css({position:"absolute",top:"0px",left:"0px",width:"1px",height:a("body").css("height")}).appendTo("body")};Drupal.unfreezeHeight=function(){a("#freeze-height").remove()};
Drupal.encodePath=function(b){return encodeURIComponent(b).replace(/%2F/g,"/")};Drupal.getSelection=function(b){if(typeof b.selectionStart!="number"&&document.selection){var c=document.selection.createRange(),e=c.duplicate();e.moveToElementText(b);e.setEndPoint("EndToEnd",c);b=e.text.length-c.text.length;return{start:b,end:b+c.text.length}}return{start:b.selectionStart,end:b.selectionEnd}};Drupal.ajaxError=function(b,c){var e,h,j,n,r;e=b.status?"\n"+Drupal.t("An AJAX HTTP error occurred.")+"\n"+Drupal.t("HTTP Result Code: !status",
{"!status":b.status}):"\n"+Drupal.t("An AJAX HTTP request terminated abnormally.");e+="\n"+Drupal.t("Debugging information follows.");j="\n"+Drupal.t("Path: !uri",{"!uri":c});h="";try{h="\n"+Drupal.t("StatusText: !statusText",{"!statusText":a.trim(b.statusText)})}catch(u){}n="";try{n="\n"+Drupal.t("ResponseText: !responseText",{"!responseText":a.trim(b.responseText)})}catch(x){}n=n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,"");n=n.replace(/[\n]+\s+/g,"\n");r=b.status==0?"\n"+Drupal.t("ReadyState: !readyState",
{"!readyState":b.readyState}):"";return e+j+h+n+r};a("html").addClass("js");document.cookie="has_js=1; path=/";a(function(){if(jQuery.support.positionFixed===undefined){var b=a('<div style="position:fixed; top:10px" />').appendTo(document.body);jQuery.support.positionFixed=b[0].offsetTop===10;b.remove()}});a(function(){Drupal.attachBehaviors(document,Drupal.settings)});Drupal.theme.prototype={placeholder:function(b){return'<em class="placeholder">'+Drupal.checkPlain(b)+"</em>"}}})(jQuery);
var OpenLayers={VERSION_NUMBER:"Release 2.11",singleFile:true,_getScriptLocation:function(){for(var a=/(^|(.*?\/))(OpenLayers.js)(\?|$)/,b=document.getElementsByTagName("script"),c,e="",h=0,j=b.length;h<j;h++)if(c=b[h].getAttribute("src"))if(c=c.match(a)){e=c[1];break}return function(){return e}}()};
OpenLayers.Class=function(){var a=arguments.length,b=arguments[0],c=arguments[a-1],e=typeof c.initialize=="function"?c.initialize:function(){b.prototype.initialize.apply(this,arguments)};if(a>1){a=[e,b].concat(Array.prototype.slice.call(arguments).slice(1,a-1),c);OpenLayers.inherit.apply(null,a)}else e.prototype=c;return e};OpenLayers.Class.isPrototype=function(){};
OpenLayers.Class.create=function(){return function(){arguments&&arguments[0]!=OpenLayers.Class.isPrototype&&this.initialize.apply(this,arguments)}};OpenLayers.Class.inherit=function(a){var b=function(){a.call(this)},c=[b].concat(Array.prototype.slice.call(arguments));OpenLayers.inherit.apply(null,c);return b.prototype};
OpenLayers.inherit=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;var e,h;c=2;for(e=arguments.length;c<e;c++){h=arguments[c];if(typeof h==="function")h=h.prototype;OpenLayers.Util.extend(a.prototype,h)}};OpenLayers.Util=OpenLayers.Util||{};OpenLayers.Util.extend=function(a,b){a=a||{};if(b){for(var c in b){var e=b[c];if(e!==undefined)a[c]=e}if(!(typeof window.Event=="function"&&b instanceof window.Event)&&b.hasOwnProperty&&b.hasOwnProperty("toString"))a.toString=b.toString}return a};
OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(a){alert(a)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"};
(function(){for(var a=document.getElementsByTagName("script"),b=0,c=a.length;b<c;++b)if(a[b].src.indexOf("firebug.js")!=-1)if(console){OpenLayers.Util.extend(OpenLayers.Console,console);break}})();
OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){OpenLayers.Lang.code||OpenLayers.Lang.setCode();return OpenLayers.Lang.code},setCode:function(a){var b;a||(a=OpenLayers.BROWSER_NAME=="msie"?navigator.userLanguage:navigator.language);a=a.split("-");a[0]=a[0].toLowerCase();if(typeof OpenLayers.Lang[a[0]]=="object")b=a[0];if(a[1]){var c=a[0]+"-"+a[1].toUpperCase();if(typeof OpenLayers.Lang[c]=="object")b=c}if(!b){OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+a.join("-")+" dictionary, falling back to default language");
b=OpenLayers.Lang.defaultCode}OpenLayers.Lang.code=b},translate:function(a,b){var c=OpenLayers.Lang[OpenLayers.Lang.getCode()];(c=c&&c[a])||(c=a);if(b)c=OpenLayers.String.format(c,b);return c}};OpenLayers.i18n=OpenLayers.Lang.translate;
OpenLayers.String={startsWith:function(a,b){return a.indexOf(b)==0},contains:function(a,b){return a.indexOf(b)!=-1},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(a){a=a.split("-");for(var b=a[0],c=1,e=a.length;c<e;c++){var h=a[c];b+=h.charAt(0).toUpperCase()+h.substring(1)}return b},format:function(a,b,c){b||(b=window);return a.replace(OpenLayers.String.tokenRegEx,function(e,h){for(var j,n=h.split(/\.+/),r=0;r<n.length;r++){if(r==0)j=b;j=j[n[r]]}if(typeof j==
"function")j=c?j.apply(null,c):j();return typeof j=="undefined"?"undefined":j})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(a){return OpenLayers.String.numberRegEx.test(a)},numericIf:function(a){return OpenLayers.String.isNumeric(a)?parseFloat(a):a}};
if(!String.prototype.startsWith)String.prototype.startsWith=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.String.startsWith"}));return OpenLayers.String.startsWith(this,a)};if(!String.prototype.contains)String.prototype.contains=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.String.contains"}));return OpenLayers.String.contains(this,a)};
if(!String.prototype.trim)String.prototype.trim=function(){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.String.trim"}));return OpenLayers.String.trim(this)};if(!String.prototype.camelize)String.prototype.camelize=function(){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.String.camelize"}));return OpenLayers.String.camelize(this)};
OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(a,b){var c=0;if(b>0)c=parseFloat(a.toPrecision(b));return c},format:function(a,b,c,e){b=typeof b!="undefined"?b:0;c=typeof c!="undefined"?c:OpenLayers.Number.thousandsSeparator;e=typeof e!="undefined"?e:OpenLayers.Number.decimalSeparator;if(b!=null)a=parseFloat(a.toFixed(b));var h=a.toString().split(".");if(h.length==1&&b==null)b=0;a=h[0];if(c)for(var j=/(-?[0-9]+)([0-9]{3})/;j.test(a);)a=a.replace(j,"$1"+c+"$2");
if(b==0)b=a;else{c=h.length>1?h[1]:"0";if(b!=null)c+=Array(b-c.length+1).join("0");b=a+e+c}return b}};if(!Number.prototype.limitSigDigs)Number.prototype.limitSigDigs=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.Number.limitSigDigs"}));return OpenLayers.Number.limitSigDigs(this,a)};
OpenLayers.Function={bind:function(a,b){var c=Array.prototype.slice.apply(arguments,[2]);return function(){var e=c.concat(Array.prototype.slice.apply(arguments,[0]));return a.apply(b,e)}},bindAsEventListener:function(a,b){return function(c){return a.call(b,c||window.event)}},False:function(){return false},True:function(){return true},Void:function(){}};
if(!Function.prototype.bind)Function.prototype.bind=function(){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.Function.bind"}));Array.prototype.unshift.apply(arguments,[this]);return OpenLayers.Function.bind.apply(null,arguments)};
if(!Function.prototype.bindAsEventListener)Function.prototype.bindAsEventListener=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.Function.bindAsEventListener"}));return OpenLayers.Function.bindAsEventListener(this,a)};OpenLayers.Array={filter:function(a,b,c){var e=[];if(Array.prototype.filter)e=a.filter(b,c);else{var h=a.length;if(typeof b!="function")throw new TypeError;for(var j=0;j<h;j++)if(j in a){var n=a[j];b.call(c,n,j,a)&&e.push(n)}}return e}};
OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(a,b,c,e){if(a!=null)this.left=OpenLayers.Util.toFloat(a);if(b!=null)this.bottom=OpenLayers.Util.toFloat(b);if(c!=null)this.right=OpenLayers.Util.toFloat(c);if(e!=null)this.top=OpenLayers.Util.toFloat(e)},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(a){var b=false;if(a!=null)b=this.left==a.left&&this.right==a.right&&this.top==
a.top&&this.bottom==a.bottom;return b},toString:function(){return[this.left,this.bottom,this.right,this.top].join(",")},toArray:function(a){return a===true?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(a,b){if(a==null)a=6;var c=Math.pow(10,a),e=Math.round(this.left*c)/c,h=Math.round(this.bottom*c)/c,j=Math.round(this.right*c)/c;c=Math.round(this.top*c)/c;return b===true?h+","+e+","+c+","+j:e+","+h+","+j+","+c},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,
this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){if(!this.centerLonLat)this.centerLonLat=
new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2);return this.centerLonLat},scale:function(a,b){if(b==null)b=this.getCenterLonLat();var c,e;if(b.CLASS_NAME=="OpenLayers.LonLat"){c=b.lon;e=b.lat}else{c=b.x;e=b.y}return new OpenLayers.Bounds((this.left-c)*a+c,(this.bottom-e)*a+e,(this.right-c)*a+c,(this.top-e)*a+e)},add:function(a,b){if(a==null||b==null){var c=OpenLayers.i18n("boundsAddError");OpenLayers.Console.error(c);return null}return new OpenLayers.Bounds(this.left+a,this.bottom+
b,this.right+a,this.top+b)},extend:function(a){var b=null;if(a){switch(a.CLASS_NAME){case "OpenLayers.LonLat":b=new OpenLayers.Bounds(a.lon,a.lat,a.lon,a.lat);break;case "OpenLayers.Geometry.Point":b=new OpenLayers.Bounds(a.x,a.y,a.x,a.y);break;case "OpenLayers.Bounds":b=a;break}if(b){this.centerLonLat=null;if(this.left==null||b.left<this.left)this.left=b.left;if(this.bottom==null||b.bottom<this.bottom)this.bottom=b.bottom;if(this.right==null||b.right>this.right)this.right=b.right;if(this.top==null||
b.top>this.top)this.top=b.top}}},containsLonLat:function(a,b){return this.contains(a.lon,a.lat,b)},containsPixel:function(a,b){return this.contains(a.x,a.y,b)},contains:function(a,b,c){if(c==null)c=true;if(a==null||b==null)return false;a=OpenLayers.Util.toFloat(a);b=OpenLayers.Util.toFloat(b);var e=false;return e=c?a>=this.left&&a<=this.right&&b>=this.bottom&&b<=this.top:a>this.left&&a<this.right&&b>this.bottom&&b<this.top},intersectsBounds:function(a,b){if(b==null)b=true;var c=false,e=this.left==
a.right||this.right==a.left||this.top==a.bottom||this.bottom==a.top;if(b||!e){c=a.top>=this.bottom&&a.top<=this.top||this.top>a.bottom&&this.top<a.top;e=a.left>=this.left&&a.left<=this.right||this.left>=a.left&&this.left<=a.right;var h=a.right>=this.left&&a.right<=this.right||this.right>=a.left&&this.right<=a.right;c=(a.bottom>=this.bottom&&a.bottom<=this.top||this.bottom>=a.bottom&&this.bottom<=a.top||c)&&(e||h)}return c},containsBounds:function(a,b,c){if(b==null)b=false;if(c==null)c=true;var e=
this.contains(a.left,a.bottom,c),h=this.contains(a.right,a.bottom,c),j=this.contains(a.left,a.top,c);a=this.contains(a.right,a.top,c);return b?e||h||j||a:e&&h&&j&&a},determineQuadrant:function(a){var b="",c=this.getCenterLonLat();b+=a.lat<c.lat?"b":"t";b+=a.lon<c.lon?"l":"r";return b},transform:function(a,b){this.centerLonLat=null;var c=OpenLayers.Projection.transform({x:this.left,y:this.bottom},a,b),e=OpenLayers.Projection.transform({x:this.right,y:this.bottom},a,b),h=OpenLayers.Projection.transform({x:this.left,
y:this.top},a,b),j=OpenLayers.Projection.transform({x:this.right,y:this.top},a,b);this.left=Math.min(c.x,h.x);this.bottom=Math.min(c.y,e.y);this.right=Math.max(e.x,j.x);this.top=Math.max(h.y,j.y);return this},wrapDateLine:function(a,b){b=b||{};var c=b.leftTolerance||0,e=b.rightTolerance||0,h=this.clone();if(a){for(;h.left<a.left&&h.right-e<=a.left;)h=h.add(a.getWidth(),0);for(;h.left+c>=a.right&&h.right>a.right;)h=h.add(-a.getWidth(),0)}return h},CLASS_NAME:"OpenLayers.Bounds"});
OpenLayers.Bounds.fromString=function(a,b){var c=a.split(",");return OpenLayers.Bounds.fromArray(c,b)};OpenLayers.Bounds.fromArray=function(a,b){return b===true?new OpenLayers.Bounds(parseFloat(a[1]),parseFloat(a[0]),parseFloat(a[3]),parseFloat(a[2])):new OpenLayers.Bounds(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]))};OpenLayers.Bounds.fromSize=function(a){return new OpenLayers.Bounds(0,a.h,a.w,0)};
OpenLayers.Bounds.oppositeQuadrant=function(a){var b="";b+=a.charAt(0)=="t"?"b":"t";b+=a.charAt(1)=="l"?"r":"l";return b};
OpenLayers.Element={visible:function(a){return OpenLayers.Util.getElement(a).style.display!="none"},toggle:function(){for(var a=0,b=arguments.length;a<b;a++){var c=OpenLayers.Util.getElement(arguments[a]),e=OpenLayers.Element.visible(c)?"hide":"show";OpenLayers.Element[e](c)}},hide:function(){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"element.style.display = 'none';"}));for(var a=0,b=arguments.length;a<b;a++){var c=OpenLayers.Util.getElement(arguments[a]);if(c)c.style.display=
"none"}},show:function(){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"element.style.display = '';"}));for(var a=0,b=arguments.length;a<b;a++){var c=OpenLayers.Util.getElement(arguments[a]);if(c)c.style.display=""}},remove:function(a){a=OpenLayers.Util.getElement(a);a.parentNode.removeChild(a)},getHeight:function(a){a=OpenLayers.Util.getElement(a);return a.offsetHeight},getDimensions:function(a){a=OpenLayers.Util.getElement(a);if(OpenLayers.Element.getStyle(a,"display")!=
"none")return{width:a.offsetWidth,height:a.offsetHeight};var b=a.style,c=b.visibility,e=b.position,h=b.display;b.visibility="hidden";b.position="absolute";b.display="";var j=a.clientWidth;a=a.clientHeight;b.display=h;b.position=e;b.visibility=c;return{width:j,height:a}},hasClass:function(a,b){var c=a.className;return!!c&&RegExp("(^|\\s)"+b+"(\\s|$)").test(c)},addClass:function(a,b){OpenLayers.Element.hasClass(a,b)||(a.className+=(a.className?" ":"")+b);return a},removeClass:function(a,b){var c=a.className;
if(c)a.className=OpenLayers.String.trim(c.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," "));return a},toggleClass:function(a,b){OpenLayers.Element.hasClass(a,b)?OpenLayers.Element.removeClass(a,b):OpenLayers.Element.addClass(a,b);return a},getStyle:function(a,b){a=OpenLayers.Util.getElement(a);var c=null;if(a&&a.style){c=a.style[OpenLayers.String.camelize(b)];if(!c)if(document.defaultView&&document.defaultView.getComputedStyle)c=(c=document.defaultView.getComputedStyle(a,null))?c.getPropertyValue(b):
null;else if(a.currentStyle)c=a.currentStyle[OpenLayers.String.camelize(b)];var e=["left","top","right","bottom"];if(window.opera&&OpenLayers.Util.indexOf(e,b)!=-1&&OpenLayers.Element.getStyle(a,"position")=="static")c="auto"}return c=="auto"?null:c}};
OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(a,b){this.lon=OpenLayers.Util.toFloat(a);this.lat=OpenLayers.Util.toFloat(b)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(a,b){if(a==null||b==null){var c=OpenLayers.i18n("lonlatAddError");OpenLayers.Console.error(c);return null}return new OpenLayers.LonLat(this.lon+OpenLayers.Util.toFloat(a),
this.lat+OpenLayers.Util.toFloat(b))},equals:function(a){var b=false;if(a!=null)b=this.lon==a.lon&&this.lat==a.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(a.lon)&&isNaN(a.lat);return b},transform:function(a,b){var c=OpenLayers.Projection.transform({x:this.lon,y:this.lat},a,b);this.lon=c.x;this.lat=c.y;return this},wrapDateLine:function(a){var b=this.clone();if(a){for(;b.lon<a.left;)b.lon+=a.getWidth();for(;b.lon>a.right;)b.lon-=a.getWidth()}return b},CLASS_NAME:"OpenLayers.LonLat"});
OpenLayers.LonLat.fromString=function(a){a=a.split(",");return new OpenLayers.LonLat(a[0],a[1])};OpenLayers.LonLat.fromArray=function(a){var b=OpenLayers.Util.isArray(a);return new OpenLayers.LonLat(b&&a[0],b&&a[1])};
OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(a,b){this.x=parseFloat(a);this.y=parseFloat(b)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(a){var b=false;if(a!=null)b=this.x==a.x&&this.y==a.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y);return b},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},add:function(a,b){if(a==null||b==null){var c=OpenLayers.i18n("pixelAddError");
OpenLayers.Console.error(c);return null}return new OpenLayers.Pixel(this.x+a,this.y+b)},offset:function(a){var b=this.clone();if(a)b=this.add(a.x,a.y);return b},CLASS_NAME:"OpenLayers.Pixel"});
OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(a,b){this.w=parseFloat(a);this.h=parseFloat(b)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(a){var b=false;if(a!=null)b=this.w==a.w&&this.h==a.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(a.w)&&isNaN(a.h);return b},CLASS_NAME:"OpenLayers.Size"});OpenLayers.Util=OpenLayers.Util||{};
OpenLayers.Util.getElement=function(){for(var a=[],b=0,c=arguments.length;b<c;b++){var e=arguments[b];if(typeof e=="string")e=document.getElementById(e);if(arguments.length==1)return e;a.push(e)}return a};OpenLayers.Util.isElement=function(a){return!!(a&&a.nodeType===1)};OpenLayers.Util.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"};if(typeof window.$==="undefined")window.$=OpenLayers.Util.getElement;
OpenLayers.Util.removeItem=function(a,b){for(var c=a.length-1;c>=0;c--)a[c]==b&&a.splice(c,1);return a};OpenLayers.Util.clearArray=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"array = []"}));a.length=0};OpenLayers.Util.indexOf=function(a,b){if(typeof a.indexOf=="function")return a.indexOf(b);else{for(var c=0,e=a.length;c<e;c++)if(a[c]==b)return c;return-1}};
OpenLayers.Util.modifyDOMElement=function(a,b,c,e,h,j,n,r){if(b)a.id=b;if(c){a.style.left=c.x+"px";a.style.top=c.y+"px"}if(e){a.style.width=e.w+"px";a.style.height=e.h+"px"}if(h)a.style.position=h;if(j)a.style.border=j;if(n)a.style.overflow=n;if(parseFloat(r)>=0&&parseFloat(r)<1){a.style.filter="alpha(opacity="+r*100+")";a.style.opacity=r}else if(parseFloat(r)==1){a.style.filter="";a.style.opacity=""}};
OpenLayers.Util.createDiv=function(a,b,c,e,h,j,n,r){var u=document.createElement("div");if(e)u.style.backgroundImage="url("+e+")";a||(a=OpenLayers.Util.createUniqueID("OpenLayersDiv"));h||(h="absolute");OpenLayers.Util.modifyDOMElement(u,a,b,c,h,j,n,r);return u};
OpenLayers.Util.createImage=function(a,b,c,e,h,j,n,r){var u=document.createElement("img");a||(a=OpenLayers.Util.createUniqueID("OpenLayersDiv"));h||(h="relative");OpenLayers.Util.modifyDOMElement(u,a,b,c,h,j,null,n);if(r){u.style.display="none";OpenLayers.Event.observe(u,"load",OpenLayers.Function.bind(OpenLayers.Util.onImageLoad,u));OpenLayers.Event.observe(u,"error",OpenLayers.Function.bind(OpenLayers.Util.onImageLoadError,u))}u.style.alt=a;u.galleryImg="no";if(e)u.src=e;return u};
OpenLayers.Util.setOpacity=function(a,b){OpenLayers.Util.modifyDOMElement(a,null,null,null,null,null,null,b)};OpenLayers.Util.onImageLoad=function(){if(!this.viewRequestID||this.map&&this.viewRequestID==this.map.viewRequestID)this.style.display="";OpenLayers.Element.removeClass(this,"olImageLoadError")};OpenLayers.IMAGE_RELOAD_ATTEMPTS=0;
OpenLayers.Util.onImageLoadError=function(){this._attempts=this._attempts?this._attempts+1:1;if(this._attempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS){var a=this.urls;if(a&&OpenLayers.Util.isArray(a)&&a.length>1){var b=this.src.toString(),c,e;for(e=0;c=a[e];e++)if(b.indexOf(c)!=-1)break;var h=Math.floor(a.length*Math.random());h=a[h];for(e=0;h==c&&e++<4;){h=Math.floor(a.length*Math.random());h=a[h]}this.src=b.replace(c,h)}else this.src=this.src}else OpenLayers.Element.addClass(this,"olImageLoadError");
this.style.display=""};OpenLayers.Util.alphaHackNeeded=null;OpenLayers.Util.alphaHack=function(){if(OpenLayers.Util.alphaHackNeeded==null){var a=navigator.appVersion.split("MSIE");a=parseFloat(a[1]);var b=false;try{b=!!document.body.filters}catch(c){}OpenLayers.Util.alphaHackNeeded=b&&a>=5.5&&a<7}return OpenLayers.Util.alphaHackNeeded};
OpenLayers.Util.modifyAlphaImageDiv=function(a,b,c,e,h,j,n,r,u){OpenLayers.Util.modifyDOMElement(a,b,c,e,j,null,null,u);b=a.childNodes[0];if(h)b.src=h;OpenLayers.Util.modifyDOMElement(b,a.id+"_innerImage",null,e,"relative",n);if(OpenLayers.Util.alphaHack()){if(a.style.display!="none")a.style.display="inline-block";if(r==null)r="scale";a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b.src+"', sizingMethod='"+r+"')";if(parseFloat(a.style.opacity)>=0&&parseFloat(a.style.opacity)<
1)a.style.filter+=" alpha(opacity="+a.style.opacity*100+")";b.style.filter="alpha(opacity=0)"}};
OpenLayers.Util.createAlphaImageDiv=function(a,b,c,e,h,j,n,r,u){var x=OpenLayers.Util.createDiv(),C=OpenLayers.Util.createImage(null,null,null,null,null,null,null,false);x.appendChild(C);if(u){C.style.display="none";OpenLayers.Event.observe(C,"load",OpenLayers.Function.bind(OpenLayers.Util.onImageLoad,x));OpenLayers.Event.observe(C,"error",OpenLayers.Function.bind(OpenLayers.Util.onImageLoadError,x))}OpenLayers.Util.modifyAlphaImageDiv(x,a,b,c,e,h,j,n,r);return x};
OpenLayers.Util.upperCaseObject=function(a){var b={};for(var c in a)b[c.toUpperCase()]=a[c];return b};OpenLayers.Util.applyDefaults=function(a,b){a=a||{};var c=typeof window.Event=="function"&&b instanceof window.Event;for(var e in b)if(a[e]===undefined||!c&&b.hasOwnProperty&&b.hasOwnProperty(e)&&!a.hasOwnProperty(e))a[e]=b[e];if(!c&&b&&b.hasOwnProperty&&b.hasOwnProperty("toString")&&!a.hasOwnProperty("toString"))a.toString=b.toString;return a};
OpenLayers.Util.getParameterString=function(a){var b=[];for(var c in a){var e=a[c];if(e!=null&&typeof e!="function"){if(typeof e=="object"&&e.constructor==Array){for(var h=[],j,n=0,r=e.length;n<r;n++){j=e[n];h.push(encodeURIComponent(j===null||j===undefined?"":j))}e=h.join(",")}else e=encodeURIComponent(e);b.push(encodeURIComponent(c)+"="+e)}}return b.join("&")};OpenLayers.Util.urlAppend=function(a,b){var c=a;if(b){var e=(a+" ").split(/[?&]/);c+=e.pop()===" "?b:e.length?"&"+b:"?"+b}return c};
OpenLayers.ImgPath="";OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"};OpenLayers.Util.Try=function(){for(var a=null,b=0,c=arguments.length;b<c;b++){var e=arguments[b];try{a=e();break}catch(h){}}return a};OpenLayers.Util.getXmlNodeValue=function(a){var b=null;OpenLayers.Util.Try(function(){b=a.text;if(!b)b=a.textContent;if(!b)b=a.firstChild.nodeValue},function(){b=a.textContent});return b};
OpenLayers.Util.mouseLeft=function(a,b){for(var c=a.relatedTarget?a.relatedTarget:a.toElement;c!=b&&c!=null;)c=c.parentNode;return c!=b};OpenLayers.Util.DEFAULT_PRECISION=14;OpenLayers.Util.toFloat=function(a,b){if(b==null)b=OpenLayers.Util.DEFAULT_PRECISION;if(typeof a!=="number")a=parseFloat(a);return b===0?a:parseFloat(a.toPrecision(b))};OpenLayers.Util.rad=function(a){return a*Math.PI/180};OpenLayers.Util.deg=function(a){return a*180/Math.PI};
OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563};
OpenLayers.Util.distVincenty=function(a,b){var c=OpenLayers.Util.VincentyConstants,e=c.a,h=c.b;c=c.f;var j=OpenLayers.Util.rad(b.lon-a.lon),n=Math.atan((1-c)*Math.tan(OpenLayers.Util.rad(a.lat))),r=Math.atan((1-c)*Math.tan(OpenLayers.Util.rad(b.lat))),u=Math.sin(n);n=Math.cos(n);var x=Math.sin(r);r=Math.cos(r);for(var C=j,J=2*Math.PI,M=20;Math.abs(C-J)>1.0E-12&&--M>0;){var I=Math.sin(C),N=Math.cos(C),S=Math.sqrt(r*I*r*I+(n*x-u*r*N)*(n*x-u*r*N));if(S==0)return 0;N=u*x+n*r*N;var V=Math.atan2(S,N),W=
Math.asin(n*r*I/S),X=Math.cos(W)*Math.cos(W);I=N-2*u*x/X;var ea=c/16*X*(4+c*(4-3*X));J=C;C=j+(1-ea)*c*Math.sin(W)*(V+ea*S*(I+ea*N*(-1+2*I*I)))}if(M==0)return NaN;e=X*(e*e-h*h)/(h*h);c=e/1024*(256+e*(-128+e*(74-47*e)));return(h*(1+e/16384*(4096+e*(-768+e*(320-175*e))))*(V-c*S*(I+c/4*(N*(-1+2*I*I)-c/6*I*(-3+4*S*S)*(-3+4*I*I))))).toFixed(3)/1E3};
OpenLayers.Util.destinationVincenty=function(a,b,c){var e=OpenLayers.Util,h=e.VincentyConstants,j=h.a,n=h.b;h=h.f;var r=a.lon,u=a.lat;a=e.rad(b);b=Math.sin(a);a=Math.cos(a);var x=(1-h)*Math.tan(e.rad(u));u=1/Math.sqrt(1+x*x);var C=x*u,J=Math.atan2(x,a);x=u*b;var M=1-x*x;j=M*(j*j-n*n)/(n*n);var I=1+j/16384*(4096+j*(-768+j*(320-175*j))),N=j/1024*(256+j*(-128+j*(74-47*j)));j=c/(n*I);for(var S=2*Math.PI;Math.abs(j-S)>1.0E-12;){var V=Math.cos(2*J+j),W=Math.sin(j),X=Math.cos(j),ea=N*W*(V+N/4*(X*(-1+2*V*
V)-N/6*V*(-3+4*W*W)*(-3+4*V*V)));S=j;j=c/(n*I)+ea}c=C*W-u*X*a;c=Math.atan2(C*X+u*W*a,(1-h)*Math.sqrt(x*x+c*c));n=h/16*M*(4+h*(4-3*M));return new OpenLayers.LonLat(r+e.deg(Math.atan2(W*b,u*X-C*W*a)-(1-n)*h*x*(j+n*W*(V+n*X*(-1+2*V*V)))),e.deg(c))};
OpenLayers.Util.getParameters=function(a){a=a===null||a===undefined?window.location.href:a;var b="";if(OpenLayers.String.contains(a,"?")){b=a.indexOf("?")+1;var c=OpenLayers.String.contains(a,"#")?a.indexOf("#"):a.length;b=a.substring(b,c)}a={};b=b.split(/[&;]/);c=0;for(var e=b.length;c<e;++c){var h=b[c].split("=");if(h[0]){var j=h[0];try{j=decodeURIComponent(j)}catch(n){j=unescape(j)}h=(h[1]||"").replace(/\+/g," ");try{h=decodeURIComponent(h)}catch(r){h=unescape(h)}h=h.split(",");if(h.length==1)h=
h[0];a[j]=h}}return a};OpenLayers.Util.getArgs=function(a){OpenLayers.Console.warn(OpenLayers.i18n("methodDeprecated",{newMethod:"OpenLayers.Util.getParameters"}));return OpenLayers.Util.getParameters(a)};OpenLayers.Util.lastSeqID=0;OpenLayers.Util.createUniqueID=function(a){if(a==null)a="id_";OpenLayers.Util.lastSeqID+=1;return a+OpenLayers.Util.lastSeqID};OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};OpenLayers.INCHES_PER_UNIT["in"]=OpenLayers.INCHES_PER_UNIT.inches;
OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd;OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m;OpenLayers.METERS_PER_INCH=0.0254000508001016;
OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:0.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:0.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:0.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:0.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:0.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:0.0254/OpenLayers.METERS_PER_INCH,MicroInch:2.54E-5/OpenLayers.METERS_PER_INCH,Mil:2.54E-8/OpenLayers.METERS_PER_INCH,
Centimeter:0.01/OpenLayers.METERS_PER_INCH,Kilometer:1E3/OpenLayers.METERS_PER_INCH,Yard:0.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:0.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:0.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:0.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:0.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:0.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:0.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:0.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:0.3047996/
OpenLayers.METERS_PER_INCH,IndianFt75:0.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:0.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:0.1/OpenLayers.METERS_PER_INCH,Millimeter:0.0010/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,
Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:0.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:0.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:0.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:0.20116782494375873/OpenLayers.METERS_PER_INCH,
SearsLink:0.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:0.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:0.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:0.304812252984506/
OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5E4/OpenLayers.METERS_PER_INCH,"150kilometers":15E4/OpenLayers.METERS_PER_INCH});
OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1E3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:OpenLayers.INCHES_PER_UNIT.Meter*100,km:OpenLayers.INCHES_PER_UNIT.Meter*1E3,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,
"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH});OpenLayers.DOTS_PER_INCH=72;OpenLayers.Util.normalizeScale=function(a){return a>1?1/a:a};OpenLayers.Util.getResolutionFromScale=function(a,b){var c;if(a){if(b==null)b="degrees";c=1/(OpenLayers.Util.normalizeScale(a)*OpenLayers.INCHES_PER_UNIT[b]*OpenLayers.DOTS_PER_INCH)}return c};
OpenLayers.Util.getScaleFromResolution=function(a,b){if(b==null)b="degrees";return a*OpenLayers.INCHES_PER_UNIT[b]*OpenLayers.DOTS_PER_INCH};OpenLayers.Util.safeStopPropagation=function(a){OpenLayers.Event.stop(a,true)};
OpenLayers.Util.pagePosition=function(a){var b=[0,0],c=OpenLayers.Util.getViewportElement();if(!a||a==window||a==c)return b;var e=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&OpenLayers.Element.getStyle(a,"position")=="absolute"&&(a.style.top==""||a.style.left==""),h=null;if(a.getBoundingClientRect){a=a.getBoundingClientRect();h=c.scrollTop;b[0]=a.left+c.scrollLeft;b[1]=a.top+h}else if(document.getBoxObjectFor&&!e){a=document.getBoxObjectFor(a);c=document.getBoxObjectFor(c);b[0]=a.screenX-c.screenX;
b[1]=a.screenY-c.screenY}else{b[0]=a.offsetLeft;b[1]=a.offsetTop;h=a.offsetParent;if(h!=a)for(;h;){b[0]+=h.offsetLeft;b[1]+=h.offsetTop;h=h.offsetParent}c=OpenLayers.BROWSER_NAME;if(c=="opera"||c=="safari"&&OpenLayers.Element.getStyle(a,"position")=="absolute")b[1]-=document.body.offsetTop;for(h=a.offsetParent;h&&h!=document.body;){b[0]-=h.scrollLeft;if(c!="opera"||h.tagName!="TR")b[1]-=h.scrollTop;h=h.offsetParent}}return b};
OpenLayers.Util.getViewportElement=function(){var a=arguments.callee.viewportElement;if(a==undefined){a=OpenLayers.BROWSER_NAME=="msie"&&document.compatMode!="CSS1Compat"?document.body:document.documentElement;arguments.callee.viewportElement=a}return a};
OpenLayers.Util.isEquivalentUrl=function(a,b,c){c=c||{};OpenLayers.Util.applyDefaults(c,{ignoreCase:true,ignorePort80:true,ignoreHash:true});a=OpenLayers.Util.createUrlObject(a,c);b=OpenLayers.Util.createUrlObject(b,c);for(var e in a)if(e!=="args")if(a[e]!=b[e])return false;for(e in a.args){if(a.args[e]!=b.args[e])return false;delete b.args[e]}for(e in b.args)return false;return true};
OpenLayers.Util.createUrlObject=function(a,b){b=b||{};if(!/^\w+:\/\//.test(a)){var c=window.location,e=c.port?":"+c.port:"";e=c.protocol+"//"+c.host.split(":").shift()+e;if(a.indexOf("/")===0)a=e+a;else{c=c.pathname.split("/");c.pop();a=e+c.join("/")+"/"+a}}if(b.ignoreCase)a=a.toLowerCase();c=document.createElement("a");c.href=a;e={};e.host=c.host.split(":").shift();e.protocol=c.protocol;e.port=b.ignorePort80?c.port=="80"||c.port=="0"?"":c.port:c.port==""||c.port=="0"?"80":c.port;e.hash=b.ignoreHash||
c.hash==="#"?"":c.hash;var h=c.search;if(!h){h=a.indexOf("?");h=h!=-1?a.substr(h):""}e.args=OpenLayers.Util.getParameters(h);e.pathname=c.pathname.charAt(0)=="/"?c.pathname:"/"+c.pathname;return e};OpenLayers.Util.removeTail=function(a){var b=null;b=a.indexOf("?");var c=a.indexOf("#");return b=b==-1?c!=-1?a.substr(0,c):a:c!=-1?a.substr(0,Math.min(b,c)):a.substr(0,b)};OpenLayers.IS_GECKO=function(){var a=navigator.userAgent.toLowerCase();return a.indexOf("webkit")==-1&&a.indexOf("gecko")!=-1}();
OpenLayers.BROWSER_NAME=function(){var a="",b=navigator.userAgent.toLowerCase();if(b.indexOf("opera")!=-1)a="opera";else if(b.indexOf("msie")!=-1)a="msie";else if(b.indexOf("safari")!=-1)a="safari";else if(b.indexOf("mozilla")!=-1)a=b.indexOf("firefox")!=-1?"firefox":"mozilla";return a}();OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME};
OpenLayers.Util.getRenderedDimensions=function(a,b,c){var e,h,j=document.createElement("div");j.style.visibility="hidden";var n=c&&c.containerElement?c.containerElement:document.body;if(b)if(b.w){e=b.w;j.style.width=e+"px"}else if(b.h){h=b.h;j.style.height=h+"px"}if(c&&c.displayClass)j.className=c.displayClass;b=document.createElement("div");b.innerHTML=a;b.style.overflow="visible";if(b.childNodes){a=0;for(c=b.childNodes.length;a<c;a++)if(b.childNodes[a].style)b.childNodes[a].style.overflow="visible"}j.appendChild(b);
n.appendChild(j);a=false;for(c=j.parentNode;c&&c.tagName.toLowerCase()!="body";){var r=OpenLayers.Element.getStyle(c,"position");if(r=="absolute"){a=true;break}else if(r&&r!="static")break;c=c.parentNode}if(!a)j.style.position="absolute";if(!e){e=parseInt(b.scrollWidth);j.style.width=e+"px"}h||(h=parseInt(b.scrollHeight));j.removeChild(b);n.removeChild(j);return new OpenLayers.Size(e,h)};
OpenLayers.Util.getScrollbarWidth=function(){var a=OpenLayers.Util._scrollbarWidth;if(a==null){var b=null,c=null;b=a=0;b=document.createElement("div");b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.style.width="100px";b.style.height="50px";b.style.overflow="hidden";c=document.createElement("div");c.style.width="100%";c.style.height="200px";b.appendChild(c);document.body.appendChild(b);a=c.offsetWidth;b.style.overflow="scroll";b=c.offsetWidth;document.body.removeChild(document.body.lastChild);
OpenLayers.Util._scrollbarWidth=a-b;a=OpenLayers.Util._scrollbarWidth}return a};
OpenLayers.Util.getFormattedLonLat=function(a,b,c){c||(c="dms");a=(a+540)%360-180;var e=Math.abs(a),h=Math.floor(e),j=e=(e-h)/(1/60);e=Math.floor(e);j=(j-e)/(1/60);j=Math.round(j*10);j/=10;if(j>=60){j-=60;e+=1;if(e>=60){e-=60;h+=1}}if(h<10)h="0"+h;h=h+"\u00b0";if(c.indexOf("dm")>=0){if(e<10)e="0"+e;h+=e+"'";if(c.indexOf("dms")>=0){if(j<10)j="0"+j;h+=j+'"'}}h+=b=="lon"?a<0?OpenLayers.i18n("W"):OpenLayers.i18n("E"):a<0?OpenLayers.i18n("S"):OpenLayers.i18n("N");return h};
OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(a,b,c){this.layer=a;this.lonlat=b;this.data=c!=null?c:{};this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.layer!=null&&this.layer.map!=null&&this.popup!=null&&this.layer.map.removePopup(this.popup);this.layer!=null&&this.marker!=null&&this.layer.removeMarker(this.marker);this.data=this.lonlat=this.id=this.layer=null;if(this.marker!=
null){this.destroyMarker(this.marker);this.marker=null}if(this.popup!=null){this.destroyPopup(this.popup);this.popup=null}},onScreen:function(){var a=false;if(this.layer!=null&&this.layer.map!=null)a=this.layer.map.getExtent().containsLonLat(this.lonlat);return a},createMarker:function(){if(this.lonlat!=null)this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon);return this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(a){if(this.lonlat!=null){if(!this.popup)this.popup=
new (this.popupClass?this.popupClass:OpenLayers.Popup.AnchoredBubble)(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,this.marker?this.marker.icon:null,a);if(this.data.overflow!=null)this.popup.contentDiv.style.overflow=this.data.overflow;this.popup.feature=this}return this.popup},destroyPopup:function(){if(this.popup){this.popup.feature=null;this.popup.destroy();this.popup=null}},CLASS_NAME:"OpenLayers.Feature"});
OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"};
OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",modified:null,initialize:function(a,b,c){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,b]);this.lonlat=null;this.geometry=a?a:null;this.state=null;this.attributes={};if(b)this.attributes=OpenLayers.Util.extend(this.attributes,b);this.style=c?c:null},destroy:function(){if(this.layer){this.layer.removeFeatures(this);this.layer=
null}this.modified=this.geometry=null;OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(a){var b=false;if(this.layer&&this.layer.map){b=this.layer.map.getExtent();if(a){a=this.geometry.getBounds();b=b.intersectsBounds(a)}else b=b.toGeometry().intersects(this.geometry)}return b},getVisibility:function(){return!(this.style&&this.style.display=="none"||
!this.layer||this.layer&&this.layer.styleMap&&this.layer.styleMap.createSymbolizer(this,this.renderIntent).display=="none"||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(a,b,c){var e=false;if(this.geometry)e=this.geometry.atPoint(a,b,c);return e},destroyPopup:function(){},move:function(a){if(this.layer&&this.geometry.move){a=a.CLASS_NAME=="OpenLayers.LonLat"?this.layer.getViewPortPxFromLonLat(a):
a;var b=this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),c=this.layer.map.getResolution();this.geometry.move(c*(a.x-b.x),c*(b.y-a.y));this.layer.drawFeature(this);return b}},toState:function(a){if(a==OpenLayers.State.UPDATE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=a;break;case OpenLayers.State.UPDATE:case OpenLayers.State.INSERT:break}else if(a==OpenLayers.State.INSERT)switch(this.state){case OpenLayers.State.UNKNOWN:break;
default:this.state=a;break}else if(a==OpenLayers.State.DELETE)switch(this.state){case OpenLayers.State.INSERT:break;case OpenLayers.State.DELETE:break;case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=a;break}else if(a==OpenLayers.State.UNKNOWN)this.state=a},CLASS_NAME:"OpenLayers.Feature.Vector"});
OpenLayers.Feature.Vector.style={"default":{fillColor:"#ee9900",fillOpacity:0.4,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit"},select:{fillColor:"blue",fillOpacity:0.4,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"blue",strokeOpacity:1,
strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer"},temporary:{fillColor:"#66cccc",fillOpacity:0.2,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,
hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit"},"delete":{display:"none"}};
OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:false,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:false,propertyStyles:null,initialize:function(a,b){OpenLayers.Util.extend(this,b);this.rules=[];b&&b.rules&&this.addRules(b.rules);this.setDefaultStyle(a||OpenLayers.Feature.Vector.style["default"]);this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var a=0,b=this.rules.length;a<b;a++){this.rules[a].destroy();
this.rules[a]=null}this.defaultStyle=this.rules=null},createSymbolizer:function(a){for(var b=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),a),c=this.rules,e,h=[],j=false,n=0,r=c.length;n<r;n++){e=c[n];if(e.evaluate(a))if(e instanceof OpenLayers.Rule&&e.elseFilter)h.push(e);else{j=true;this.applySymbolizer(e,b,a)}}if(j==false&&h.length>0){j=true;n=0;for(r=h.length;n<r;n++)this.applySymbolizer(h[n],b,a)}if(c.length>0&&j==false)b.display="none";if(b.label&&
typeof b.label!=="string")b.label=String(b.label);return b},applySymbolizer:function(a,b,c){var e=c.geometry?this.getSymbolizerPrefix(c.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0];a=a.symbolizer[e]||a.symbolizer;if(this.defaultsPerSymbolizer===true){e=this.defaultStyle;OpenLayers.Util.applyDefaults(a,{pointRadius:e.pointRadius});if(a.stroke===true||a.graphic===true)OpenLayers.Util.applyDefaults(a,{strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeDashstyle:e.strokeDashstyle,
strokeLinecap:e.strokeLinecap});if(a.fill===true||a.graphic===true)OpenLayers.Util.applyDefaults(a,{fillColor:e.fillColor,fillOpacity:e.fillOpacity});a.graphic===true&&OpenLayers.Util.applyDefaults(a,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,
graphicYOffset:this.defaultStyle.graphicYOffset})}return this.createLiterals(OpenLayers.Util.extend(b,a),c)},createLiterals:function(a,b){var c=OpenLayers.Util.extend({},b.attributes||b.data);OpenLayers.Util.extend(c,this.context);for(var e in this.propertyStyles)a[e]=OpenLayers.Style.createLiteral(a[e],c,b,e);return a},findPropertyStyles:function(){var a={};this.addPropertyStyles(a,this.defaultStyle);for(var b=this.rules,c,e,h=0,j=b.length;h<j;h++){c=b[h].symbolizer;for(var n in c){e=c[n];if(typeof e==
"object")this.addPropertyStyles(a,e);else{this.addPropertyStyles(a,c);break}}}return a},addPropertyStyles:function(a,b){var c;for(var e in b){c=b[e];if(typeof c=="string"&&c.match(/\$\{\w+\}/))a[e]=true}return a},addRules:function(a){Array.prototype.push.apply(this.rules,a);this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(a){this.defaultStyle=a;this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(a){for(var b=OpenLayers.Style.SYMBOLIZER_PREFIXES,c=0,e=
b.length;c<e;c++)if(a.CLASS_NAME.indexOf(b[c])!=-1)return b[c]},clone:function(){var a=OpenLayers.Util.extend({},this);if(this.rules){a.rules=[];for(var b=0,c=this.rules.length;b<c;++b)a.rules.push(this.rules[b].clone())}a.context=this.context&&OpenLayers.Util.extend({},this.context);b=OpenLayers.Util.extend({},this.defaultStyle);return new OpenLayers.Style(b,a)},CLASS_NAME:"OpenLayers.Style"});
OpenLayers.Style.createLiteral=function(a,b,c,e){if(typeof a=="string"&&a.indexOf("${")!=-1){a=OpenLayers.String.format(a,b,[c,e]);a=isNaN(a)||!a?a:parseFloat(a)}return a};OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"];
OpenLayers.Tween=OpenLayers.Class({INTERVAL:10,easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,interval:null,playing:false,initialize:function(a){this.easing=a?a:OpenLayers.Easing.Expo.easeOut},start:function(a,b,c,e){this.playing=true;this.begin=a;this.finish=b;this.duration=c;this.callbacks=e.callbacks;this.time=0;if(this.interval){window.clearInterval(this.interval);this.interval=null}this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin);this.interval=
window.setInterval(OpenLayers.Function.bind(this.play,this),this.INTERVAL)},stop:function(){if(this.playing){this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish);window.clearInterval(this.interval);this.interval=null;this.playing=false}},play:function(){var a={};for(var b in this.begin){var c=this.begin[b],e=this.finish[b];if(c==null||e==null||isNaN(c)||isNaN(e))OpenLayers.Console.error("invalid value for Tween");a[b]=this.easing.apply(this,[this.time,c,e-c,this.duration])}this.time++;
this.callbacks&&this.callbacks.eachStep&&this.callbacks.eachStep.call(this,a);this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"});OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"};OpenLayers.Easing.Linear={easeIn:function(a,b,c,e){return c*a/e+b},easeOut:function(a,b,c,e){return c*a/e+b},easeInOut:function(a,b,c,e){return c*a/e+b},CLASS_NAME:"OpenLayers.Easing.Linear"};
OpenLayers.Easing.Expo={easeIn:function(a,b,c,e){return a==0?b:c*Math.pow(2,10*(a/e-1))+b},easeOut:function(a,b,c,e){return a==e?b+c:c*(-Math.pow(2,-10*a/e)+1)+b},easeInOut:function(a,b,c,e){if(a==0)return b;if(a==e)return b+c;if((a/=e/2)<1)return c/2*Math.pow(2,10*(a-1))+b;return c/2*(-Math.pow(2,-10*--a)+2)+b},CLASS_NAME:"OpenLayers.Easing.Expo"};
OpenLayers.Easing.Quad={easeIn:function(a,b,c,e){return c*(a/=e)*a+b},easeOut:function(a,b,c,e){return-c*(a/=e)*(a-2)+b},easeInOut:function(a,b,c,e){if((a/=e/2)<1)return c/2*a*a+b;return-c/2*(--a*(a-2)-1)+b},CLASS_NAME:"OpenLayers.Easing.Quad"};
OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:false,initialize:function(a){OpenLayers.Util.extend(this,a);this.options=a},destroy:function(){},read:function(){OpenLayers.Console.userError(OpenLayers.i18n("readNotImplemented"))},write:function(){OpenLayers.Console.userError(OpenLayers.i18n("writeNotImplemented"))},CLASS_NAME:"OpenLayers.Format"});
OpenLayers.Format.WKT=OpenLayers.Class(OpenLayers.Format,{initialize:function(a){this.regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};OpenLayers.Format.prototype.initialize.apply(this,[a])},read:function(a){var b,c;a=a.replace(/[\n\r]/g," ");if(c=this.regExes.typeStr.exec(a)){a=c[1].toLowerCase();c=c[2];if(this.parse[a])b=this.parse[a].apply(this,[c]);if(this.internalProjection&&this.externalProjection)if(b&&
b.CLASS_NAME=="OpenLayers.Feature.Vector")b.geometry.transform(this.externalProjection,this.internalProjection);else if(b&&a!="geometrycollection"&&typeof b=="object"){a=0;for(c=b.length;a<c;a++)b[a].geometry.transform(this.externalProjection,this.internalProjection)}}return b},write:function(a){var b,c;if(a.constructor==Array){a=a;c=true}else{a=[a];c=false}var e=[];c&&e.push("GEOMETRYCOLLECTION(");for(var h=0,j=a.length;h<j;++h){c&&h>0&&e.push(",");b=a[h].geometry;e.push(this.extractGeometry(b))}c&&
e.push(")");return e.join("")},extractGeometry:function(a){var b=a.CLASS_NAME.split(".")[2].toLowerCase();if(!this.extract[b])return null;if(this.internalProjection&&this.externalProjection){a=a.clone();a.transform(this.internalProjection,this.externalProjection)}return(b=="collection"?"GEOMETRYCOLLECTION":b.toUpperCase())+"("+this.extract[b].apply(this,[a])+")"},extract:{point:function(a){return a.x+" "+a.y},multipoint:function(a){for(var b=[],c=0,e=a.components.length;c<e;++c)b.push("("+this.extract.point.apply(this,
[a.components[c]])+")");return b.join(",")},linestring:function(a){for(var b=[],c=0,e=a.components.length;c<e;++c)b.push(this.extract.point.apply(this,[a.components[c]]));return b.join(",")},multilinestring:function(a){for(var b=[],c=0,e=a.components.length;c<e;++c)b.push("("+this.extract.linestring.apply(this,[a.components[c]])+")");return b.join(",")},polygon:function(a){for(var b=[],c=0,e=a.components.length;c<e;++c)b.push("("+this.extract.linestring.apply(this,[a.components[c]])+")");return b.join(",")},
multipolygon:function(a){for(var b=[],c=0,e=a.components.length;c<e;++c)b.push("("+this.extract.polygon.apply(this,[a.components[c]])+")");return b.join(",")},collection:function(a){for(var b=[],c=0,e=a.components.length;c<e;++c)b.push(this.extractGeometry.apply(this,[a.components[c]]));return b.join(",")}},parse:{point:function(a){a=OpenLayers.String.trim(a).split(this.regExes.spaces);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(a[0],a[1]))},multipoint:function(a){for(var b=
OpenLayers.String.trim(a).split(","),c=[],e=0,h=b.length;e<h;++e){a=b[e].replace(this.regExes.trimParens,"$1");c.push(this.parse.point.apply(this,[a]).geometry)}return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPoint(c))},linestring:function(a){a=OpenLayers.String.trim(a).split(",");for(var b=[],c=0,e=a.length;c<e;++c)b.push(this.parse.point.apply(this,[a[c]]).geometry);return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString(b))},multilinestring:function(a){for(var b=
OpenLayers.String.trim(a).split(this.regExes.parenComma),c=[],e=0,h=b.length;e<h;++e){a=b[e].replace(this.regExes.trimParens,"$1");c.push(this.parse.linestring.apply(this,[a]).geometry)}return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiLineString(c))},polygon:function(a){var b;a=OpenLayers.String.trim(a).split(this.regExes.parenComma);for(var c=[],e=0,h=a.length;e<h;++e){b=a[e].replace(this.regExes.trimParens,"$1");b=this.parse.linestring.apply(this,[b]).geometry;b=new OpenLayers.Geometry.LinearRing(b.components);
c.push(b)}return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon(c))},multipolygon:function(a){for(var b=OpenLayers.String.trim(a).split(this.regExes.doubleParenComma),c=[],e=0,h=b.length;e<h;++e){a=b[e].replace(this.regExes.trimParens,"$1");c.push(this.parse.polygon.apply(this,[a]).geometry)}return new OpenLayers.Feature.Vector(new OpenLayers.Geometry.MultiPolygon(c))},geometrycollection:function(a){a=a.replace(/,\s*([A-Za-z])/g,"|$1");a=OpenLayers.String.trim(a).split("|");for(var b=
[],c=0,e=a.length;c<e;++c)b.push(OpenLayers.Format.WKT.prototype.read.apply(this,[a[c]]));return b}},CLASS_NAME:"OpenLayers.Format.WKT"});
OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.bounds=this.id=null},clone:function(){return new OpenLayers.Geometry},setBounds:function(a){if(a)this.bounds=a.clone()},clearBounds:function(){this.bounds=null;this.parent&&this.parent.clearBounds()},extendBounds:function(a){this.getBounds()?this.bounds.extend(a):this.setBounds(a)},getBounds:function(){this.bounds==null&&this.calculateBounds();
return this.bounds},calculateBounds:function(){},distanceTo:function(){},getVertices:function(){},atPoint:function(a,b,c){var e=false;if(this.getBounds()!=null&&a!=null){b=b!=null?b:0;c=c!=null?c:0;e=(new OpenLayers.Bounds(this.bounds.left-b,this.bounds.bottom-c,this.bounds.right+b,this.bounds.top+c)).containsLonLat(a)}return e},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){return OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this))},
CLASS_NAME:"OpenLayers.Geometry"});OpenLayers.Geometry.fromWKT=function(a){var b=arguments.callee.format;if(!b){b=new OpenLayers.Format.WKT;arguments.callee.format=b}var c;b=b.read(a);if(b instanceof OpenLayers.Feature.Vector)c=b.geometry;else if(OpenLayers.Util.isArray(b)){c=b.length;for(var e=Array(c),h=0;h<c;++h)e[h]=b[h].geometry;c=new OpenLayers.Geometry.Collection(e)}return c};
OpenLayers.Geometry.segmentsIntersect=function(a,b,c){var e=c&&c.point;c=c&&c.tolerance;var h=false,j=a.x1-b.x1,n=a.y1-b.y1,r=a.x2-a.x1,u=a.y2-a.y1,x=b.y2-b.y1,C=b.x2-b.x1,J=x*r-C*u;x=C*n-x*j;n=r*n-u*j;if(J==0){if(x==0&&n==0)h=true}else{j=x/J;J=n/J;if(j>=0&&j<=1&&J>=0&&J<=1)if(e){r=a.x1+j*r;J=a.y1+j*u;h=new OpenLayers.Geometry.Point(r,J)}else h=true}if(c)if(h){if(e){a=[a,b];b=0;a:for(;b<2;++b){j=a[b];for(u=1;u<3;++u){r=j["x"+u];J=j["y"+u];e=Math.sqrt(Math.pow(r-h.x,2)+Math.pow(J-h.y,2));if(e<c){h.x=
r;h.y=J;break a}}}}}else{a=[a,b];b=0;a:for(;b<2;++b){r=a[b];J=a[(b+1)%2];for(u=1;u<3;++u){j={x:r["x"+u],y:r["y"+u]};n=OpenLayers.Geometry.distanceToSegment(j,J);if(n.distance<c){h=e?new OpenLayers.Geometry.Point(j.x,j.y):true;break a}}}}return h};
OpenLayers.Geometry.distanceToSegment=function(a,b){var c=a.x,e=a.y,h=b.x1,j=b.y1,n=b.x2,r=b.y2,u=n-h,x=r-j,C=(u*(c-h)+x*(e-j))/(Math.pow(u,2)+Math.pow(x,2));if(C<=0){h=h;j=j}else if(C>=1){h=n;j=r}else{h=h+C*u;j=j+C*x}return{distance:Math.sqrt(Math.pow(h-c,2)+Math.pow(j-e,2)),x:h,y:j}};
OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(a){OpenLayers.Geometry.prototype.initialize.apply(this,arguments);this.components=[];a!=null&&this.addComponents(a)},destroy:function(){this.components.length=0;this.components=null;OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function(){for(var a=eval("new "+this.CLASS_NAME+"()"),b=0,c=this.components.length;b<c;b++)a.addComponent(this.components[b].clone());
OpenLayers.Util.applyDefaults(a,this);return a},getComponentsString:function(){for(var a=[],b=0,c=this.components.length;b<c;b++)a.push(this.components[b].toShortString());return a.join(",")},calculateBounds:function(){this.bounds=null;var a=new OpenLayers.Bounds,b=this.components;if(b)for(var c=0,e=b.length;c<e;c++)a.extend(b[c].getBounds());a.left!=null&&a.bottom!=null&&a.right!=null&&a.top!=null&&this.setBounds(a)},addComponents:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=0,c=a.length;b<
c;b++)this.addComponent(a[b])},addComponent:function(a,b){var c=false;if(a)if(this.componentTypes==null||OpenLayers.Util.indexOf(this.componentTypes,a.CLASS_NAME)>-1){if(b!=null&&b<this.components.length){c=this.components.slice(0,b);var e=this.components.slice(b,this.components.length);c.push(a);this.components=c.concat(e)}else this.components.push(a);a.parent=this;this.clearBounds();c=true}return c},removeComponents:function(a){var b=false;OpenLayers.Util.isArray(a)||(a=[a]);for(var c=a.length-
1;c>=0;--c)b=this.removeComponent(a[c])||b;return b},removeComponent:function(a){OpenLayers.Util.removeItem(this.components,a);this.clearBounds();return true},getLength:function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b].getLength();return a},getArea:function(){for(var a=0,b=0,c=this.components.length;b<c;b++)a+=this.components[b].getArea();return a},getGeodesicArea:function(a){for(var b=0,c=0,e=this.components.length;c<e;c++)b+=this.components[c].getGeodesicArea(a);
return b},getCentroid:function(a){if(!a)return this.components.length&&this.components[0].getCentroid();a=this.components.length;if(!a)return false;for(var b=[],c=[],e=0,h=Number.MAX_VALUE,j,n=0;n<a;++n){j=this.components[n];var r=j.getArea();j=j.getCentroid(true);if(!(isNaN(r)||isNaN(j.x)||isNaN(j.y))){b.push(r);e+=r;h=r<h&&r>0?r:h;c.push(j)}}a=b.length;if(e===0){for(n=0;n<a;++n)b[n]=1;e=b.length}else{for(n=0;n<a;++n)b[n]/=h;e/=h}var u=h=0;for(n=0;n<a;++n){j=c[n];r=b[n];h+=j.x*r;u+=j.y*r}return new OpenLayers.Geometry.Point(h/
e,u/e)},getGeodesicLength:function(a){for(var b=0,c=0,e=this.components.length;c<e;c++)b+=this.components[c].getGeodesicLength(a);return b},move:function(a,b){for(var c=0,e=this.components.length;c<e;c++)this.components[c].move(a,b)},rotate:function(a,b){for(var c=0,e=this.components.length;c<e;++c)this.components[c].rotate(a,b)},resize:function(a,b,c){for(var e=0;e<this.components.length;++e)this.components[e].resize(a,b,c);return this},distanceTo:function(a,b){for(var c=!(b&&b.edge===false)&&b&&
b.details,e,h,j,n=Number.POSITIVE_INFINITY,r=0,u=this.components.length;r<u;++r){e=this.components[r].distanceTo(a,b);j=c?e.distance:e;if(j<n){n=j;h=e;if(n==0)break}}return h},equals:function(a){var b=true;if(!a||!a.CLASS_NAME||this.CLASS_NAME!=a.CLASS_NAME)b=false;else if(!OpenLayers.Util.isArray(a.components)||a.components.length!=this.components.length)b=false;else for(var c=0,e=this.components.length;c<e;++c)if(!this.components[c].equals(a.components[c])){b=false;break}return b},transform:function(a,
b){if(a&&b){for(var c=0,e=this.components.length;c<e;c++)this.components[c].transform(a,b);this.bounds=null}return this},intersects:function(a){for(var b=false,c=0,e=this.components.length;c<e;++c)if(b=a.intersects(this.components[c]))break;return b},getVertices:function(a){for(var b=[],c=0,e=this.components.length;c<e;++c)Array.prototype.push.apply(b,this.components[c].getVertices(a));return b},CLASS_NAME:"OpenLayers.Geometry.Collection"});
OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(a,b){OpenLayers.Geometry.prototype.initialize.apply(this,arguments);this.x=parseFloat(a);this.y=parseFloat(b)},clone:function(a){if(a==null)a=new OpenLayers.Geometry.Point(this.x,this.y);OpenLayers.Util.applyDefaults(a,this);return a},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(a,b){var c=!(b&&b.edge===false)&&b&&b.details,e,h,j,n,r;if(a instanceof
OpenLayers.Geometry.Point){h=this.x;j=this.y;n=a.x;r=a.y;e=Math.sqrt(Math.pow(h-n,2)+Math.pow(j-r,2));e=!c?e:{x0:h,y0:j,x1:n,y1:r,distance:e}}else{e=a.distanceTo(this,b);if(c)e={x0:e.x1,y0:e.y1,x1:e.x0,y1:e.y0,distance:e.distance}}return e},equals:function(a){var b=false;if(a!=null)b=this.x==a.x&&this.y==a.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y);return b},toShortString:function(){return this.x+", "+this.y},move:function(a,b){this.x+=a;this.y+=b;this.clearBounds()},rotate:function(a,
b){a*=Math.PI/180;var c=this.distanceTo(b),e=a+Math.atan2(this.y-b.y,this.x-b.x);this.x=b.x+c*Math.cos(e);this.y=b.y+c*Math.sin(e);this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(a,b,c){c=c==undefined?1:c;this.x=b.x+a*c*(this.x-b.x);this.y=b.y+a*(this.y-b.y);this.clearBounds();return this},intersects:function(a){var b=false;return b=a.CLASS_NAME=="OpenLayers.Geometry.Point"?this.equals(a):a.intersects(this)},transform:function(a,b){if(a&&
b){OpenLayers.Projection.transform(this,a,b);this.bounds=null}return this},getVertices:function(){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"});OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],initialize:function(){OpenLayers.Geometry.Collection.prototype.initialize.apply(this,arguments)},addPoint:function(a,b){this.addComponent(a,b)},removePoint:function(a){this.removeComponent(a)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"});
OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],initialize:function(){OpenLayers.Geometry.MultiPoint.prototype.initialize.apply(this,arguments)},getLength:function(){var a=0;if(this.components&&this.components.length>1)for(var b=1,c=this.components.length;b<c;b++)a+=this.components[b-1].distanceTo(this.components[b]);return a},getGeodesicLength:function(a){var b=this;if(a){var c=new OpenLayers.Projection("EPSG:4326");c.equals(a)||
(b=this.clone().transform(a,c))}a=0;if(b.components&&b.components.length>1)for(var e,h=1,j=b.components.length;h<j;h++){c=b.components[h-1];e=b.components[h];a+=OpenLayers.Util.distVincenty({lon:c.x,lat:c.y},{lon:e.x,lat:e.y})}return a*1E3},CLASS_NAME:"OpenLayers.Geometry.Curve"});
OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{initialize:function(){OpenLayers.Geometry.Curve.prototype.initialize.apply(this,arguments)},removeComponent:function(){var a=this.components&&this.components.length>2;a&&OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments);return a},intersects:function(a){var b=false,c=a.CLASS_NAME;if(c=="OpenLayers.Geometry.LineString"||c=="OpenLayers.Geometry.LinearRing"||c=="OpenLayers.Geometry.Point"){var e=this.getSortedSegments();
a=c=="OpenLayers.Geometry.Point"?[{x1:a.x,y1:a.y,x2:a.x,y2:a.y}]:a.getSortedSegments();var h,j,n,r,u,x,C,J=0,M=e.length;a:for(;J<M;++J){c=e[J];h=c.x1;j=c.x2;n=c.y1;r=c.y2;var I=0,N=a.length;for(;I<N;++I){u=a[I];if(u.x1>j)break;if(!(u.x2<h)){x=u.y1;C=u.y2;if(!(Math.min(x,C)>Math.max(n,r)))if(!(Math.max(x,C)<Math.min(n,r)))if(OpenLayers.Geometry.segmentsIntersect(c,u)){b=true;break a}}}}}else b=a.intersects(this);return b},getSortedSegments:function(){for(var a=this.components.length-1,b=Array(a),c,
e,h=0;h<a;++h){c=this.components[h];e=this.components[h+1];b[h]=c.x<e.x?{x1:c.x,y1:c.y,x2:e.x,y2:e.y}:{x1:e.x,y1:e.y,x2:c.x,y2:c.y}}return b.sort(function(j,n){return j.x1-n.x1})},splitWithSegment:function(a,b){for(var c=!(b&&b.edge===false),e=b&&b.tolerance,h=[],j=this.getVertices(),n=[],r=[],u=false,x,C,J,M={point:true,tolerance:e},I=null,N=0,S=j.length-2;N<=S;++N){e=j[N];n.push(e.clone());x=j[N+1];C={x1:e.x,y1:e.y,x2:x.x,y2:x.y};C=OpenLayers.Geometry.segmentsIntersect(a,C,M);if(C instanceof OpenLayers.Geometry.Point)if((J=
C.x===a.x1&&C.y===a.y1||C.x===a.x2&&C.y===a.y2||C.equals(e)||C.equals(x)?true:false)||c){C.equals(r[r.length-1])||r.push(C.clone());if(N===0)if(C.equals(e))continue;if(!C.equals(x)){u=true;C.equals(e)||n.push(C);h.push(new OpenLayers.Geometry.LineString(n));n=[C.clone()]}}}if(u){n.push(x.clone());h.push(new OpenLayers.Geometry.LineString(n))}if(r.length>0){var V=a.x1<a.x2?1:-1,W=a.y1<a.y2?1:-1;I={lines:h,points:r.sort(function(X,ea){return V*X.x-V*ea.x||W*X.y-W*ea.y})}}return I},split:function(a,
b){var c=null,e=b&&b.mutual,h,j,n,r;if(a instanceof OpenLayers.Geometry.LineString){var u=this.getVertices(),x,C,J,M,I,N=[];n=[];for(var S=0,V=u.length-2;S<=V;++S){x=u[S];C=u[S+1];J={x1:x.x,y1:x.y,x2:C.x,y2:C.y};r=r||[a];e&&N.push(x.clone());for(var W=0;W<r.length;++W)if(M=r[W].splitWithSegment(J,b)){I=M.lines;if(I.length>0){I.unshift(W,1);Array.prototype.splice.apply(r,I);W+=I.length-2}if(e)for(var X=0,ea=M.points.length;X<ea;++X){I=M.points[X];if(!I.equals(x)){N.push(I);n.push(new OpenLayers.Geometry.LineString(N));
N=I.equals(C)?[]:[I.clone()]}}}}if(e&&n.length>0&&N.length>0){N.push(C.clone());n.push(new OpenLayers.Geometry.LineString(N))}}else c=a.splitWith(this,b);if(r&&r.length>1)j=true;else r=[];if(n&&n.length>1)h=true;else n=[];if(j||h)c=e?[n,r]:r;return c},splitWith:function(a,b){return a.split(this,b)},getVertices:function(a){return a===true?[this.components[0],this.components[this.components.length-1]]:a===false?this.components.slice(1,this.components.length-1):this.components.slice()},distanceTo:function(a,
b){var c=!(b&&b.edge===false)&&b&&b.details,e,h={},j=Number.POSITIVE_INFINITY;if(a instanceof OpenLayers.Geometry.Point){for(var n=this.getSortedSegments(),r=a.x,u=a.y,x,C=0,J=n.length;C<J;++C){x=n[C];e=OpenLayers.Geometry.distanceToSegment(a,x);if(e.distance<j){j=e.distance;h=e;if(j===0)break}else if(x.x2>r&&(u>x.y1&&u<x.y2||u<x.y1&&u>x.y2))break}h=c?{distance:h.distance,x0:h.x,y0:h.y,x1:r,y1:u}:h.distance}else if(a instanceof OpenLayers.Geometry.LineString){n=this.getSortedSegments();r=a.getSortedSegments();
var M,I,N=r.length,S={point:true};C=0;J=n.length;a:for(;C<J;++C){u=n[C];x=u.x1;I=u.y1;for(var V=0;V<N;++V){e=r[V];if(M=OpenLayers.Geometry.segmentsIntersect(u,e,S)){j=0;h={distance:0,x0:M.x,y0:M.y,x1:M.x,y1:M.y};break a}else{e=OpenLayers.Geometry.distanceToSegment({x:x,y:I},e);if(e.distance<j){j=e.distance;h={distance:j,x0:x,y0:I,x1:e.x,y1:e.y}}}}}if(!c)h=h.distance;if(j!==0)if(u){e=a.distanceTo(new OpenLayers.Geometry.Point(u.x2,u.y2),b);C=c?e.distance:e;if(C<j)h=c?{distance:j,x0:e.x1,y0:e.y1,x1:e.x0,
y1:e.y0}:C}}else{h=a.distanceTo(this,b);if(c)h={distance:h.distance,x0:h.x1,y0:h.y1,x1:h.x0,y1:h.y0}}return h},simplify:function(a){if(this&&this!==null){var b=this.getVertices();if(b.length<3)return this;var c=function(j,n,r,u){for(var x=0,C=0,J=n,M;J<r;J++){M=j[n];var I=j[r],N=j[J];M=Math.abs(0.5*(M.x*I.y+I.x*N.y+N.x*M.y-I.x*M.y-N.x*I.y-M.x*N.y))/Math.sqrt(Math.pow(M.x-I.x,2)+Math.pow(M.y-I.y,2))*2;if(M>x){x=M;C=J}}if(x>u&&C!=n){h.push(C);c(j,n,C,u);c(j,C,r,u)}},e=b.length-1,h=[];h.push(0);for(h.push(e);b[0].equals(b[e]);){e--;
h.push(e)}c(b,0,e,a);a=[];h.sort(function(j,n){return j-n});for(e=0;e<h.length;e++)a.push(b[h[e]]);return new OpenLayers.Geometry.LineString(a)}else return this},CLASS_NAME:"OpenLayers.Geometry.LineString"});
OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],initialize:function(){OpenLayers.Geometry.LineString.prototype.initialize.apply(this,arguments)},addComponent:function(a,b){var c=false,e=this.components.pop();if(b!=null||!a.equals(e))c=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments);OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]]);return c},removeComponent:function(){var a=
this.components&&this.components.length>3;if(a){this.components.pop();OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments);OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[this.components[0]])}return a},move:function(a,b){for(var c=0,e=this.components.length;c<e-1;c++)this.components[c].move(a,b)},rotate:function(a,b){for(var c=0,e=this.components.length;c<e-1;++c)this.components[c].rotate(a,b)},resize:function(a,b,c){for(var e=0,h=this.components.length;e<
h-1;++e)this.components[e].resize(a,b,c);return this},transform:function(a,b){if(a&&b){for(var c=0,e=this.components.length;c<e-1;c++)this.components[c].transform(a,b);this.bounds=null}return this},getCentroid:function(){if(this.components&&this.components.length>2){for(var a=0,b=0,c=0;c<this.components.length-1;c++){var e=this.components[c],h=this.components[c+1];a+=(e.x+h.x)*(e.x*h.y-h.x*e.y);b+=(e.y+h.y)*(e.x*h.y-h.x*e.y)}c=-1*this.getArea();return new OpenLayers.Geometry.Point(a/(6*c),b/(6*c))}else return null},
getArea:function(){var a=0;if(this.components&&this.components.length>2){for(var b=a=0,c=this.components.length;b<c-1;b++){var e=this.components[b],h=this.components[b+1];a+=(e.x+h.x)*(h.y-e.y)}a=-a/2}return a},getGeodesicArea:function(a){var b=this;if(a){var c=new OpenLayers.Projection("EPSG:4326");c.equals(a)||(b=this.clone().transform(a,c))}a=0;c=b.components&&b.components.length;if(c>2){for(var e,h,j=0;j<c-1;j++){e=b.components[j];h=b.components[j+1];a+=OpenLayers.Util.rad(h.x-e.x)*(2+Math.sin(OpenLayers.Util.rad(e.y))+
Math.sin(OpenLayers.Util.rad(h.y)))}a=a*6378137*6378137/2}return a},containsPoint:function(a){var b=OpenLayers.Number.limitSigDigs,c=b(a.x,14);a=b(a.y,14);for(var e=this.components.length-1,h,j,n,r,u,x=0,C=0;C<e;++C){h=this.components[C];n=b(h.x,14);h=b(h.y,14);j=this.components[C+1];r=b(j.x,14);j=b(j.y,14);if(h==j){if(a==h)if(n<=r&&c>=n&&c<=r||n>=r&&c<=n&&c>=r){x=-1;break}}else{u=b(((n-r)*a+(r*h-n*j))/(h-j),14);if(u==c)if(h<j&&a>=h&&a<=j||h>j&&a<=h&&a>=j){x=-1;break}if(!(u<=c))if(!(n!=r&&(u<Math.min(n,
r)||u>Math.max(n,r))))if(h<j&&a>=h&&a<j||h>j&&a<h&&a>=j)++x}}return x==-1?1:!!(x&1)},intersects:function(a){var b=false;if(a.CLASS_NAME=="OpenLayers.Geometry.Point")b=this.containsPoint(a);else if(a.CLASS_NAME=="OpenLayers.Geometry.LineString")b=a.intersects(this);else if(a.CLASS_NAME=="OpenLayers.Geometry.LinearRing")b=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[a]);else for(var c=0,e=a.components.length;c<e;++c)if(b=a.components[c].intersects(this))break;return b},getVertices:function(a){return a===
true?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"});
OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],initialize:function(){OpenLayers.Geometry.Collection.prototype.initialize.apply(this,arguments)},getArea:function(){var a=0;if(this.components&&this.components.length>0){a+=Math.abs(this.components[0].getArea());for(var b=1,c=this.components.length;b<c;b++)a-=Math.abs(this.components[b].getArea())}return a},getGeodesicArea:function(a){var b=0;if(this.components&&this.components.length>
0){b+=Math.abs(this.components[0].getGeodesicArea(a));for(var c=1,e=this.components.length;c<e;c++)b-=Math.abs(this.components[c].getGeodesicArea(a))}return b},containsPoint:function(a){var b=this.components.length,c=false;if(b>0){c=this.components[0].containsPoint(a);if(c!==1)if(c&&b>1)for(var e,h=1;h<b;++h)if(e=this.components[h].containsPoint(a)){c=e===1?1:false;break}}return c},intersects:function(a){var b=false,c,e;if(a.CLASS_NAME=="OpenLayers.Geometry.Point")b=this.containsPoint(a);else if(a.CLASS_NAME==
"OpenLayers.Geometry.LineString"||a.CLASS_NAME=="OpenLayers.Geometry.LinearRing"){c=0;for(e=this.components.length;c<e;++c)if(b=a.intersects(this.components[c]))break;if(!b){c=0;for(e=a.components.length;c<e;++c)if(b=this.containsPoint(a.components[c]))break}}else{c=0;for(e=a.components.length;c<e;++c)if(b=this.intersects(a.components[c]))break}if(!b&&a.CLASS_NAME=="OpenLayers.Geometry.Polygon"){var h=this.components[0];c=0;for(e=h.components.length;c<e;++c)if(b=a.containsPoint(h.components[c]))break}return b},
distanceTo:function(a,b){return b&&b.edge===false&&this.intersects(a)?0:OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,[a,b])},CLASS_NAME:"OpenLayers.Geometry.Polygon"});OpenLayers.Geometry.Polygon.createRegularPolygon=function(a,b,c,e){var h=Math.PI*(1/c-0.5);if(e)h+=e/180*Math.PI;for(var j,n=[],r=0;r<c;++r){j=h+r*2*Math.PI/c;e=a.x+b*Math.cos(j);j=a.y+b*Math.sin(j);n.push(new OpenLayers.Geometry.Point(e,j))}a=new OpenLayers.Geometry.LinearRing(n);return new OpenLayers.Geometry.Polygon([a])};
OpenLayers.Event={observers:false,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(a){return a.target||a.srcElement},isSingleTouch:function(a){return a.touches&&a.touches.length==1},isMultiTouch:function(a){return a.touches&&a.touches.length>1},isLeftClick:function(a){return a.which&&a.which==1||a.button&&a.button==1},isRightClick:function(a){return a.which&&a.which==3||a.button&&a.button==2},stop:function(a,b){if(!b)if(a.preventDefault)a.preventDefault();
else a.returnValue=false;if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true},findElement:function(a,b){for(var c=OpenLayers.Event.element(a);c.parentNode&&(!c.tagName||c.tagName.toUpperCase()!=b.toUpperCase());)c=c.parentNode;return c},observe:function(a,b,c,e){a=OpenLayers.Util.getElement(a);e=e||false;if(b=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.attachEvent))b="keydown";if(!this.observers)this.observers={};if(!a._eventCacheID){var h="eventCacheID_";if(a.id)h=
a.id+"_"+h;a._eventCacheID=OpenLayers.Util.createUniqueID(h)}h=a._eventCacheID;this.observers[h]||(this.observers[h]=[]);this.observers[h].push({element:a,name:b,observer:c,useCapture:e});if(a.addEventListener)a.addEventListener(b,c,e);else a.attachEvent&&a.attachEvent("on"+b,c)},stopObservingElement:function(a){a=OpenLayers.Util.getElement(a)._eventCacheID;this._removeElementObservers(OpenLayers.Event.observers[a])},_removeElementObservers:function(a){if(a)for(var b=a.length-1;b>=0;b--){var c=a[b];
c=Array(c.element,c.name,c.observer,c.useCapture);OpenLayers.Event.stopObserving.apply(this,c)}},stopObserving:function(a,b,c,e){e=e||false;a=OpenLayers.Util.getElement(a);var h=a._eventCacheID;if(b=="keypress")if(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.detachEvent)b="keydown";var j=false,n=OpenLayers.Event.observers[h];if(n)for(var r=0;!j&&r<n.length;){var u=n[r];if(u.name==b&&u.observer==c&&u.useCapture==e){n.splice(r,1);n.length==0&&delete OpenLayers.Event.observers[h];j=true;break}r++}if(j)if(a.removeEventListener)a.removeEventListener(b,
c,e);else a&&a.detachEvent&&a.detachEvent("on"+b,c);return j},unloadCache:function(){if(OpenLayers.Event&&OpenLayers.Event.observers){for(var a in OpenLayers.Event.observers)OpenLayers.Event._removeElementObservers.apply(this,[OpenLayers.Event.observers[a]]);OpenLayers.Event.observers=false}},CLASS_NAME:"OpenLayers.Event"};OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,false);if(window.Event)OpenLayers.Util.applyDefaults(window.Event,OpenLayers.Event);else var Event=OpenLayers.Event;
OpenLayers.Events=OpenLayers.Class({BROWSER_EVENTS:["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend"],listeners:null,object:null,element:null,eventTypes:null,eventHandler:null,fallThrough:null,includeXY:false,clearMouseListener:null,initialize:function(a,b,c,e,h){OpenLayers.Util.extend(this,h);this.object=a;this.fallThrough=e;this.listeners={};this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,
this);this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this);this.eventTypes=[];if(c!=null){a=0;for(e=c.length;a<e;a++)this.addEventType(c[a])}b!=null&&this.attachToElement(b)},destroy:function(){if(this.element){OpenLayers.Event.stopObservingElement(this.element);this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener)}this.eventHandler=this.fallThrough=this.eventTypes=this.object=this.listeners=this.element=null},addEventType:function(a){if(!this.listeners[a]){this.eventTypes.push(a);
this.listeners[a]=[]}},attachToElement:function(a){this.element&&OpenLayers.Event.stopObservingElement(this.element);this.element=a;for(var b=0,c=this.BROWSER_EVENTS.length;b<c;b++){var e=this.BROWSER_EVENTS[b];this.addEventType(e);OpenLayers.Event.observe(a,e,this.eventHandler)}OpenLayers.Event.observe(a,"dragstart",OpenLayers.Event.stop)},on:function(a){for(var b in a)b!="scope"&&this.register(b,a.scope,a[b])},register:function(a,b,c){if(c!=null&&OpenLayers.Util.indexOf(this.eventTypes,a)!=-1){if(b==
null)b=this.object;this.listeners[a].push({obj:b,func:c})}},registerPriority:function(a,b,c){if(c!=null){if(b==null)b=this.object;a=this.listeners[a];a!=null&&a.unshift({obj:b,func:c})}},un:function(a){for(var b in a)b!="scope"&&this.unregister(b,a.scope,a[b])},unregister:function(a,b,c){if(b==null)b=this.object;a=this.listeners[a];if(a!=null)for(var e=0,h=a.length;e<h;e++)if(a[e].obj==b&&a[e].func==c){a.splice(e,1);break}},remove:function(a){if(this.listeners[a]!=null)this.listeners[a]=[]},triggerEvent:function(a,
b){var c=this.listeners[a];if(!(!c||c.length==0)){if(b==null)b={};b.object=this.object;b.element=this.element;if(!b.type)b.type=a;c=c.slice();for(var e,h=0,j=c.length;h<j;h++){e=c[h];e=e.func.apply(e.obj,[b]);if(e!=undefined&&e==false)break}this.fallThrough||OpenLayers.Event.stop(b,true);return e}},handleBrowserEvent:function(a){var b=a.type,c=this.listeners[b];if(!(!c||c.length==0)){if((c=a.touches)&&c[0]){for(var e=0,h=0,j=c.length,n,r=0;r<j;++r){n=c[r];e+=n.clientX;h+=n.clientY}a.clientX=e/j;a.clientY=
h/j}if(this.includeXY)a.xy=this.getMousePosition(a);this.triggerEvent(b,a)}},clearMouseCache:function(){this.element.scrolls=null;this.element.lefttop=null;var a=document.body;if(a&&!((a.scrollTop!=0||a.scrollLeft!=0)&&navigator.userAgent.match(/iPhone/i)))this.element.offsets=null},getMousePosition:function(a){if(this.includeXY){if(!this.element.hasScrollEvent){OpenLayers.Event.observe(window,"scroll",this.clearMouseListener);this.element.hasScrollEvent=true}}else this.clearMouseCache();if(!this.element.scrolls){var b=
OpenLayers.Util.getViewportElement();this.element.scrolls=[b.scrollLeft,b.scrollTop]}if(!this.element.lefttop)this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0];if(!this.element.offsets)this.element.offsets=OpenLayers.Util.pagePosition(this.element);return new OpenLayers.Pixel(a.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],a.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},CLASS_NAME:"OpenLayers.Events"});
OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1E3},EVENT_TYPES:["preaddlayer","addlayer","preremovelayer","removelayer","changelayer","movestart","move","moveend","zoomend","popupopen","popupclose","addmarker","removemarker","clearmarkers","mouseover","mouseout","mousemove","dragstart","drag","dragend","changebaselayer"],id:null,fractionalZoom:false,events:null,allOverlays:false,div:null,dragging:false,size:null,viewPortDiv:null,layerContainerOrigin:null,
layerContainerDiv:null,layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,viewRequestID:0,tileSize:null,projection:"EPSG:4326",units:"degrees",resolutions:null,maxResolution:1.40625,minResolution:null,maxScale:null,minScale:null,maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:true,panTween:null,eventListeners:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,paddingForPopups:null,
minPx:null,maxPx:null,initialize:function(a,b){if(arguments.length===1&&typeof a==="object")a=(b=a)&&b.div;this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT);this.maxExtent=new OpenLayers.Bounds(-180,-90,180,90);this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15);this.theme=OpenLayers._getScriptLocation()+"theme/default/style.css";OpenLayers.Util.extend(this,b);this.layers=[];this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_");this.div=OpenLayers.Util.getElement(a);
if(!this.div){this.div=document.createElement("div");this.div.style.height="1px";this.div.style.width="1px"}OpenLayers.Element.addClass(this.div,"olMap");var c=this.id+"_OpenLayers_ViewPort";this.viewPortDiv=OpenLayers.Util.createDiv(c,null,null,null,"relative",null,"hidden");this.viewPortDiv.style.width="100%";this.viewPortDiv.style.height="100%";this.viewPortDiv.className="olMapViewport";this.div.appendChild(this.viewPortDiv);c=document.createElement("div");c.id=this.id+"_events";c.style.position=
"absolute";c.style.width="100%";c.style.height="100%";c.style.zIndex=this.Z_INDEX_BASE.Control-1;this.viewPortDiv.appendChild(c);this.eventsDiv=c;this.events=new OpenLayers.Events(this,this.eventsDiv,this.EVENT_TYPES,this.fallThrough,{includeXY:true});c=this.id+"_OpenLayers_Container";this.layerContainerDiv=OpenLayers.Util.createDiv(c);this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1;this.eventsDiv.appendChild(this.layerContainerDiv);this.updateSize();this.eventListeners instanceof Object&&
this.events.on(this.eventListeners);this.events.register("movestart",this,this.updateSize);if(OpenLayers.String.contains(navigator.appName,"Microsoft"))this.events.register("resize",this,this.updateSize);else{this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this);OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy)}if(this.theme){c=true;for(var e=document.getElementsByTagName("link"),h=0,j=e.length;h<j;++h)if(OpenLayers.Util.isEquivalentUrl(e.item(h).href,this.theme)){c=
false;break}if(c){c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",this.theme);document.getElementsByTagName("head")[0].appendChild(c)}}if(this.controls==null)this.controls=OpenLayers.Control!=null?[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanZoom,new OpenLayers.Control.ArgParser,new OpenLayers.Control.Attribution]:[];h=0;for(j=this.controls.length;h<j;h++)this.addControlToMap(this.controls[h]);this.popups=
[];this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this);OpenLayers.Event.observe(window,"unload",this.unloadDestroy);if(b&&b.layers){delete this.center;this.addLayers(b.layers);b.center&&this.setCenter(b.center,b.zoom)}},render:function(a){this.div=OpenLayers.Util.getElement(a);OpenLayers.Element.addClass(this.div,"olMap");this.viewPortDiv.parentNode.removeChild(this.viewPortDiv);this.div.appendChild(this.viewPortDiv);this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return false;
if(this.panTween){this.panTween.stop();this.panTween=null}OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy);this.unloadDestroy=null;this.updateSizeDestroy?OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy):this.events.unregister("resize",this,this.updateSize);this.paddingForPopups=null;if(this.controls!=null){for(var a=this.controls.length-1;a>=0;--a)this.controls[a].destroy();this.controls=null}if(this.layers!=null){for(a=this.layers.length-1;a>=0;--a)this.layers[a].destroy(false);
this.layers=null}this.viewPortDiv&&this.div.removeChild(this.viewPortDiv);this.viewPortDiv=null;if(this.eventListeners){this.events.un(this.eventListeners);this.eventListeners=null}this.events.destroy();this.events=null},setOptions:function(a){var b=this.minPx&&a.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,a);b&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:true})},getTileSize:function(){return this.tileSize},getBy:function(a,b,c){var e=typeof c.test=="function";
return OpenLayers.Array.filter(this[a],function(h){return h[b]==c||e&&c.test(h[b])})},getLayersBy:function(a,b){return this.getBy("layers",a,b)},getLayersByName:function(a){return this.getLayersBy("name",a)},getLayersByClass:function(a){return this.getLayersBy("CLASS_NAME",a)},getControlsBy:function(a,b){return this.getBy("controls",a,b)},getControlsByClass:function(a){return this.getControlsBy("CLASS_NAME",a)},getLayer:function(a){for(var b=null,c=0,e=this.layers.length;c<e;c++){var h=this.layers[c];
if(h.id==a){b=h;break}}return b},setLayerZIndex:function(a,b){a.setZIndex(this.Z_INDEX_BASE[a.isBaseLayer?"BaseLayer":"Overlay"]+b*5)},resetLayersZIndex:function(){for(var a=0,b=this.layers.length;a<b;a++)this.setLayerZIndex(this.layers[a],a)},addLayer:function(a){for(var b=0,c=this.layers.length;b<c;b++)if(this.layers[b]==a){a=OpenLayers.i18n("layerAlreadyAdded",{layerName:a.name});OpenLayers.Console.warn(a);return false}if(this.events.triggerEvent("preaddlayer",{layer:a})!==false){if(this.allOverlays)a.isBaseLayer=
false;a.div.className="olLayerDiv";a.div.style.overflow="";this.setLayerZIndex(a,this.layers.length);a.isFixed?this.viewPortDiv.appendChild(a.div):this.layerContainerDiv.appendChild(a.div);this.layers.push(a);a.setMap(this);if(a.isBaseLayer||this.allOverlays&&!this.baseLayer)this.baseLayer==null?this.setBaseLayer(a):a.setVisibility(false);else a.redraw();this.events.triggerEvent("addlayer",{layer:a});a.events.triggerEvent("added",{map:this,layer:a});a.afterAdd()}},addLayers:function(a){for(var b=
0,c=a.length;b<c;b++)this.addLayer(a[b])},removeLayer:function(a,b){if(this.events.triggerEvent("preremovelayer",{layer:a})!==false){if(b==null)b=true;a.isFixed?this.viewPortDiv.removeChild(a.div):this.layerContainerDiv.removeChild(a.div);OpenLayers.Util.removeItem(this.layers,a);a.removeMap(this);a.map=null;if(this.baseLayer==a){this.baseLayer=null;if(b)for(var c=0,e=this.layers.length;c<e;c++){var h=this.layers[c];if(h.isBaseLayer||this.allOverlays){this.setBaseLayer(h);break}}}this.resetLayersZIndex();
this.events.triggerEvent("removelayer",{layer:a});a.events.triggerEvent("removed",{map:this,layer:a})}},getNumLayers:function(){return this.layers.length},getLayerIndex:function(a){return OpenLayers.Util.indexOf(this.layers,a)},setLayerIndex:function(a,b){var c=this.getLayerIndex(a);if(b<0)b=0;else if(b>this.layers.length)b=this.layers.length;if(c!=b){this.layers.splice(c,1);this.layers.splice(b,0,a);c=0;for(var e=this.layers.length;c<e;c++)this.setLayerZIndex(this.layers[c],c);this.events.triggerEvent("changelayer",
{layer:a,property:"order"});if(this.allOverlays)if(b===0)this.setBaseLayer(a);else this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0])}},raiseLayer:function(a,b){var c=this.getLayerIndex(a)+b;this.setLayerIndex(a,c)},setBaseLayer:function(a){if(a!=this.baseLayer)if(OpenLayers.Util.indexOf(this.layers,a)!=-1){var b=this.getCachedCenter(),c=OpenLayers.Util.getResolutionFromScale(this.getScale(),a.units);this.baseLayer!=null&&!this.allOverlays&&this.baseLayer.setVisibility(false);this.baseLayer=
a;this.viewRequestID++;if(!this.allOverlays||this.baseLayer.visibility)this.baseLayer.setVisibility(true);if(b!=null){a=this.getZoomForResolution(c||this.resolution,true);this.setCenter(b,a,false,true)}this.events.triggerEvent("changebaselayer",{layer:this.baseLayer})}},addControl:function(a,b){this.controls.push(a);this.addControlToMap(a,b)},addControls:function(a,b){for(var c=arguments.length===1?[]:b,e=0,h=a.length;e<h;e++)this.addControl(a[e],c[e]?c[e]:null)},addControlToMap:function(a,b){a.outsideViewport=
a.div!=null;if(this.displayProjection&&!a.displayProjection)a.displayProjection=this.displayProjection;a.setMap(this);var c=a.draw(b);if(c)if(!a.outsideViewport){c.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length;this.viewPortDiv.appendChild(c)}a.autoActivate&&a.activate()},getControl:function(a){for(var b=null,c=0,e=this.controls.length;c<e;c++){var h=this.controls[c];if(h.id==a){b=h;break}}return b},removeControl:function(a){if(a&&a==this.getControl(a.id)){a.div&&a.div.parentNode==this.viewPortDiv&&
this.viewPortDiv.removeChild(a.div);OpenLayers.Util.removeItem(this.controls,a)}},addPopup:function(a,b){if(b)for(var c=this.popups.length-1;c>=0;--c)this.removePopup(this.popups[c]);a.map=this;this.popups.push(a);if(c=a.draw()){c.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length;this.layerContainerDiv.appendChild(c)}},removePopup:function(a){OpenLayers.Util.removeItem(this.popups,a);if(a.div)try{this.layerContainerDiv.removeChild(a.div)}catch(b){}a.map=null},getSize:function(){var a=null;if(this.size!=
null)a=this.size.clone();return a},updateSize:function(){var a=this.getCurrentSize();if(a&&!isNaN(a.h)&&!isNaN(a.w)){this.events.clearMouseCache();var b=this.getSize();if(b==null)this.size=b=a;if(!a.equals(b)){this.size=a;a=0;for(b=this.layers.length;a<b;a++)this.layers[a].onMapResize();a=this.getCachedCenter();if(this.baseLayer!=null&&a!=null){b=this.getZoom();this.zoom=null;this.setCenter(a,b)}}}},getCurrentSize:function(){var a=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);if(a.w==
0&&a.h==0||isNaN(a.w)&&isNaN(a.h)){a.w=this.div.offsetWidth;a.h=this.div.offsetHeight}if(a.w==0&&a.h==0||isNaN(a.w)&&isNaN(a.h)){a.w=parseInt(this.div.style.width);a.h=parseInt(this.div.style.height)}return a},calculateBounds:function(a,b){var c=null;if(a==null)a=this.getCachedCenter();if(b==null)b=this.getResolution();if(a!=null&&b!=null){var e=this.getSize();c=e.w*b;e=e.h*b;c=new OpenLayers.Bounds(a.lon-c/2,a.lat-e/2,a.lon+c/2,a.lat+e/2)}return c},getCenter:function(){var a=null,b=this.getCachedCenter();
if(b)a=b.clone();return a},getCachedCenter:function(){if(!this.center&&this.size)this.center=this.getLonLatFromViewPortPx(new OpenLayers.Pixel(this.size.w/2,this.size.h/2));return this.center},getZoom:function(){return this.zoom},pan:function(a,b,c){c=OpenLayers.Util.applyDefaults(c,{animate:true,dragging:false});if(c.dragging){if(a!=0||b!=0)this.moveByPx(a,b)}else{var e=this.getViewPortPxFromLonLat(this.getCachedCenter());a=e.add(a,b);if(this.dragging||!a.equals(e)){e=this.getLonLatFromViewPortPx(a);
if(c.animate)this.panTo(e);else{this.moveTo(e);this.dragging=false;this.events.triggerEvent("moveend")}}}},panTo:function(a){if(this.panMethod&&this.getExtent().scale(this.panRatio).containsLonLat(a)){if(!this.panTween)this.panTween=new OpenLayers.Tween(this.panMethod);var b=this.getCachedCenter();if(!a.equals(b)){b=this.getPixelFromLonLat(b);var c=this.getPixelFromLonLat(a),e={x:0,y:0};this.panTween.start({x:0,y:0},{x:c.x-b.x,y:c.y-b.y},this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(h){this.moveByPx(h.x-
e.x,h.y-e.y);e.x=Math.round(h.x);e.y=Math.round(h.y)},this),done:OpenLayers.Function.bind(function(){this.moveTo(a);this.dragging=false;this.events.triggerEvent("moveend")},this)}})}}else this.setCenter(a)},setCenter:function(a,b,c,e){this.panTween&&this.panTween.stop();this.moveTo(a,b,{dragging:c,forceZoomChange:e})},moveByPx:function(a,b){var c=this.size.w/2,e=this.size.h/2,h=c+a,j=e+b,n=this.baseLayer.wrapDateLine,r=0,u=0;if(this.restrictedExtent){r=c;u=e;n=false}a=n||h<=this.maxPx.x-r&&h>=this.minPx.x+
r?Math.round(a):0;b=j<=this.maxPx.y-u&&j>=this.minPx.y+u?Math.round(b):0;c=this.minPx.x;e=this.maxPx.x;if(a||b){if(!this.dragging){this.dragging=true;this.events.triggerEvent("movestart")}this.center=null;if(a){this.layerContainerDiv.style.left=parseInt(this.layerContainerDiv.style.left)-a+"px";this.minPx.x-=a;this.maxPx.x-=a;if(n){if(this.maxPx.x>e)this.maxPx.x-=e-c;if(this.minPx.x<c)this.minPx.x+=e-c}}if(b){this.layerContainerDiv.style.top=parseInt(this.layerContainerDiv.style.top)-b+"px";this.minPx.y-=
b;this.maxPx.y-=b}c=0;for(e=this.layers.length;c<e;++c){n=this.layers[c];if(n.visibility&&(n===this.baseLayer||n.inRange)){n.moveByPx(a,b);n.events.triggerEvent("move")}}this.events.triggerEvent("move")}},moveTo:function(a,b,c){c||(c={});if(b!=null){b=parseFloat(b);this.fractionalZoom||(b=Math.round(b))}var e=c.dragging||this.dragging,h=c.forceZoomChange;if(!this.getCachedCenter()&&!this.isValidLonLat(a)){a=this.maxExtent.getCenterLonLat();this.center=a.clone()}if(this.restrictedExtent!=null){if(a==
null)a=this.center;if(b==null)b=this.getZoom();var j=this.getResolutionForZoom(b);j=this.calculateBounds(a,j);if(!this.restrictedExtent.containsBounds(j)){var n=this.restrictedExtent.getCenterLonLat();if(j.getWidth()>this.restrictedExtent.getWidth())a=new OpenLayers.LonLat(n.lon,a.lat);else if(j.left<this.restrictedExtent.left)a=a.add(this.restrictedExtent.left-j.left,0);else if(j.right>this.restrictedExtent.right)a=a.add(this.restrictedExtent.right-j.right,0);if(j.getHeight()>this.restrictedExtent.getHeight())a=
new OpenLayers.LonLat(a.lon,n.lat);else if(j.bottom<this.restrictedExtent.bottom)a=a.add(0,this.restrictedExtent.bottom-j.bottom);else if(j.top>this.restrictedExtent.top)a=a.add(0,this.restrictedExtent.top-j.top)}}h=h||this.isValidZoomLevel(b)&&b!=this.getZoom();j=this.isValidLonLat(a)&&!a.equals(this.center);if(h||j||e){e||this.events.triggerEvent("movestart");if(j){!h&&this.center&&this.centerLayerContainer(a);this.center=a.clone()}a=h?this.getResolutionForZoom(b):this.getResolution();if(h||this.layerContainerOrigin==
null){this.layerContainerOrigin=this.getCachedCenter();this.layerContainerDiv.style.left="0px";this.layerContainerDiv.style.top="0px";var r=this.getMaxExtent({restricted:true});j=r.getCenterLonLat();n=this.center.lon-j.lon;var u=j.lat-this.center.lat;j=Math.round(r.getWidth()/a);r=Math.round(r.getHeight()/a);n=(this.size.w-j)/2-n/a;u=(this.size.h-r)/2-u/a;this.minPx=new OpenLayers.Pixel(n,u);this.maxPx=new OpenLayers.Pixel(n+j,u+r)}if(h){this.zoom=b;this.resolution=a;this.viewRequestID++}a=this.getExtent();
if(this.baseLayer.visibility){this.baseLayer.moveTo(a,h,c.dragging);c.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:h})}a=this.baseLayer.getExtent();for(b=this.layers.length-1;b>=0;--b){j=this.layers[b];if(j!==this.baseLayer&&!j.isBaseLayer){n=j.calculateInRange();if(j.inRange!=n){(j.inRange=n)||j.display(false);this.events.triggerEvent("changelayer",{layer:j,property:"visibility"})}if(n&&j.visibility){j.moveTo(a,h,c.dragging);c.dragging||j.events.triggerEvent("moveend",{zoomChanged:h})}}}this.events.triggerEvent("move");
e||this.events.triggerEvent("moveend");if(h){b=0;for(c=this.popups.length;b<c;b++)this.popups[b].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(a){var b=this.getViewPortPxFromLonLat(this.layerContainerOrigin),c=this.getViewPortPxFromLonLat(a);if(b!=null&&c!=null){var e=parseInt(this.layerContainerDiv.style.left);a=parseInt(this.layerContainerDiv.style.top);var h=Math.round(b.x-c.x);b=Math.round(b.y-c.y);this.layerContainerDiv.style.left=h+"px";this.layerContainerDiv.style.top=
b+"px";e=e-h;a=a-b;this.minPx.x-=e;this.maxPx.x-=e;this.minPx.y-=a;this.maxPx.y-=a}},isValidZoomLevel:function(a){return a!=null&&a>=0&&a<this.getNumZoomLevels()},isValidLonLat:function(a){var b=false;if(a!=null)b=this.getMaxExtent().containsLonLat(a);return b},getProjection:function(){var a=this.getProjectionObject();return a?a.getCode():null},getProjectionObject:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.projection;return a},getMaxResolution:function(){var a=null;if(this.baseLayer!=
null)a=this.baseLayer.maxResolution;return a},getMaxExtent:function(a){var b=null;if(a&&a.restricted&&this.restrictedExtent)b=this.restrictedExtent;else if(this.baseLayer!=null)b=this.baseLayer.maxExtent;return b},getNumZoomLevels:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.numZoomLevels;return a},getExtent:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.getExtent();return a},getResolution:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.getResolution();
else if(this.allOverlays===true&&this.layers.length>0)a=this.layers[0].getResolution();return a},getUnits:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.units;return a},getScale:function(){var a=null;if(this.baseLayer!=null){a=this.getResolution();a=OpenLayers.Util.getScaleFromResolution(a,this.baseLayer.units)}return a},getZoomForExtent:function(a,b){var c=null;if(this.baseLayer!=null)c=this.baseLayer.getZoomForExtent(a,b);return c},getResolutionForZoom:function(a){var b=null;if(this.baseLayer)b=
this.baseLayer.getResolutionForZoom(a);return b},getZoomForResolution:function(a,b){var c=null;if(this.baseLayer!=null)c=this.baseLayer.getZoomForResolution(a,b);return c},zoomTo:function(a){this.isValidZoomLevel(a)&&this.setCenter(null,a)},zoomIn:function(){this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTo(this.getZoom()-1)},zoomToExtent:function(a,b){var c=a.getCenterLonLat();if(this.baseLayer.wrapDateLine){c=this.getMaxExtent();for(a=a.clone();a.right<a.left;)a.right+=c.getWidth();
c=a.getCenterLonLat().wrapDateLine(c)}this.setCenter(c,this.getZoomForExtent(a,b))},zoomToMaxExtent:function(a){this.zoomToExtent(this.getMaxExtent({restricted:a?a.restricted:true}))},zoomToScale:function(a,b){var c=OpenLayers.Util.getResolutionFromScale(a,this.baseLayer.units),e=this.getSize(),h=e.w*c;c=e.h*c;e=this.getCachedCenter();this.zoomToExtent(new OpenLayers.Bounds(e.lon-h/2,e.lat-c/2,e.lon+h/2,e.lat+c/2),b)},getLonLatFromViewPortPx:function(a){var b=null;if(this.baseLayer!=null)b=this.baseLayer.getLonLatFromViewPortPx(a);
return b},getViewPortPxFromLonLat:function(a){var b=null;if(this.baseLayer!=null)b=this.baseLayer.getViewPortPxFromLonLat(a);return b},getLonLatFromPixel:function(a){return this.getLonLatFromViewPortPx(a)},getPixelFromLonLat:function(a){a=this.getViewPortPxFromLonLat(a);a.x=Math.round(a.x);a.y=Math.round(a.y);return a},getGeodesicPixelSize:function(a){var b=a?this.getLonLatFromPixel(a):this.getCachedCenter()||new OpenLayers.LonLat(0,0),c=this.getResolution();a=b.add(-c/2,0);var e=b.add(c/2,0),h=b.add(0,
-c/2);b=b.add(0,c/2);c=new OpenLayers.Projection("EPSG:4326");var j=this.getProjectionObject()||c;if(!j.equals(c)){a.transform(j,c);e.transform(j,c);h.transform(j,c);b.transform(j,c)}return new OpenLayers.Size(OpenLayers.Util.distVincenty(a,e),OpenLayers.Util.distVincenty(h,b))},getViewPortPxFromLayerPx:function(a){var b=null;if(a!=null){b=parseInt(this.layerContainerDiv.style.left);var c=parseInt(this.layerContainerDiv.style.top);b=a.add(b,c)}return b},getLayerPxFromViewPortPx:function(a){var b=
null;if(a!=null){b=-parseInt(this.layerContainerDiv.style.left);var c=-parseInt(this.layerContainerDiv.style.top);b=a.add(b,c);if(isNaN(b.x)||isNaN(b.y))b=null}return b},getLonLatFromLayerPx:function(a){a=this.getViewPortPxFromLayerPx(a);return this.getLonLatFromViewPortPx(a)},getLayerPxFromLonLat:function(a){return this.getLayerPxFromViewPortPx(this.getPixelFromLonLat(a))},CLASS_NAME:"OpenLayers.Map"});OpenLayers.Map.TILE_WIDTH=256;OpenLayers.Map.TILE_HEIGHT=256;
OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(a,b){OpenLayers.Util.extend(this,b);this.projCode=a;if(window.Proj4js)this.proj=new Proj4js.Proj(a)},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(a){var b=false;if(a)if(window.Proj4js&&this.proj.defData&&a.proj.defData)b=this.proj.defData.replace(this.titleRegEx,
"")==a.proj.defData.replace(this.titleRegEx,"");else if(a.getCode){b=this.getCode();a=a.getCode();b=b==a||!!OpenLayers.Projection.transforms[b]&&OpenLayers.Projection.transforms[b][a]===OpenLayers.Projection.nullTransform}return b},destroy:function(){delete this.proj;delete this.projCode},CLASS_NAME:"OpenLayers.Projection"});OpenLayers.Projection.transforms={};
OpenLayers.Projection.addTransform=function(a,b,c){OpenLayers.Projection.transforms[a]||(OpenLayers.Projection.transforms[a]={});OpenLayers.Projection.transforms[a][b]=c};OpenLayers.Projection.transform=function(a,b,c){if(b.proj&&c.proj)a=Proj4js.transform(b.proj,c.proj,a);else b&&c&&OpenLayers.Projection.transforms[b.getCode()]&&OpenLayers.Projection.transforms[b.getCode()][c.getCode()]&&OpenLayers.Projection.transforms[b.getCode()][c.getCode()](a);return a};OpenLayers.Projection.nullTransform=function(a){return a};
OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:null,alwaysInRange:null,EVENT_TYPES:["loadstart","loadend","loadcancel","visibilitychanged","move","moveend","added","removed"],RESOLUTION_PROPERTIES:["scales","resolutions","maxScale","minScale","maxResolution","minResolution","numZoomLevels","maxZoomLevel"],events:null,map:null,isBaseLayer:false,alpha:false,displayInLayerSwitcher:true,visibility:true,attribution:null,inRange:false,imageSize:null,imageOffset:null,options:null,
eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,minResolution:null,numZoomLevels:null,minScale:null,maxScale:null,displayOutsideMaxExtent:false,wrapDateLine:false,transitionEffect:null,SUPPORTED_TRANSITIONS:["resize"],metadata:{},initialize:function(a,b){this.addOptions(b);this.name=a;if(this.id==null){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_");this.div=OpenLayers.Util.createDiv(this.id);this.div.style.width=
"100%";this.div.style.height="100%";this.div.dir="ltr";this.events=new OpenLayers.Events(this,this.div,this.EVENT_TYPES);this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}if(this.wrapDateLine)this.displayOutsideMaxExtent=true},destroy:function(a){if(a==null)a=true;this.map!=null&&this.map.removeLayer(this,a);this.options=this.div=this.name=this.map=this.projection=null;if(this.events){this.eventListeners&&this.events.un(this.eventListeners);this.events.destroy()}this.events=
this.eventListeners=null},clone:function(a){if(a==null)a=new OpenLayers.Layer(this.name,this.getOptions());OpenLayers.Util.applyDefaults(a,this);a.map=null;return a},getOptions:function(){var a={};for(var b in this.options)a[b]=this[b];return a},setName:function(a){if(a!=this.name){this.name=a;this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"})}},addOptions:function(a,b){if(this.options==null)this.options={};OpenLayers.Util.extend(this.options,a);OpenLayers.Util.extend(this,
a);if(typeof this.projection=="string")this.projection=new OpenLayers.Projection(this.projection);if(this.projection&&this.projection.getUnits())this.units=this.projection.getUnits();if(this.map){var c=this.map.getResolution(),e=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]);for(var h in a)if(a.hasOwnProperty(h)&&OpenLayers.Util.indexOf(e,h)>=0){this.initResolutions();if(b&&this.map.baseLayer===this){this.map.setCenter(this.map.getCenter(),this.map.getZoomForResolution(c),
false,true);this.map.events.triggerEvent("changebaselayer",{layer:this})}break}}},onMapResize:function(){},redraw:function(){var a=false;if(this.map){this.inRange=this.calculateInRange();var b=this.getExtent();if(b&&this.inRange&&this.visibility){this.moveTo(b,true,false);this.events.triggerEvent("moveend",{zoomChanged:true});a=true}}return a},moveTo:function(){var a=this.visibility;this.isBaseLayer||(a=a&&this.inRange);this.display(a)},moveByPx:function(){},setMap:function(a){if(this.map==null){this.map=
a;this.maxExtent=this.maxExtent||this.map.maxExtent;this.minExtent=this.minExtent||this.map.minExtent;this.projection=this.projection||this.map.projection;if(typeof this.projection=="string")this.projection=new OpenLayers.Projection(this.projection);this.units=this.projection.getUnits()||this.units||this.map.units;this.initResolutions();if(!this.isBaseLayer){this.inRange=this.calculateInRange();this.div.style.display=this.visibility&&this.inRange?"":"none"}this.setTileSize()}},afterAdd:function(){},
removeMap:function(){},getImageSize:function(){return this.imageSize||this.tileSize},setTileSize:function(a){this.tileSize=a=a?a:this.tileSize?this.tileSize:this.map.getTileSize();if(this.gutter){this.imageOffset=new OpenLayers.Pixel(-this.gutter,-this.gutter);this.imageSize=new OpenLayers.Size(a.w+2*this.gutter,a.h+2*this.gutter)}},getVisibility:function(){return this.visibility},setVisibility:function(a){if(a!=this.visibility){this.visibility=a;this.display(a);this.redraw();this.map!=null&&this.map.events.triggerEvent("changelayer",
{layer:this,property:"visibility"});this.events.triggerEvent("visibilitychanged")}},display:function(a){if(a!=(this.div.style.display!="none"))this.div.style.display=a&&this.calculateInRange()?"block":"none"},calculateInRange:function(){var a=false;if(this.alwaysInRange)a=true;else if(this.map){a=this.map.getResolution();a=a>=this.minResolution&&a<=this.maxResolution}return a},setIsBaseLayer:function(a){if(a!=this.isBaseLayer){this.isBaseLayer=a;this.map!=null&&this.map.events.triggerEvent("changebaselayer",
{layer:this})}},initResolutions:function(){var a,b,c,e={},h=true;a=0;for(b=this.RESOLUTION_PROPERTIES.length;a<b;a++){c=this.RESOLUTION_PROPERTIES[a];e[c]=this.options[c];if(h&&this.options[c])h=false}if(this.alwaysInRange==null)this.alwaysInRange=h;if(e.resolutions==null)e.resolutions=this.resolutionsFromScales(e.scales);if(e.resolutions==null)e.resolutions=this.calculateResolutions(e);if(e.resolutions==null){a=0;for(b=this.RESOLUTION_PROPERTIES.length;a<b;a++){c=this.RESOLUTION_PROPERTIES[a];e[c]=
this.options[c]!=null?this.options[c]:this.map[c]}if(e.resolutions==null)e.resolutions=this.resolutionsFromScales(e.scales);if(e.resolutions==null)e.resolutions=this.calculateResolutions(e)}var j;if(this.options.maxResolution&&this.options.maxResolution!=="auto")j=this.options.maxResolution;if(this.options.minScale)j=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units);var n;if(this.options.minResolution&&this.options.minResolution!=="auto")n=this.options.minResolution;if(this.options.maxScale)n=
OpenLayers.Util.getResolutionFromScale(this.options.maxScale,this.units);if(e.resolutions){e.resolutions.sort(function(r,u){return u-r});j||(j=e.resolutions[0]);n||(n=e.resolutions[e.resolutions.length-1])}if(this.resolutions=e.resolutions){b=this.resolutions.length;this.scales=Array(b);for(a=0;a<b;a++)this.scales[a]=OpenLayers.Util.getScaleFromResolution(this.resolutions[a],this.units);this.numZoomLevels=b}if(this.minResolution=n)this.maxScale=OpenLayers.Util.getScaleFromResolution(n,this.units);
if(this.maxResolution=j)this.minScale=OpenLayers.Util.getScaleFromResolution(j,this.units)},resolutionsFromScales:function(a){if(a!=null){var b,c,e;e=a.length;b=Array(e);for(c=0;c<e;c++)b[c]=OpenLayers.Util.getResolutionFromScale(a[c],this.units);return b}},calculateResolutions:function(a){var b,c,e=a.maxResolution;if(a.minScale!=null)e=OpenLayers.Util.getResolutionFromScale(a.minScale,this.units);else if(e=="auto"&&this.maxExtent!=null){b=this.map.getSize();c=this.maxExtent.getWidth()/b.w;b=this.maxExtent.getHeight()/
b.h;e=Math.max(c,b)}c=a.minResolution;if(a.maxScale!=null)c=OpenLayers.Util.getResolutionFromScale(a.maxScale,this.units);else if(a.minResolution=="auto"&&this.minExtent!=null){b=this.map.getSize();c=this.minExtent.getWidth()/b.w;b=this.minExtent.getHeight()/b.h;c=Math.max(c,b)}b=a.maxZoomLevel;a=a.numZoomLevels;if(typeof c==="number"&&typeof e==="number"&&a===undefined)a=Math.floor(Math.log(e/c)/Math.log(2))+1;else if(a===undefined&&b!=null)a=b+1;if(!(typeof a!=="number"||a<=0||typeof e!=="number"&&
typeof c!=="number")){b=Array(a);var h=2;if(typeof c=="number"&&typeof e=="number")h=Math.pow(e/c,1/(a-1));var j;if(typeof e==="number")for(j=0;j<a;j++)b[j]=e/Math.pow(h,j);else for(j=0;j<a;j++)b[a-1-j]=c*Math.pow(h,j);return b}},getResolution:function(){return this.getResolutionForZoom(this.map.getZoom())},getExtent:function(){return this.map.calculateBounds()},getZoomForExtent:function(a,b){var c=this.map.getSize();return this.getZoomForResolution(Math.max(a.getWidth()/c.w,a.getHeight()/c.h),b)},
getDataExtent:function(){},getResolutionForZoom:function(a){a=Math.max(0,Math.min(a,this.resolutions.length-1));if(this.map.fractionalZoom){var b=Math.floor(a);a=this.resolutions[b]-(a-b)*(this.resolutions[b]-this.resolutions[Math.ceil(a)])}else a=this.resolutions[Math.round(a)];return a},getZoomForResolution:function(a,b){var c,e;if(this.map.fractionalZoom){var h=0,j=this.resolutions[h],n=this.resolutions[this.resolutions.length-1],r;c=0;for(e=this.resolutions.length;c<e;++c){r=this.resolutions[c];
if(r>=a){j=r;h=c}if(r<=a){n=r;break}}c=j-n;c=c>0?h+(j-a)/c:h}else{j=Number.POSITIVE_INFINITY;c=0;for(e=this.resolutions.length;c<e;c++)if(b){h=Math.abs(this.resolutions[c]-a);if(h>j)break;j=h}else if(this.resolutions[c]<a)break;c=Math.max(0,c-1)}return c},getLonLatFromViewPortPx:function(a){var b=null,c=this.map;if(a!=null&&c.minPx){b=c.getResolution();var e=c.getMaxExtent({restricted:true});b=new OpenLayers.LonLat((a.x-c.minPx.x)*b+e.left,(c.minPx.y-a.y)*b+e.top);if(this.wrapDateLine)b=b.wrapDateLine(this.maxExtent)}return b},
getViewPortPxFromLonLat:function(a){var b=null;if(a!=null){b=this.map.getResolution();var c=this.map.getExtent();b=new OpenLayers.Pixel(1/b*(a.lon-c.left),1/b*(c.top-a.lat))}return b},setOpacity:function(a){if(a!=this.opacity){this.opacity=a;for(var b=0,c=this.div.childNodes.length;b<c;++b)OpenLayers.Util.modifyDOMElement(this.div.childNodes[b].firstChild,null,null,null,null,null,null,a);this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},
setZIndex:function(a){this.div.style.zIndex=a},adjustBounds:function(a){if(this.gutter){var b=this.gutter*this.map.getResolution();a=new OpenLayers.Bounds(a.left-b,a.bottom-b,a.right+b,a.top+b)}if(this.wrapDateLine){b={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()};a=a.wrapDateLine(this.maxExtent,b)}return a},CLASS_NAME:"OpenLayers.Layer"});
OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:false,initialize:function(a,b,c,e){OpenLayers.Layer.prototype.initialize.apply(this,[a,e]);this.url=b;this.params=OpenLayers.Util.extend({},c)},destroy:function(){this.params=this.url=null;OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(a){if(a==null)a=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions());return a=OpenLayers.Layer.prototype.clone.apply(this,
[a])},setUrl:function(a){this.url=a},mergeNewParams:function(a){this.params=OpenLayers.Util.extend(this.params,a);a=this.redraw();this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"});return a},redraw:function(a){return a?this.mergeNewParams({_olSalt:Math.random()}):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(a,b){for(var c=1,e=0,h=a.length;e<h;e++){c*=a.charCodeAt(e)*this.URL_HASH_FACTOR;c-=Math.floor(c)}return b[Math.floor(c*b.length)]},
getFullRequestString:function(a,b){var c=b||this.url,e=OpenLayers.Util.extend({},this.params);e=OpenLayers.Util.extend(e,a);var h=OpenLayers.Util.getParameterString(e);if(OpenLayers.Util.isArray(c))c=this.selectUrl(h,c);h=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(c));for(var j in e)j.toUpperCase()in h&&delete e[j];h=OpenLayers.Util.getParameterString(e);return OpenLayers.Util.urlAppend(c,h)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"});
OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,grid:null,singleTile:false,ratio:1.5,buffer:0,numLoadingTiles:0,tileLoadingDelay:100,timerId:null,initialize:function(){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments);this.events.addEventType("tileloaded");this.grid=[];this._moveGriddedTiles=OpenLayers.Function.bind(this.moveGriddedTiles,this)},removeMap:function(){if(this.timerId!=null){window.clearTimeout(this.timerId);
this.timerId=null}},destroy:function(){this.clearGrid();this.tileSize=this.grid=null;OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){if(this.grid){for(var a=0,b=this.grid.length;a<b;a++)for(var c=this.grid[a],e=0,h=c.length;e<h;e++){var j=c[e];this.removeTileMonitoringHooks(j);j.destroy()}this.grid=[]}},clone:function(a){if(a==null)a=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions());a=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,
[a]);if(this.tileSize!=null)a.tileSize=this.tileSize.clone();a.grid=[];return a},moveTo:function(a,b,c){OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments);a=a||this.map.getExtent();if(a!=null){var e=!this.grid.length||b,h=this.getTilesBounds();if(this.singleTile){if(e||!c&&!h.containsBounds(a))this.initSingleTile(a)}else e||!h.containsBounds(a,true)?this.initGriddedTiles(a):this.scheduleMoveGriddedTiles()}},moveByPx:function(){this.singleTile||this.scheduleMoveGriddedTiles()},scheduleMoveGriddedTiles:function(){this.timerId!=
null&&window.clearTimeout(this.timerId);this.timerId=window.setTimeout(this._moveGriddedTiles,this.tileLoadingDelay)},setTileSize:function(a){if(this.singleTile){a=this.map.getSize();a.h=parseInt(a.h*this.ratio);a.w=parseInt(a.w*this.ratio)}OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[a])},getGridBounds:function(){OpenLayers.Console.warn("The getGridBounds() function is deprecated. It will be removed in 3.0. Please use getTilesBounds() instead.");return this.getTilesBounds()},getTilesBounds:function(){var a=
null;if(this.grid.length){a=this.grid[this.grid.length-1][0];var b=this.grid[0][this.grid[0].length-1];a=new OpenLayers.Bounds(a.bounds.left,a.bounds.bottom,b.bounds.right,b.bounds.top)}return a},initSingleTile:function(a){var b=a.getCenterLonLat(),c=a.getWidth()*this.ratio;a=a.getHeight()*this.ratio;b=new OpenLayers.Bounds(b.lon-c/2,b.lat-a/2,b.lon+c/2,b.lat+a/2);c=this.map.getLayerPxFromLonLat(new OpenLayers.LonLat(b.left,b.top));this.grid.length||(this.grid[0]=[]);if(a=this.grid[0][0])a.moveTo(b,
c);else{a=this.addTile(b,c);this.addTileMonitoringHooks(a);a.draw();this.grid[0][0]=a}this.removeExcessTiles(1,1)},calculateGridLayout:function(a,b,c){var e=c*this.tileSize.w;c=c*this.tileSize.h;var h=a.left-b.lon,j=Math.floor(h/e)-this.buffer;h=-(h/e-j)*this.tileSize.w;j=b.lon+j*e;a=a.top-(b.lat+c);var n=Math.ceil(a/c)+this.buffer;return{tilelon:e,tilelat:c,tileoffsetlon:j,tileoffsetlat:b.lat+n*c,tileoffsetx:h,tileoffsety:-(n-a/c)*this.tileSize.h}},getTileOrigin:function(){var a=this.tileOrigin;
if(!a){a=this.getMaxExtent();var b={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner];a=new OpenLayers.LonLat(a[b[0]],a[b[1]])}return a},initGriddedTiles:function(a){var b=this.map.getSize(),c=Math.ceil(b.h/this.tileSize.h)+Math.max(1,2*this.buffer);b=Math.ceil(b.w/this.tileSize.w)+Math.max(1,2*this.buffer);var e=this.getTileOrigin(),h=this.map.getResolution(),j=this.calculateGridLayout(a,e,h);e=Math.round(j.tileoffsetx);h=Math.round(j.tileoffsety);
var n=j.tileoffsetlon,r=j.tileoffsetlat,u=j.tilelon;j=j.tilelat;this.origin=new OpenLayers.Pixel(e,h);var x=e,C=n,J=0,M=parseInt(this.map.layerContainerDiv.style.left),I=parseInt(this.map.layerContainerDiv.style.top);do{var N=this.grid[J++];if(!N){N=[];this.grid.push(N)}n=C;e=x;var S=0;do{var V=new OpenLayers.Bounds(n,r,n+u,r+j),W=e;W-=M;var X=h;X-=I;W=new OpenLayers.Pixel(W,X);if(X=N[S++])X.moveTo(V,W,false);else{X=this.addTile(V,W);this.addTileMonitoringHooks(X);N.push(X)}n+=u;e+=this.tileSize.w}while(n<=
a.right+u*this.buffer||S<b);r-=j;h+=this.tileSize.h}while(r>=a.bottom-j*this.buffer||J<c);this.removeExcessTiles(J,S);this.spiralTileLoad()},getMaxExtent:function(){return this.maxExtent},spiralTileLoad:function(){for(var a=[],b=["right","down","left","up"],c=0,e=-1,h=OpenLayers.Util.indexOf(b,"right"),j=0;j<b.length;){var n=c,r=e;switch(b[h]){case "right":r++;break;case "down":n++;break;case "left":r--;break;case "up":n--;break}var u=null;if(n<this.grid.length&&n>=0&&r<this.grid[0].length&&r>=0)u=
this.grid[n][r];if(u!=null&&!u.queued){a.unshift(u);u.queued=true;j=0;c=n;e=r}else{h=(h+1)%4;j++}}b=0;for(c=a.length;b<c;b++){u=a[b];u.draw();u.queued=false}},addTile:function(a,b){return new OpenLayers.Tile.Image(this,b,a,null,this.tileSize,this.tileOptions)},addTileMonitoringHooks:function(a){a.onLoadStart=function(){this.numLoadingTiles==0&&this.events.triggerEvent("loadstart");this.numLoadingTiles++};a.events.register("loadstart",this,a.onLoadStart);a.onLoadEnd=function(){this.numLoadingTiles--;
this.events.triggerEvent("tileloaded");this.numLoadingTiles==0&&this.events.triggerEvent("loadend")};a.events.register("loadend",this,a.onLoadEnd);a.events.register("unload",this,a.onLoadEnd)},removeTileMonitoringHooks:function(a){a.unload();a.events.un({loadstart:a.onLoadStart,loadend:a.onLoadEnd,unload:a.onLoadEnd,scope:this})},moveGriddedTiles:function(){var a=true,b=this.buffer||1,c=this.grid[0][0].position,e=parseInt(this.map.layerContainerDiv.style.left),h=parseInt(this.map.layerContainerDiv.style.top);
c=c.add(e,h);if(c.x>-this.tileSize.w*(b-1))this.shiftColumn(true);else if(c.x<-this.tileSize.w*b)this.shiftColumn(false);else if(c.y>-this.tileSize.h*(b-1))this.shiftRow(true);else if(c.y<-this.tileSize.h*b)this.shiftRow(false);else a=false;if(a)this.timerId=window.setTimeout(this._moveGriddedTiles,0)},shiftRow:function(a){var b=this.grid,c=b[a?0:this.grid.length-1],e=this.map.getResolution(),h=a?-this.tileSize.h:this.tileSize.h;e=e*-h;for(var j=a?b.pop():b.shift(),n=0,r=c.length;n<r;n++){var u=c[n],
x=u.bounds.clone();u=u.position.clone();x.bottom+=e;x.top+=e;u.y+=h;j[n].moveTo(x,u)}a?b.unshift(j):b.push(j)},shiftColumn:function(a){for(var b=a?-this.tileSize.w:this.tileSize.w,c=this.map.getResolution()*b,e=0,h=this.grid.length;e<h;e++){var j=this.grid[e],n=j[a?0:j.length-1],r=n.bounds.clone();n=n.position.clone();r.left+=c;r.right+=c;n.x+=b;var u=a?this.grid[e].pop():this.grid[e].shift();u.moveTo(r,n);a?j.unshift(u):j.push(u)}},removeExcessTiles:function(a,b){for(;this.grid.length>a;)for(var c=
this.grid.pop(),e=0,h=c.length;e<h;e++){var j=c[e];this.removeTileMonitoringHooks(j);j.destroy()}for(;this.grid[0].length>b;){e=0;for(h=this.grid.length;e<h;e++){c=this.grid[e];j=c.pop();this.removeTileMonitoringHooks(j);j.destroy()}}},onMapResize:function(){if(this.singleTile){this.clearGrid();this.setTileSize()}},getTileBounds:function(a){var b=this.maxExtent,c=this.getResolution(),e=c*this.tileSize.w;c=c*this.tileSize.h;var h=this.getLonLatFromViewPortPx(a);a=b.left+e*Math.floor((h.lon-b.left)/
e);b=b.bottom+c*Math.floor((h.lat-b.bottom)/c);return new OpenLayers.Bounds(a,b,a+e,b+c)},CLASS_NAME:"OpenLayers.Layer.Grid"});
OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:false,displayClass:"",title:"",autoActivate:false,active:null,handler:null,eventListeners:null,events:null,EVENT_TYPES:["activate","deactivate"],initialize:function(a){this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,"");OpenLayers.Util.extend(this,a);this.events=new OpenLayers.Events(this,null,this.EVENT_TYPES);this.eventListeners instanceof Object&&this.events.on(this.eventListeners);
if(this.id==null)this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){if(this.events){this.eventListeners&&this.events.un(this.eventListeners);this.events.destroy();this.events=null}this.eventListeners=null;if(this.handler){this.handler.destroy();this.handler=null}if(this.handlers){for(var a in this.handlers)this.handlers.hasOwnProperty(a)&&typeof this.handlers[a].destroy=="function"&&this.handlers[a].destroy();this.handlers=null}if(this.map){this.map.removeControl(this);
this.map=null}this.div=null},setMap:function(a){this.map=a;this.handler&&this.handler.setMap(a)},draw:function(a){if(this.div==null){this.div=OpenLayers.Util.createDiv(this.id);this.div.className=this.displayClass;if(!this.allowSelection){this.div.className+=" olControlNoSelect";this.div.setAttribute("unselectable","on",0);this.div.onselectstart=OpenLayers.Function.False}if(this.title!="")this.div.title=this.title}if(a!=null)this.position=a.clone();this.moveTo(this.position);return this.div},moveTo:function(a){if(a!=
null&&this.div!=null){this.div.style.left=a.x+"px";this.div.style.top=a.y+"px"}},activate:function(){if(this.active)return false;this.handler&&this.handler.activate();this.active=true;this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active");this.events.triggerEvent("activate");return true},deactivate:function(){if(this.active){this.handler&&this.handler.deactivate();this.active=false;this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,
"")+"Active");this.events.triggerEvent("deactivate");return true}return false},CLASS_NAME:"OpenLayers.Control"});OpenLayers.Control.TYPE_BUTTON=1;OpenLayers.Control.TYPE_TOGGLE=2;OpenLayers.Control.TYPE_TOOL=3;
OpenLayers.Control.Panel=OpenLayers.Class(OpenLayers.Control,{controls:null,autoActivate:true,defaultControl:null,saveState:false,allowDepress:false,activeState:null,initialize:function(a){OpenLayers.Control.prototype.initialize.apply(this,[a]);this.controls=[];this.activeState={}},destroy:function(){OpenLayers.Control.prototype.destroy.apply(this,arguments);for(var a,b=this.controls.length-1;b>=0;b--){a=this.controls[b];a.events&&a.events.un({activate:this.iconOn,deactivate:this.iconOff});OpenLayers.Event.stopObservingElement(a.panel_div);
a.panel_div=null}this.activeState=null},activate:function(){if(OpenLayers.Control.prototype.activate.apply(this,arguments)){for(var a,b=0,c=this.controls.length;b<c;b++){a=this.controls[b];if(a===this.defaultControl||this.saveState&&this.activeState[a.id])a.activate()}if(this.saveState===true)this.defaultControl=null;this.redraw();return true}else return false},deactivate:function(){if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){for(var a,b=0,c=this.controls.length;b<c;b++){a=this.controls[b];
this.activeState[a.id]=a.deactivate()}this.redraw();return true}else return false},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.addControlsToMap(this.controls);return this.div},redraw:function(){for(var a=this.div.childNodes.length-1;a>=0;a--)this.div.removeChild(this.div.childNodes[a]);this.div.innerHTML="";if(this.active){a=0;for(var b=this.controls.length;a<b;a++)this.div.appendChild(this.controls[a].panel_div)}},activateControl:function(a){if(!this.active)return false;
if(a.type==OpenLayers.Control.TYPE_BUTTON)a.trigger();else if(a.type==OpenLayers.Control.TYPE_TOGGLE)a.active?a.deactivate():a.activate();else if(this.allowDepress&&a.active)a.deactivate();else{for(var b,c=0,e=this.controls.length;c<e;c++){b=this.controls[c];if(b!=a&&(b.type===OpenLayers.Control.TYPE_TOOL||b.type==null))b.deactivate()}a.activate()}},addControls:function(a){OpenLayers.Util.isArray(a)||(a=[a]);this.controls=this.controls.concat(a);for(var b=0,c=a.length;b<c;b++){var e=document.createElement("div");
e.className=a[b].displayClass+"ItemInactive";a[b].panel_div=e;if(a[b].title!="")a[b].panel_div.title=a[b].title;OpenLayers.Event.observe(a[b].panel_div,"click",OpenLayers.Function.bind(this.onClick,this,a[b]));OpenLayers.Event.observe(a[b].panel_div,"dblclick",OpenLayers.Function.bind(this.onDoubleClick,this,a[b]));OpenLayers.Event.observe(a[b].panel_div,"mousedown",OpenLayers.Function.bindAsEventListener(OpenLayers.Event.stop))}if(this.map){this.addControlsToMap(a);this.redraw()}},addControlsToMap:function(a){for(var b,
c=0,e=a.length;c<e;c++){b=a[c];if(b.autoActivate===true){b.autoActivate=false;this.map.addControl(b);b.autoActivate=true}else{this.map.addControl(b);b.deactivate()}b.events.on({activate:this.iconOn,deactivate:this.iconOff})}},iconOn:function(){var a=this.panel_div;a.className=a.className.replace(/ItemInactive$/,"ItemActive")},iconOff:function(){var a=this.panel_div;a.className=a.className.replace(/ItemActive$/,"ItemInactive")},onClick:function(a,b){OpenLayers.Event.stop(b?b:window.event);this.activateControl(a)},
onDoubleClick:function(a,b){OpenLayers.Event.stop(b?b:window.event)},getControlsBy:function(a,b){var c=typeof b.test=="function";return OpenLayers.Array.filter(this.controls,function(e){return e[a]==b||c&&b.test(e[a])})},getControlsByName:function(a){return this.getControlsBy("name",a)},getControlsByClass:function(a){return this.getControlsBy("CLASS_NAME",a)},CLASS_NAME:"OpenLayers.Control.Panel"});
function State(a){OpenLayers.Util.cookies.set("DLTSZoom",a.zoom);var b=OpenLayers.Util.getElement("control-zoom-in"),c=OpenLayers.Util.getElement("control-zoom-out");if(a.zoom===a.resolutions.length-1){OpenLayers.Element.addClass(b,"zoom-maxed-in");OpenLayers.Element.addClass(b,"zoom-maxed")}else if(a.zoom===a.resolutions.length-2){OpenLayers.Element.removeClass(b,"zoom-maxed-in");OpenLayers.Element.removeClass(b,"zoom-maxed")}if(a.zoom===0){OpenLayers.Element.addClass(c,"zoom-maxed-out");OpenLayers.Element.addClass(c,
"zoom-maxed")}else if(a.zoom===1){OpenLayers.Element.removeClass(c,"zoom-maxed-out");OpenLayers.Element.removeClass(c,"zoom-maxed")}}OpenLayers.Control.DLTSZoomIn=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){this.map.zoomIn();State(this.map)},CLASS_NAME:"OpenLayers.Control.DLTSZoomIn"});
OpenLayers.Control.DLTSZoomOut=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_BUTTON,trigger:function(){this.map.zoomOut();OpenLayers.Util.cookies.set("DLTSZoom",this.map.zoom);State(this.map)},CLASS_NAME:"OpenLayers.Control.DLTSZoomOut"});
OpenLayers.Control.DLTSZoomPanel=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a]);this.addControls([new OpenLayers.Control.DLTSZoomIn,new OpenLayers.Control.DLTSZoomOut])},CLASS_NAME:"OpenLayers.Control.DLTSZoomPanel"});
OpenLayers.Protocol=OpenLayers.Class({format:null,options:null,autoDestroy:true,defaultFilter:null,initialize:function(a){a=a||{};OpenLayers.Util.extend(this,a);this.options=a},mergeWithDefaultFilter:function(a){return a&&this.defaultFilter?new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.defaultFilter,a]}):a||this.defaultFilter||undefined},destroy:function(){this.format=this.options=null},read:function(a){a=a||{};a.filter=this.mergeWithDefaultFilter(a.filter)},create:function(){},
update:function(){},"delete":function(){},commit:function(){},abort:function(){},createCallback:function(a,b,c){return OpenLayers.Function.bind(function(){a.apply(this,[b,c])},this)},CLASS_NAME:"OpenLayers.Protocol"});OpenLayers.Protocol.Response=OpenLayers.Class({code:null,requestType:null,last:true,features:null,reqFeatures:null,priv:null,error:null,initialize:function(a){OpenLayers.Util.extend(this,a)},success:function(){return this.code>0},CLASS_NAME:"OpenLayers.Protocol.Response"});
OpenLayers.Protocol.Response.SUCCESS=1;OpenLayers.Protocol.Response.FAILURE=0;
OpenLayers.Control.Attribution=OpenLayers.Class(OpenLayers.Control,{separator:", ",destroy:function(){this.map.events.un({removelayer:this.updateAttribution,addlayer:this.updateAttribution,changelayer:this.updateAttribution,changebaselayer:this.updateAttribution,scope:this});OpenLayers.Control.prototype.destroy.apply(this,arguments)},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);this.map.events.on({changebaselayer:this.updateAttribution,changelayer:this.updateAttribution,
addlayer:this.updateAttribution,removelayer:this.updateAttribution,scope:this});this.updateAttribution();return this.div},updateAttribution:function(){var a=[];if(this.map&&this.map.layers){for(var b=0,c=this.map.layers.length;b<c;b++){var e=this.map.layers[b];e.attribution&&e.getVisibility()&&OpenLayers.Util.indexOf(a,e.attribution)===-1&&a.push(e.attribution)}this.div.innerHTML=a.join(this.separator)}},CLASS_NAME:"OpenLayers.Control.Attribution"});
OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:false,nativeJSON:function(){return!!(window.JSON&&typeof JSON.parse=="function"&&typeof JSON.stringify=="function")}(),read:function(a,b){var c;if(this.nativeJSON)c=JSON.parse(a,b);else try{if(/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){c=eval("("+a+")");if(typeof b===
"function"){var e=function(j,n){if(n&&typeof n==="object")for(var r in n)if(n.hasOwnProperty(r))n[r]=e(r,n[r]);return b(j,n)};c=e("",c)}}}catch(h){}if(this.keepData)this.data=c;return c},write:function(a,b){this.pretty=!!b;var c=null,e=typeof a;if(this.serialize[e])try{c=!this.pretty&&this.nativeJSON?JSON.stringify(a):this.serialize[e].apply(this,[a])}catch(h){OpenLayers.Console.error("Trouble serializing: "+h)}return c},writeIndent:function(){var a=[];if(this.pretty)for(var b=0;b<this.level;++b)a.push(this.indent);
return a.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(a){if(a==null)return"null";if(a.constructor==Date)return this.serialize.date.apply(this,[a]);if(a.constructor==Array)return this.serialize.array.apply(this,[a]);var b=["{"];this.level+=1;var c,e,h,j=false;for(c in a)if(a.hasOwnProperty(c)){e=OpenLayers.Format.JSON.prototype.write.apply(this,[c,this.pretty]);h=OpenLayers.Format.JSON.prototype.write.apply(this,
[a[c],this.pretty]);if(e!=null&&h!=null){j&&b.push(",");b.push(this.writeNewline(),this.writeIndent(),e,":",this.writeSpace(),h);j=true}}this.level-=1;b.push(this.writeNewline(),this.writeIndent(),"}");return b.join("")},array:function(a){var b,c=["["];this.level+=1;for(var e=0,h=a.length;e<h;++e){b=OpenLayers.Format.JSON.prototype.write.apply(this,[a[e],this.pretty]);if(b!=null){e>0&&c.push(",");c.push(this.writeNewline(),this.writeIndent(),b)}}this.level-=1;c.push(this.writeNewline(),this.writeIndent(),
"]");return c.join("")},string:function(a){var b={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(/["\\\x00-\x1f]/.test(a))return'"'+a.replace(/([\x00-\x1f\\"])/g,function(c,e){var h=b[e];if(h)return h;h=e.charCodeAt();return"\\u00"+Math.floor(h/16).toString(16)+(h%16).toString(16)})+'"';return'"'+a+'"'},number:function(a){return isFinite(a)?String(a):"null"},"boolean":function(a){return String(a)},date:function(a){function b(c){return c<10?"0"+c:c}return'"'+
a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+"T"+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"});OpenLayers.Control.DLTSZoomInPanel=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a]);this.addControls([new OpenLayers.Control.DLTSZoomIn])},CLASS_NAME:"OpenLayers.Control.DLTSZoomInPanel"});
OpenLayers.Icon=OpenLayers.Class({url:null,size:null,offset:null,calculateOffset:null,imageDiv:null,px:null,initialize:function(a,b,c,e){this.url=a;this.size=b?b:new OpenLayers.Size(20,20);this.offset=c?c:new OpenLayers.Pixel(-(this.size.w/2),-(this.size.h/2));this.calculateOffset=e;a=OpenLayers.Util.createUniqueID("OL_Icon_");this.imageDiv=OpenLayers.Util.createAlphaImageDiv(a)},destroy:function(){this.erase();OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild);this.imageDiv.innerHTML=
"";this.imageDiv=null},clone:function(){return new OpenLayers.Icon(this.url,this.size,this.offset,this.calculateOffset)},setSize:function(a){if(a!=null)this.size=a;this.draw()},setUrl:function(a){if(a!=null)this.url=a;this.draw()},draw:function(a){OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,this.size,this.url,"absolute");this.moveTo(a);return this.imageDiv},erase:function(){this.imageDiv!=null&&this.imageDiv.parentNode!=null&&OpenLayers.Element.remove(this.imageDiv)},setOpacity:function(a){OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,
null,null,null,null,null,null,null,a)},moveTo:function(a){if(a!=null)this.px=a;if(this.imageDiv!=null)if(this.px==null)this.display(false);else{if(this.calculateOffset)this.offset=this.calculateOffset(this.size);a=this.px.offset(this.offset);OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,a)}},display:function(a){this.imageDiv.style.display=a?"":"none"},isDrawn:function(){return this.imageDiv&&this.imageDiv.parentNode&&this.imageDiv.parentNode.nodeType!=11},CLASS_NAME:"OpenLayers.Icon"});
OpenLayers.Marker=OpenLayers.Class({icon:null,lonlat:null,events:null,map:null,initialize:function(a,b){this.lonlat=a;var c=b?b:OpenLayers.Marker.defaultIcon();if(this.icon==null)this.icon=c;else{this.icon.url=c.url;this.icon.size=c.size;this.icon.offset=c.offset;this.icon.calculateOffset=c.calculateOffset}this.events=new OpenLayers.Events(this,this.icon.imageDiv,null)},destroy:function(){this.erase();this.map=null;this.events.destroy();this.events=null;if(this.icon!=null){this.icon.destroy();this.icon=
null}},draw:function(a){return this.icon.draw(a)},erase:function(){this.icon!=null&&this.icon.erase()},moveTo:function(a){a!=null&&this.icon!=null&&this.icon.moveTo(a);this.lonlat=this.map.getLonLatFromLayerPx(a)},isDrawn:function(){return this.icon&&this.icon.isDrawn()},onScreen:function(){var a=false;if(this.map)a=this.map.getExtent().containsLonLat(this.lonlat);return a},inflate:function(a){this.icon&&this.icon.setSize(new OpenLayers.Size(this.icon.size.w*a,this.icon.size.h*a))},setOpacity:function(a){this.icon.setOpacity(a)},
setUrl:function(a){this.icon.setUrl(a)},display:function(a){this.icon.display(a)},CLASS_NAME:"OpenLayers.Marker"});OpenLayers.Marker.defaultIcon=function(){var a=OpenLayers.Util.getImagesLocation()+"marker.png",b=new OpenLayers.Size(21,25);return new OpenLayers.Icon(a,b,null,function(c){return new OpenLayers.Pixel(-(c.w/2),-c.h)})};
OpenLayers.Marker.Box=OpenLayers.Class(OpenLayers.Marker,{bounds:null,div:null,initialize:function(a,b,c){this.bounds=a;this.div=OpenLayers.Util.createDiv();this.div.style.overflow="hidden";this.events=new OpenLayers.Events(this,this.div,null);this.setBorder(b,c)},destroy:function(){this.div=this.bounds=null;OpenLayers.Marker.prototype.destroy.apply(this,arguments)},setBorder:function(a,b){a||(a="red");b||(b=2);this.div.style.border=b+"px solid "+a},draw:function(a,b){OpenLayers.Util.modifyDOMElement(this.div,
null,a,b);return this.div},onScreen:function(){var a=false;if(this.map)a=this.map.getExtent().containsBounds(this.bounds,true,true);return a},display:function(a){this.div.style.display=a?"":"none"},CLASS_NAME:"OpenLayers.Marker.Box"});
OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:false,evt:null,initialize:function(a,b,c){OpenLayers.Util.extend(this,c);this.control=a;this.callbacks=b;(a=this.map||a.map)&&this.setMap(a);this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(a){this.map=a},checkModifiers:function(a){if(this.keyMask==null)return true;return((a.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(a.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(a.altKey?OpenLayers.Handler.MOD_ALT:
0))==this.keyMask},activate:function(){if(this.active)return false;for(var a=OpenLayers.Events.prototype.BROWSER_EVENTS,b=0,c=a.length;b<c;b++)this[a[b]]&&this.register(a[b],this[a[b]]);return this.active=true},deactivate:function(){if(!this.active)return false;for(var a=OpenLayers.Events.prototype.BROWSER_EVENTS,b=0,c=a.length;b<c;b++)this[a[b]]&&this.unregister(a[b],this[a[b]]);this.active=false;return true},callback:function(a,b){a&&this.callbacks[a]&&this.callbacks[a].apply(this.control,b)},register:function(a,
b){this.map.events.registerPriority(a,this,b);this.map.events.registerPriority(a,this,this.setEvent)},unregister:function(a,b){this.map.events.unregister(a,this,b);this.map.events.unregister(a,this,this.setEvent)},setEvent:function(a){this.evt=a;return true},destroy:function(){this.deactivate();this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"});OpenLayers.Handler.MOD_NONE=0;OpenLayers.Handler.MOD_SHIFT=1;OpenLayers.Handler.MOD_CTRL=2;OpenLayers.Handler.MOD_ALT=4;
OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:false,stopDown:true,dragging:false,touch:false,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:false,documentEvents:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments);if(this.documentDrag===true){var a=this;this._docMove=function(b){a.mousemove({xy:{x:b.clientX,y:b.clientY},element:document})};this._docUp=function(b){a.mouseup({xy:{x:b.clientX,
y:b.clientY}})}}},dragstart:function(a){var b=true;this.dragging=false;if(this.checkModifiers(a)&&(OpenLayers.Event.isLeftClick(a)||OpenLayers.Event.isSingleTouch(a))){this.started=true;this.last=this.start=a.xy;OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown");this.down(a);this.callback("down",[a.xy]);OpenLayers.Event.stop(a);if(!this.oldOnselectstart)this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True;document.onselectstart=OpenLayers.Function.False;
b=!this.stopDown}else{this.started=false;this.last=this.start=null}return b},dragmove:function(a){this.lastMoveEvt=a;if(this.started&&!this.timeoutId&&(a.xy.x!=this.last.x||a.xy.y!=this.last.y)){if(this.documentDrag===true&&this.documentEvents)if(a.element===document){this.adjustXY(a);this.setEvent(a)}else this.removeDocumentEvents();if(this.interval>0)this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval);this.dragging=true;this.move(a);this.callback("move",[a.xy]);
if(!this.oldOnselectstart){this.oldOnselectstart=document.onselectstart;document.onselectstart=OpenLayers.Function.False}this.last=a.xy}return true},dragend:function(a){if(this.started){if(this.documentDrag===true&&this.documentEvents){this.adjustXY(a);this.removeDocumentEvents()}var b=this.start!=this.last;this.dragging=this.started=false;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown");this.up(a);this.callback("up",[a.xy]);b&&this.callback("done",[a.xy]);document.onselectstart=
this.oldOnselectstart}return true},down:function(){},move:function(){},up:function(){},out:function(){},mousedown:function(a){return this.dragstart(a)},touchstart:function(a){if(!this.touch){this.touch=true;this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,scope:this})}return this.dragstart(a)},mousemove:function(a){return this.dragmove(a)},touchmove:function(a){return this.dragmove(a)},removeTimeout:function(){this.timeoutId=null;this.dragging&&
this.mousemove(this.lastMoveEvt)},mouseup:function(a){return this.dragend(a)},touchend:function(a){a.xy=this.last;return this.dragend(a)},mouseout:function(a){if(this.started&&OpenLayers.Util.mouseLeft(a,this.map.eventsDiv))if(this.documentDrag===true)this.addDocumentEvents();else{var b=this.start!=this.last;this.dragging=this.started=false;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown");this.out(a);this.callback("out",[]);b&&this.callback("done",[a.xy]);if(document.onselectstart)document.onselectstart=
this.oldOnselectstart}return true},click:function(){return this.start==this.last},activate:function(){var a=false;if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.dragging=false;a=true}return a},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.dragging=this.started=this.touch=false;this.last=this.start=null;a=true;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown")}return a},adjustXY:function(a){var b=OpenLayers.Util.pagePosition(this.map.viewPortDiv);
a.xy.x-=b[0];a.xy.y-=b[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,"olDragDown");this.documentEvents=true;OpenLayers.Event.observe(document,"mousemove",this._docMove);OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown");this.documentEvents=false;OpenLayers.Event.stopObserving(document,"mousemove",this._docMove);OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},
CLASS_NAME:"OpenLayers.Handler.Drag"});
OpenLayers.Handler.Box=OpenLayers.Class(OpenLayers.Handler,{dragHandler:null,boxDivClassName:"olHandlerBoxZoomBox",boxOffsets:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments);this.dragHandler=new OpenLayers.Handler.Drag(this,{down:this.startBox,move:this.moveBox,out:this.removeBox,up:this.endBox},{keyMask:this.keyMask})},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments);if(this.dragHandler){this.dragHandler.destroy();this.dragHandler=
null}},setMap:function(a){OpenLayers.Handler.prototype.setMap.apply(this,arguments);this.dragHandler&&this.dragHandler.setMap(a)},startBox:function(){this.callback("start",[]);this.zoomBox=OpenLayers.Util.createDiv("zoomBox",new OpenLayers.Pixel(-9999,-9999));this.zoomBox.className=this.boxDivClassName;this.zoomBox.style.zIndex=this.map.Z_INDEX_BASE.Popup-1;this.map.eventsDiv.appendChild(this.zoomBox);OpenLayers.Element.addClass(this.map.eventsDiv,"olDrawBox")},moveBox:function(a){var b=this.dragHandler.start.x,
c=this.dragHandler.start.y,e=Math.abs(b-a.x),h=Math.abs(c-a.y),j=this.getBoxOffsets();this.zoomBox.style.width=e+j.width+1+"px";this.zoomBox.style.height=h+j.height+1+"px";this.zoomBox.style.left=(a.x<b?b-e-j.left:b-j.left)+"px";this.zoomBox.style.top=(a.y<c?c-h-j.top:c-j.top)+"px"},endBox:function(a){if(Math.abs(this.dragHandler.start.x-a.x)>5||Math.abs(this.dragHandler.start.y-a.y)>5){var b=this.dragHandler.start,c=Math.min(b.y,a.y),e=Math.max(b.y,a.y);a=new OpenLayers.Bounds(Math.min(b.x,a.x),
e,Math.max(b.x,a.x),c)}else a=this.dragHandler.start.clone();this.removeBox();this.callback("done",[a])},removeBox:function(){this.map.eventsDiv.removeChild(this.zoomBox);this.boxOffsets=this.zoomBox=null;OpenLayers.Element.removeClass(this.map.eventsDiv,"olDrawBox")},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.dragHandler.activate();return true}else return false},deactivate:function(){if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.dragHandler.deactivate()&&
this.zoomBox&&this.removeBox();return true}else return false},getBoxOffsets:function(){if(!this.boxOffsets){var a=document.createElement("div");a.style.position="absolute";a.style.border="1px solid black";a.style.width="3px";document.body.appendChild(a);var b=a.clientWidth==3;document.body.removeChild(a);a=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-left-width"));var c=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-right-width")),e=parseInt(OpenLayers.Element.getStyle(this.zoomBox,
"border-top-width")),h=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-bottom-width"));this.boxOffsets={left:a,right:c,top:e,bottom:h,width:b===false?a+c:0,height:b===false?e+h:0}}return this.boxOffsets},CLASS_NAME:"OpenLayers.Handler.Box"});
OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:false,alwaysZoom:false,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(a){if(a instanceof OpenLayers.Bounds){var b;if(this.out){b=Math.abs(a.right-a.left);b=Math.min(this.map.size.h/Math.abs(a.top-a.bottom),this.map.size.w/b);var c=this.map.getExtent(),e=this.map.getLonLatFromPixel(a.getCenterPixel());a=e.lon-c.getWidth()/
2*b;var h=e.lon+c.getWidth()/2*b,j=e.lat-c.getHeight()/2*b;b=e.lat+c.getHeight()/2*b;b=new OpenLayers.Bounds(a,j,h,b)}else{b=this.map.getLonLatFromPixel(new OpenLayers.Pixel(a.left,a.bottom));c=this.map.getLonLatFromPixel(new OpenLayers.Pixel(a.right,a.top));b=new OpenLayers.Bounds(b.lon,b.lat,c.lon,c.lat)}c=this.map.getZoom();this.map.zoomToExtent(b);if(c==this.map.getZoom()&&this.alwaysZoom==true)this.map.zoomTo(c+(this.out?-1:1))}else this.out?this.map.setCenter(this.map.getLonLatFromPixel(a),
this.map.getZoom()-1):this.map.setCenter(this.map.getLonLatFromPixel(a),this.map.getZoom()+1)},CLASS_NAME:"OpenLayers.Control.ZoomBox"});
OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:false,interval:1,documentDrag:false,kinetic:null,enableKinetic:false,kineticInterval:10,draw:function(){if(this.enableKinetic){var a={interval:this.kineticInterval};if(typeof this.enableKinetic==="object")a=OpenLayers.Util.extend(a,this.enableKinetic);this.kinetic=new OpenLayers.Kinetic(a)}this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},
{interval:this.interval,documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(a){this.kinetic&&this.kinetic.update(a);this.panned=true;this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:true,animate:false})},panMapDone:function(a){if(this.panned){var b=null;if(this.kinetic)b=this.kinetic.end(a);this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:!!b,animate:false});if(b){var c=this;this.kinetic.move(b,function(e,
h,j){c.map.pan(e,h,{dragging:!j,animate:false})})}this.panned=false}},CLASS_NAME:"OpenLayers.Control.DragPan"});
OpenLayers.Handler.MouseWheel=OpenLayers.Class(OpenLayers.Handler,{wheelListener:null,mousePosition:null,interval:0,delta:0,cumulative:true,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments);this.wheelListener=OpenLayers.Function.bindAsEventListener(this.onWheelEvent,this)},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments);this.wheelListener=null},onWheelEvent:function(a){if(this.map&&this.checkModifiers(a)){for(var b=false,c=false,e=false,
h=OpenLayers.Event.element(a);h!=null&&!e&&!b;){if(!b)try{var j=h.currentStyle?h.currentStyle.overflow:document.defaultView.getComputedStyle(h,null).getPropertyValue("overflow");b=j&&j=="auto"||j=="scroll"}catch(n){}if(!c){e=0;for(var r=this.map.layers.length;e<r;e++)if(h==this.map.layers[e].div||h==this.map.layers[e].pane){c=true;break}}e=h==this.map.div;h=h.parentNode}if(!b&&e){b=0;if(!a)a=window.event;if(a.wheelDelta){b=a.wheelDelta/120;if(window.opera&&window.opera.version()<9.2)b=-b}else if(a.detail)b=
-a.detail/3;this.delta+=b;if(this.interval){window.clearTimeout(this._timeoutId);this._timeoutId=window.setTimeout(OpenLayers.Function.bind(function(){this.wheelZoom(a)},this),this.interval)}else this.wheelZoom(a);OpenLayers.Event.stop(a)}}},wheelZoom:function(a){var b=this.delta;this.delta=0;if(b){if(this.mousePosition)a.xy=this.mousePosition;if(!a.xy)a.xy=this.map.getPixelFromLonLat(this.map.getCenter());b<0?this.callback("down",[a,this.cumulative?b:-1]):this.callback("up",[a,this.cumulative?b:
1])}},mousemove:function(a){this.mousePosition=a.xy},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){var a=this.wheelListener;OpenLayers.Event.observe(window,"DOMMouseScroll",a);OpenLayers.Event.observe(window,"mousewheel",a);OpenLayers.Event.observe(document,"mousewheel",a);return true}else return false},deactivate:function(){if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){var a=this.wheelListener;OpenLayers.Event.stopObserving(window,"DOMMouseScroll",
a);OpenLayers.Event.stopObserving(window,"mousewheel",a);OpenLayers.Event.stopObserving(document,"mousewheel",a);return true}else return false},CLASS_NAME:"OpenLayers.Handler.MouseWheel"});
OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:true,"double":false,pixelTolerance:0,dblclickTolerance:13,stopSingle:false,stopDouble:false,timerId:null,touch:false,down:null,last:null,first:null,rightclickTimerId:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments)},touchstart:function(a){if(!this.touch){this.unregisterMouseListeners();this.touch=true}this.down=this.getEventInfo(a);this.last=this.getEventInfo(a);return true},touchmove:function(a){this.last=
this.getEventInfo(a);return true},touchend:function(a){if(this.down){a.xy=this.last.xy;a.lastTouches=this.last.touches;this.handleSingle(a);this.down=null}return true},unregisterMouseListeners:function(){this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,click:this.click,dblclick:this.dblclick,scope:this})},mousedown:function(a){this.down=this.getEventInfo(a);this.last=this.getEventInfo(a);return true},mouseup:function(a){var b=true;if(this.checkModifiers(a)&&this.control.handleRightClicks&&
OpenLayers.Event.isRightClick(a))b=this.rightclick(a);return b},rightclick:function(a){if(this.passesTolerance(a))if(this.rightclickTimerId!=null){this.clearTimer();this.callback("dblrightclick",[a]);return!this.stopDouble}else{a=this["double"]?OpenLayers.Util.extend({},a):this.callback("rightclick",[a]);a=OpenLayers.Function.bind(this.delayedRightCall,this,a);this.rightclickTimerId=window.setTimeout(a,this.delay)}return!this.stopSingle},delayedRightCall:function(a){this.rightclickTimerId=null;a&&
this.callback("rightclick",[a])},click:function(a){if(!this.last)this.last=this.getEventInfo(a);this.handleSingle(a);return!this.stopSingle},dblclick:function(a){this.handleDouble(a);return!this.stopDouble},handleDouble:function(a){this["double"]&&this.passesDblclickTolerance(a)&&this.callback("dblclick",[a])},handleSingle:function(a){if(this.passesTolerance(a))if(this.timerId!=null){if(this.last.touches&&this.last.touches.length===1){this["double"]&&OpenLayers.Event.stop(a);this.handleDouble(a)}if(!this.last.touches||
this.last.touches.length!==2)this.clearTimer()}else{this.first=this.getEventInfo(a);this.queuePotentialClick(this.single?OpenLayers.Util.extend({},a):null)}},queuePotentialClick:function(a){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,a),this.delay)},passesTolerance:function(a){var b=true;if(this.pixelTolerance!=null&&this.down&&this.down.xy)if((b=this.pixelTolerance>=this.down.xy.distanceTo(a.xy))&&this.touch&&this.down.touches.length===this.last.touches.length){a=
0;for(var c=this.down.touches.length;a<c;++a)if(this.getTouchDistance(this.down.touches[a],this.last.touches[a])>this.pixelTolerance){b=false;break}}return b},getTouchDistance:function(a,b){return Math.sqrt(Math.pow(a.clientX-b.clientX,2)+Math.pow(a.clientY-b.clientY,2))},passesDblclickTolerance:function(){var a=true;if(this.down&&this.first)a=this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance;return a},clearTimer:function(){if(this.timerId!=null){window.clearTimeout(this.timerId);this.timerId=
null}if(this.rightclickTimerId!=null){window.clearTimeout(this.rightclickTimerId);this.rightclickTimerId=null}},delayedCall:function(a){this.timerId=null;a&&this.callback("click",[a])},getEventInfo:function(a){var b;if(a.touches){var c=a.touches.length;b=Array(c);for(var e,h=0;h<c;h++){e=a.touches[h];b[h]={clientX:e.clientX,clientY:e.clientY}}}return{xy:a.xy,touches:b}},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.clearTimer();this.last=
this.first=this.down=null;this.touch=false;a=true}return a},CLASS_NAME:"OpenLayers.Handler.Click"});
OpenLayers.Control.Navigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,documentDrag:false,zoomBox:null,zoomBoxEnabled:true,zoomWheelEnabled:true,mouseWheelOptions:null,handleRightClicks:false,zoomBoxKeyMask:OpenLayers.Handler.MOD_SHIFT,autoActivate:true,initialize:function(){this.handlers={};OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate();this.dragPan&&this.dragPan.destroy();this.dragPan=
null;this.zoomBox&&this.zoomBox.destroy();this.zoomBox=null;this.pinchZoom&&this.pinchZoom.destroy();this.pinchZoom=null;OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){this.dragPan.activate();this.zoomWheelEnabled&&this.handlers.wheel.activate();this.handlers.click.activate();this.zoomBoxEnabled&&this.zoomBox.activate();this.pinchZoom&&this.pinchZoom.activate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){this.pinchZoom&&
this.pinchZoom.deactivate();this.zoomBox.deactivate();this.dragPan.deactivate();this.handlers.click.deactivate();this.handlers.wheel.deactivate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},draw:function(){if(this.handleRightClicks)this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False;this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick},{"double":true,stopDouble:true});
this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions));this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask});this.dragPan.draw();this.zoomBox.draw();this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},this.mouseWheelOptions);if(OpenLayers.Control.PinchZoom)this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},
this.pinchZoomOptions))},defaultClick:function(a){a.lastTouches&&a.lastTouches.length==2&&this.map.zoomOut()},defaultDblClick:function(a){this.map.setCenter(this.map.getLonLatFromViewPortPx(a.xy),this.map.zoom+1)},defaultDblRightClick:function(a){this.map.setCenter(this.map.getLonLatFromViewPortPx(a.xy),this.map.zoom-1)},wheelChange:function(a,b){var c=this.map.getZoom(),e=this.map.getZoom()+Math.round(b);e=Math.max(e,0);e=Math.min(e,this.map.getNumZoomLevels());if(e!==c){var h=this.map.getSize();
c=h.w/2-a.xy.x;h=a.xy.y-h.h/2;var j=this.map.baseLayer.getResolutionForZoom(e),n=this.map.getLonLatFromPixel(a.xy);this.map.setCenter(new OpenLayers.LonLat(n.lon+c*j,n.lat+h*j),e)}},wheelUp:function(a,b){this.wheelChange(a,b||1)},wheelDown:function(a,b){this.wheelChange(a,b||-1)},disableZoomBox:function(){this.zoomBoxEnabled=false;this.zoomBox.deactivate()},enableZoomBox:function(){this.zoomBoxEnabled=true;this.active&&this.zoomBox.activate()},disableZoomWheel:function(){this.zoomWheelEnabled=false;
this.handlers.wheel.deactivate()},enableZoomWheel:function(){this.zoomWheelEnabled=true;this.active&&this.handlers.wheel.activate()},CLASS_NAME:"OpenLayers.Control.Navigation"});OpenLayers.Filter=OpenLayers.Class({initialize:function(a){OpenLayers.Util.extend(this,a)},destroy:function(){},evaluate:function(){return true},clone:function(){return null},CLASS_NAME:"OpenLayers.Filter"});
OpenLayers.Handler.Feature=OpenLayers.Class(OpenLayers.Handler,{EVENTMAP:{click:{"in":"click",out:"clickout"},mousemove:{"in":"over",out:"out"},dblclick:{"in":"dblclick",out:null},mousedown:{"in":null,out:null},mouseup:{"in":null,out:null},touchstart:{"in":"click",out:"clickout"}},feature:null,lastFeature:null,down:null,up:null,touch:false,clickTolerance:4,geometryTypes:null,stopClick:true,stopDown:true,stopUp:false,initialize:function(a,b,c,e){OpenLayers.Handler.prototype.initialize.apply(this,[a,
c,e]);this.layer=b},touchstart:function(a){if(!this.touch){this.touch=true;this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,dblclick:this.dblclick,scope:this})}return OpenLayers.Event.isMultiTouch(a)?true:this.mousedown(a)},touchmove:function(a){OpenLayers.Event.stop(a)},mousedown:function(a){this.down=a.xy;return this.handle(a)?!this.stopDown:true},mouseup:function(a){this.up=a.xy;return this.handle(a)?!this.stopUp:true},click:function(a){return this.handle(a)?
!this.stopClick:true},mousemove:function(a){if(!this.callbacks.over&&!this.callbacks.out)return true;this.handle(a);return true},dblclick:function(a){return!this.handle(a)},geometryTypeMatches:function(a){return this.geometryTypes==null||OpenLayers.Util.indexOf(this.geometryTypes,a.geometry.CLASS_NAME)>-1},handle:function(a){if(this.feature&&!this.feature.layer)this.feature=null;var b=a.type,c=false,e=!!this.feature,h=b=="click"||b=="dblclick"||b=="touchstart";if((this.feature=this.layer.getFeatureFromEvent(a))&&
!this.feature.layer)this.feature=null;if(this.lastFeature&&!this.lastFeature.layer)this.lastFeature=null;if(this.feature){b==="touchstart"&&OpenLayers.Event.stop(a);a=this.feature!=this.lastFeature;if(this.geometryTypeMatches(this.feature)){if(e&&a){this.lastFeature&&this.triggerCallback(b,"out",[this.lastFeature]);this.triggerCallback(b,"in",[this.feature])}else if(!e||h)this.triggerCallback(b,"in",[this.feature]);this.lastFeature=this.feature;c=true}else{if(this.lastFeature&&(e&&a||h))this.triggerCallback(b,
"out",[this.lastFeature]);this.feature=null}}else if(this.lastFeature&&(e||h))this.triggerCallback(b,"out",[this.lastFeature]);return c},triggerCallback:function(a,b,c){if(b=this.EVENTMAP[a][b])if(a=="click"&&this.up&&this.down)Math.sqrt(Math.pow(this.up.x-this.down.x,2)+Math.pow(this.up.y-this.down.y,2))<=this.clickTolerance&&this.callback(b,c);else this.callback(b,c)},activate:function(){var a=false;if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.moveLayerToTop();this.map.events.on({removelayer:this.handleMapEvents,
changelayer:this.handleMapEvents,scope:this});a=true}return a},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.moveLayerBack();this.up=this.down=this.lastFeature=this.feature=null;this.touch=false;this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this});a=true}return a},handleMapEvents:function(a){if(a.type=="removelayer"||a.property=="order")this.moveLayerToTop()},moveLayerToTop:function(){this.layer.setZIndex(Math.max(this.map.Z_INDEX_BASE.Feature-
1,this.layer.getZIndex())+1)},moveLayerBack:function(){var a=this.layer.getZIndex()-1;a>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(a):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Handler.Feature"});
OpenLayers.Handler.Point=OpenLayers.Class(OpenLayers.Handler,{point:null,layer:null,multi:false,mouseDown:false,stoppedDown:null,lastDown:null,lastUp:null,persist:false,stopDown:false,stopUp:false,layerOptions:null,pixelTolerance:5,touch:false,lastTouchPx:null,initialize:function(a,b,c){if(!(c&&c.layerOptions&&c.layerOptions.styleMap))this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style["default"],{});OpenLayers.Handler.prototype.initialize.apply(this,arguments)},activate:function(){if(!OpenLayers.Handler.prototype.activate.apply(this,
arguments))return false;var a=OpenLayers.Util.extend({displayInLayerSwitcher:false,calculateInRange:OpenLayers.Function.True},this.layerOptions);this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,a);this.map.addLayer(this.layer);return true},createFeature:function(a){a=this.map.getLonLatFromPixel(a);a=new OpenLayers.Geometry.Point(a.lon,a.lat);this.point=new OpenLayers.Feature.Vector(a);this.callback("create",[this.point.geometry,this.point]);this.point.geometry.clearBounds();this.layer.addFeatures([this.point],
{silent:true})},deactivate:function(){if(!OpenLayers.Handler.prototype.deactivate.apply(this,arguments))return false;this.cancel();if(this.layer.map!=null){this.destroyFeature(true);this.layer.destroy(false)}this.layer=null;this.touch=false;return true},destroyFeature:function(a){if(this.layer&&(a||!this.persist))this.layer.destroyFeatures();this.point=null},destroyPersistedFeature:function(){var a=this.layer;a&&a.features.length>1&&this.layer.features[0].destroy()},finalize:function(a){var b=a?"cancel":
"done";this.mouseDown=false;this.lastTouchPx=this.lastUp=this.lastDown=null;this.callback(b,[this.geometryClone()]);this.destroyFeature(a)},cancel:function(){this.finalize(true)},click:function(a){OpenLayers.Event.stop(a);return false},dblclick:function(a){OpenLayers.Event.stop(a);return false},modifyFeature:function(a){this.point||this.createFeature(a);a=this.map.getLonLatFromPixel(a);this.point.geometry.x=a.lon;this.point.geometry.y=a.lat;this.callback("modify",[this.point.geometry,this.point,false]);
this.point.geometry.clearBounds();this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.point,this.style)},getGeometry:function(){var a=this.point&&this.point.geometry;if(a&&this.multi)a=new OpenLayers.Geometry.MultiPoint([a]);return a},geometryClone:function(){var a=this.getGeometry();return a&&a.clone()},mousedown:function(a){return this.down(a)},touchstart:function(a){if(!this.touch){this.touch=true;this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,
click:this.click,dblclick:this.dblclick,scope:this})}this.lastTouchPx=a.xy;return this.down(a)},mousemove:function(a){return this.move(a)},touchmove:function(a){this.lastTouchPx=a.xy;return this.move(a)},mouseup:function(a){return this.up(a)},touchend:function(a){a.xy=this.lastTouchPx;return this.up(a)},down:function(a){this.mouseDown=true;this.lastDown=a.xy;this.touch||this.modifyFeature(a.xy);this.stoppedDown=this.stopDown;return!this.stopDown},move:function(a){if(!this.touch&&(!this.mouseDown||
this.stoppedDown))this.modifyFeature(a.xy);return true},up:function(a){this.mouseDown=false;this.stoppedDown=this.stopDown;if(!this.checkModifiers(a))return true;if(this.lastUp&&this.lastUp.equals(a.xy))return true;if(this.lastDown&&this.passesTolerance(this.lastDown,a.xy,this.pixelTolerance)){this.touch&&this.modifyFeature(a.xy);this.persist&&this.destroyPersistedFeature();this.lastUp=a.xy;this.finalize();return!this.stopUp}else return true},mouseout:function(a){if(OpenLayers.Util.mouseLeft(a,this.map.eventsDiv)){this.stoppedDown=
this.stopDown;this.mouseDown=false}},passesTolerance:function(a,b,c){var e=true;if(c!=null&&a&&b)if(a.distanceTo(b)>c)e=false;return e},CLASS_NAME:"OpenLayers.Handler.Point"});
OpenLayers.Renderer=OpenLayers.Class({container:null,root:null,extent:null,locked:false,size:null,resolution:null,map:null,initialize:function(a,b){this.container=OpenLayers.Util.getElement(a);OpenLayers.Util.extend(this,b)},destroy:function(){this.map=this.resolution=this.size=this.extent=this.container=null},supported:function(){return false},setExtent:function(a,b){this.extent=a.clone();if(b)this.resolution=null},setSize:function(a){this.size=a.clone();this.resolution=null},getResolution:function(){return this.resolution=
this.resolution||this.map.getResolution()},drawFeature:function(a,b){if(b==null)b=a.style;if(a.geometry){var c=a.geometry.getBounds();if(c){c.intersectsBounds(this.extent)||(b={display:"none"});c=this.drawGeometry(a.geometry,b,a.id);if(b.display!="none"&&b.label&&c!==false){var e=a.geometry.getCentroid();if(b.labelXOffset||b.labelYOffset){var h=isNaN(b.labelXOffset)?0:b.labelXOffset,j=isNaN(b.labelYOffset)?0:b.labelYOffset,n=this.getResolution();e.move(h*n,j*n)}this.drawText(a.id,b,e)}else this.removeText(a.id);
return c}}},drawGeometry:function(){},drawText:function(){},removeText:function(){},clear:function(){},getFeatureIdFromEvent:function(){},eraseFeatures:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=0,c=a.length;b<c;++b){var e=a[b];this.eraseGeometry(e.geometry,e.id);this.removeText(e.id)}},eraseGeometry:function(){},moveRoot:function(){},getRenderLayerId:function(){return this.container.id},applyDefaultSymbolizer:function(a){var b=OpenLayers.Util.extend({},OpenLayers.Renderer.defaultSymbolizer);
if(a.stroke===false){delete b.strokeWidth;delete b.strokeColor}a.fill===false&&delete b.fillColor;OpenLayers.Util.extend(b,a);return b},CLASS_NAME:"OpenLayers.Renderer"});OpenLayers.Renderer.defaultSymbolizer={fillColor:"#000000",strokeColor:"#000000",strokeWidth:2,fillOpacity:1,strokeOpacity:1,pointRadius:0};
OpenLayers.StyleMap=OpenLayers.Class({styles:null,extendDefault:true,initialize:function(a,b){this.styles={"default":new OpenLayers.Style(OpenLayers.Feature.Vector.style["default"]),select:new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),temporary:new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),"delete":new OpenLayers.Style(OpenLayers.Feature.Vector.style["delete"])};if(a instanceof OpenLayers.Style){this.styles["default"]=a;this.styles.select=a;this.styles.temporary=a;
this.styles["delete"]=a}else if(typeof a=="object")for(var c in a)if(a[c]instanceof OpenLayers.Style)this.styles[c]=a[c];else if(typeof a[c]=="object")this.styles[c]=new OpenLayers.Style(a[c]);else{this.styles["default"]=new OpenLayers.Style(a);this.styles.select=new OpenLayers.Style(a);this.styles.temporary=new OpenLayers.Style(a);this.styles["delete"]=new OpenLayers.Style(a);break}OpenLayers.Util.extend(this,b)},destroy:function(){for(var a in this.styles)this.styles[a].destroy();this.styles=null},
createSymbolizer:function(a,b){a||(a=new OpenLayers.Feature.Vector);this.styles[b]||(b="default");a.renderIntent=b;var c={};if(this.extendDefault&&b!="default")c=this.styles["default"].createSymbolizer(a);return OpenLayers.Util.extend(c,this.styles[b].createSymbolizer(a))},addUniqueValueRules:function(a,b,c,e){var h=[];for(var j in c)h.push(new OpenLayers.Rule({symbolizer:c[j],context:e,filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:b,value:j})}));this.styles[a].addRules(h)},
CLASS_NAME:"OpenLayers.StyleMap"});
OpenLayers.Layer.Vector=OpenLayers.Class(OpenLayers.Layer,{EVENT_TYPES:["beforefeatureadded","beforefeaturesadded","featureadded","featuresadded","beforefeatureremoved","beforefeaturesremoved","featureremoved","featuresremoved","beforefeatureselected","featureselected","featureunselected","beforefeaturemodified","featuremodified","afterfeaturemodified","vertexmodified","vertexremoved","sketchstarted","sketchmodified","sketchcomplete","refresh"],isBaseLayer:false,isFixed:false,features:null,filter:null,
selectedFeatures:null,unrenderedFeatures:null,reportError:true,style:null,styleMap:null,strategies:null,protocol:null,renderers:["SVG","VML","Canvas"],renderer:null,rendererOptions:null,geometryType:null,drawn:false,initialize:function(){this.EVENT_TYPES=OpenLayers.Layer.Vector.prototype.EVENT_TYPES.concat(OpenLayers.Layer.prototype.EVENT_TYPES);OpenLayers.Layer.prototype.initialize.apply(this,arguments);if(!this.renderer||!this.renderer.supported())this.assignRenderer();if(!this.renderer||!this.renderer.supported()){this.renderer=
null;this.displayError()}if(!this.styleMap)this.styleMap=new OpenLayers.StyleMap;this.features=[];this.selectedFeatures=[];this.unrenderedFeatures={};if(this.strategies)for(var a=0,b=this.strategies.length;a<b;a++)this.strategies[a].setLayer(this)},destroy:function(){if(this.strategies){var a,b,c;b=0;for(c=this.strategies.length;b<c;b++){a=this.strategies[b];a.autoDestroy&&a.destroy()}this.strategies=null}if(this.protocol){this.protocol.autoDestroy&&this.protocol.destroy();this.protocol=null}this.destroyFeatures();
this.unrenderedFeatures=this.selectedFeatures=this.features=null;this.renderer&&this.renderer.destroy();this.drawn=this.geometryType=this.renderer=null;OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(a){if(a==null)a=new OpenLayers.Layer.Vector(this.name,this.getOptions());a=OpenLayers.Layer.prototype.clone.apply(this,[a]);for(var b=this.features,c=b.length,e=Array(c),h=0;h<c;++h)e[h]=b[h].clone();a.features=e;return a},refresh:function(a){this.calculateInRange()&&this.visibility&&
this.events.triggerEvent("refresh",a)},assignRenderer:function(){for(var a=0,b=this.renderers.length;a<b;a++){var c=this.renderers[a];if((c=typeof c=="function"?c:OpenLayers.Renderer[c])&&c.prototype.supported()){this.renderer=new c(this.div,this.rendererOptions);break}}},displayError:function(){this.reportError&&OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported",{renderers:this.renderers.join("\n")}))},setMap:function(){OpenLayers.Layer.prototype.setMap.apply(this,arguments);if(this.renderer){this.renderer.map=
this.map;this.renderer.setSize(this.map.getSize())}else this.map.removeLayer(this)},afterAdd:function(){if(this.strategies){var a,b,c;b=0;for(c=this.strategies.length;b<c;b++){a=this.strategies[b];a.autoActivate&&a.activate()}}},removeMap:function(){this.drawn=false;if(this.strategies){var a,b,c;b=0;for(c=this.strategies.length;b<c;b++){a=this.strategies[b];a.autoActivate&&a.deactivate()}}},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.apply(this,arguments);this.renderer.setSize(this.map.getSize())},
moveTo:function(a,b,c){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var e=OpenLayers.Renderer.NG&&this.renderer instanceof OpenLayers.Renderer.NG;if(e)c||this.renderer.updateDimensions(b);else{var h=true;if(!c){this.renderer.root.style.visibility="hidden";this.div.style.left=-parseInt(this.map.layerContainerDiv.style.left)+"px";this.div.style.top=-parseInt(this.map.layerContainerDiv.style.top)+"px";h=this.renderer.setExtent(this.map.getExtent(),b);this.renderer.root.style.visibility="visible";
if(OpenLayers.IS_GECKO===true)this.div.scrollLeft=this.div.scrollLeft;if(!b&&h)for(var j in this.unrenderedFeatures){var n=this.unrenderedFeatures[j];this.drawFeature(n)}}}if(!this.drawn||!e&&(b||!h)){this.drawn=true;j=0;for(e=this.features.length;j<e;j++){this.renderer.locked=j!==e-1;n=this.features[j];this.drawFeature(n)}}},redraw:function(){if(OpenLayers.Renderer.NG&&this.renderer instanceof OpenLayers.Renderer.NG)this.drawn=false;return OpenLayers.Layer.prototype.redraw.apply(this,arguments)},
display:function(){OpenLayers.Layer.prototype.display.apply(this,arguments);var a=this.div.style.display;if(a!=this.renderer.root.style.display)this.renderer.root.style.display=a},addFeatures:function(a,b){OpenLayers.Util.isArray(a)||(a=[a]);var c=!b||!b.silent;if(c){var e={features:a};if(this.events.triggerEvent("beforefeaturesadded",e)===false)return;a=e.features}e=[];for(var h=0,j=a.length;h<j;h++){this.renderer.locked=h!=a.length-1?true:false;var n=a[h];if(this.geometryType&&!(n.geometry instanceof
this.geometryType))throw OpenLayers.i18n("componentShouldBe",{geomType:this.geometryType.prototype.CLASS_NAME});n.layer=this;if(!n.style&&this.style)n.style=OpenLayers.Util.extend({},this.style);if(c){if(this.events.triggerEvent("beforefeatureadded",{feature:n})===false)continue;this.preFeatureInsert(n)}e.push(n);this.features.push(n);this.drawFeature(n);if(c){this.events.triggerEvent("featureadded",{feature:n});this.onFeatureInsert(n)}}c&&this.events.triggerEvent("featuresadded",{features:e})},removeFeatures:function(a,
b){if(!(!a||a.length===0)){if(a===this.features)return this.removeAllFeatures(b);OpenLayers.Util.isArray(a)||(a=[a]);if(a===this.selectedFeatures)a=a.slice();var c=!b||!b.silent;c&&this.events.triggerEvent("beforefeaturesremoved",{features:a});for(var e=a.length-1;e>=0;e--){this.renderer.locked=e!=0&&a[e-1].geometry?true:false;var h=a[e];delete this.unrenderedFeatures[h.id];c&&this.events.triggerEvent("beforefeatureremoved",{feature:h});this.features=OpenLayers.Util.removeItem(this.features,h);h.layer=
null;h.geometry&&this.renderer.eraseFeatures(h);OpenLayers.Util.indexOf(this.selectedFeatures,h)!=-1&&OpenLayers.Util.removeItem(this.selectedFeatures,h);c&&this.events.triggerEvent("featureremoved",{feature:h})}c&&this.events.triggerEvent("featuresremoved",{features:a})}},removeAllFeatures:function(a){a=!a||!a.silent;var b=this.features;a&&this.events.triggerEvent("beforefeaturesremoved",{features:b});for(var c,e=b.length-1;e>=0;e--){c=b[e];a&&this.events.triggerEvent("beforefeatureremoved",{feature:c});
c.layer=null;a&&this.events.triggerEvent("featureremoved",{feature:c})}this.renderer.clear();this.features=[];this.unrenderedFeatures={};this.selectedFeatures=[];a&&this.events.triggerEvent("featuresremoved",{features:b})},destroyFeatures:function(a,b){if(a==undefined)a=this.features;if(a){this.removeFeatures(a,b);for(var c=a.length-1;c>=0;c--)a[c].destroy()}},drawFeature:function(a,b){if(this.drawn){if(typeof b!="object"){if(!b&&a.state===OpenLayers.State.DELETE)b="delete";var c=b||a.renderIntent;
(b=a.style||this.style)||(b=this.styleMap.createSymbolizer(a,c))}c=this.renderer.drawFeature(a,b);if(c===false||c===null)this.unrenderedFeatures[a.id]=a;else delete this.unrenderedFeatures[a.id]}},eraseFeatures:function(a){this.renderer.eraseFeatures(a)},getFeatureFromEvent:function(a){if(!this.renderer){OpenLayers.Console.error(OpenLayers.i18n("getFeatureError"));return null}var b=null;if(a=this.renderer.getFeatureIdFromEvent(a))b=typeof a==="string"?this.getFeatureById(a):a;return b},getFeatureBy:function(a,
b){for(var c=null,e=0,h=this.features.length;e<h;++e)if(this.features[e][a]==b){c=this.features[e];break}return c},getFeatureById:function(a){return this.getFeatureBy("id",a)},getFeatureByFid:function(a){return this.getFeatureBy("fid",a)},getFeaturesByAttribute:function(a,b){var c,e,h=this.features.length,j=[];for(c=0;c<h;c++)(e=this.features[c])&&e.attributes&&e.attributes[a]===b&&j.push(e);return j},onFeatureInsert:function(){},preFeatureInsert:function(){},getDataExtent:function(){var a=null,b=
this.features;if(b&&b.length>0)for(var c=null,e=0,h=b.length;e<h;e++)if(c=b[e].geometry){if(a===null)a=new OpenLayers.Bounds;a.extend(c.getBounds())}return a},CLASS_NAME:"OpenLayers.Layer.Vector"});
OpenLayers.Layer.Vector.RootContainer=OpenLayers.Class(OpenLayers.Layer.Vector,{displayInLayerSwitcher:false,layers:null,initialize:function(){OpenLayers.Layer.Vector.prototype.initialize.apply(this,arguments)},display:function(){},getFeatureFromEvent:function(a){for(var b=this.layers,c,e=0;e<b.length;e++)if(c=b[e].getFeatureFromEvent(a))return c},setMap:function(a){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments);this.collectRoots();a.events.register("changelayer",this,this.handleChangeLayer)},
removeMap:function(a){a.events.unregister("changelayer",this,this.handleChangeLayer);this.resetRoots();OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},collectRoots:function(){for(var a,b=0;b<this.map.layers.length;++b){a=this.map.layers[b];OpenLayers.Util.indexOf(this.layers,a)!=-1&&a.renderer.moveRoot(this.renderer)}},resetRoots:function(){for(var a,b=0;b<this.layers.length;++b){a=this.layers[b];this.renderer&&a.renderer.getRenderLayerId()==this.id&&this.renderer.moveRoot(a.renderer)}},
handleChangeLayer:function(a){var b=a.layer;if(a.property=="order"&&OpenLayers.Util.indexOf(this.layers,b)!=-1){this.resetRoots();this.collectRoots()}},CLASS_NAME:"OpenLayers.Layer.Vector.RootContainer"});
OpenLayers.Filter.Logical=OpenLayers.Class(OpenLayers.Filter,{filters:null,type:null,initialize:function(a){this.filters=[];OpenLayers.Filter.prototype.initialize.apply(this,[a])},destroy:function(){this.filters=null;OpenLayers.Filter.prototype.destroy.apply(this)},evaluate:function(a){var b,c;switch(this.type){case OpenLayers.Filter.Logical.AND:b=0;for(c=this.filters.length;b<c;b++)if(this.filters[b].evaluate(a)==false)return false;return true;case OpenLayers.Filter.Logical.OR:b=0;for(c=this.filters.length;b<
c;b++)if(this.filters[b].evaluate(a)==true)return true;return false;case OpenLayers.Filter.Logical.NOT:return!this.filters[0].evaluate(a)}},clone:function(){for(var a=[],b=0,c=this.filters.length;b<c;++b)a.push(this.filters[b].clone());return new OpenLayers.Filter.Logical({type:this.type,filters:a})},CLASS_NAME:"OpenLayers.Filter.Logical"});OpenLayers.Filter.Logical.AND="&&";OpenLayers.Filter.Logical.OR="||";OpenLayers.Filter.Logical.NOT="!";
OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:false,stopDown:false,pinching:false,last:null,start:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments)},touchstart:function(a){var b=true;this.pinching=false;if(OpenLayers.Event.isMultiTouch(a)){this.started=true;this.last=this.start={distance:this.getDistance(a.touches),delta:0,scale:1};this.callback("start",[a,this.start]);b=!this.stopDown}else{this.started=false;this.last=this.start=null}OpenLayers.Event.stop(a);
return b},touchmove:function(a){if(this.started&&OpenLayers.Event.isMultiTouch(a)){this.pinching=true;var b=this.getPinchData(a);this.callback("move",[a,b]);this.last=b;OpenLayers.Event.stop(a)}return true},touchend:function(a){if(this.started){this.pinching=this.started=false;this.callback("done",[a,this.start,this.last]);this.last=this.start=null}return true},activate:function(){var a=false;if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.pinching=false;a=true}return a},deactivate:function(){var a=
false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.pinching=this.started=false;this.last=this.start=null;a=true}return a},getDistance:function(a){var b=a[0];a=a[1];return Math.sqrt(Math.pow(b.clientX-a.clientX,2)+Math.pow(b.clientY-a.clientY,2))},getPinchData:function(a){a=this.getDistance(a.touches);return{distance:a,delta:this.last.distance-a,scale:a/this.start.distance}},CLASS_NAME:"OpenLayers.Handler.Pinch"});
OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,containerOrigin:null,pinchOrigin:null,currentCenter:null,autoActivate:true,initialize:function(){OpenLayers.Control.prototype.initialize.apply(this,arguments);this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},activate:function(){var a=OpenLayers.Control.prototype.activate.apply(this,arguments);if(a){this.map.events.on({moveend:this.updateContainerOrigin,
scope:this});this.updateContainerOrigin()}return a},deactivate:function(){var a=OpenLayers.Control.prototype.deactivate.apply(this,arguments);this.map&&this.map.events&&this.map.events.un({moveend:this.updateContainerOrigin,scope:this});return a},updateContainerOrigin:function(){var a=this.map.layerContainerDiv;this.containerOrigin={x:parseInt(a.style.left,10),y:parseInt(a.style.top,10)}},pinchStart:function(a){this.currentCenter=this.pinchOrigin=a.xy},pinchMove:function(a,b){var c=b.scale,e=this.containerOrigin,
h=this.pinchOrigin,j=a.xy;this.applyTransform("translate("+Math.round(j.x-h.x+(c-1)*(e.x-h.x))+"px, "+Math.round(j.y-h.y+(c-1)*(e.y-h.y))+"px) scale("+c+")");this.currentCenter=j},applyTransform:function(a){var b=this.map.layerContainerDiv.style;b["-webkit-transform"]=a;b["-moz-transform"]=a},pinchDone:function(a,b,c){this.applyTransform("");a=this.map.getZoomForResolution(this.map.getResolution()/c.scale,true);if(a!==this.map.getZoom()||!this.currentCenter.equals(this.pinchOrigin)){b=this.map.getResolutionForZoom(a);
c=this.map.getLonLatFromPixel(this.pinchOrigin);var e=this.currentCenter,h=this.map.getSize();c.lon+=b*(h.w/2-e.x);c.lat-=b*(h.h/2-e.y);this.map.setCenter(c,a)}},CLASS_NAME:"OpenLayers.Control.PinchZoom"});
OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:false,autoActivate:true,initialize:function(){this.handlers={};OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate();this.dragPan&&this.dragPan.destroy();this.dragPan=null;if(this.pinchZoom){this.pinchZoom.destroy();delete this.pinchZoom}OpenLayers.Control.prototype.destroy.apply(this,
arguments)},activate:function(){if(OpenLayers.Control.prototype.activate.apply(this,arguments)){this.dragPan.activate();this.handlers.click.activate();this.pinchZoom.activate();return true}return false},deactivate:function(){if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){this.dragPan.deactivate();this.handlers.click.deactivate();this.pinchZoom.deactivate();return true}return false},draw:function(){var a={click:this.defaultClick,dblclick:this.defaultDblClick},b=OpenLayers.Util.extend({"double":true,
stopDouble:true,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,a,b);this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions));this.dragPan.draw();this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(a){a.lastTouches&&a.lastTouches.length==2&&this.map.zoomOut()},defaultDblClick:function(a){this.map.setCenter(this.map.getLonLatFromViewPortPx(a.xy),
this.map.zoom+1)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"});
OpenLayers.Filter.Spatial=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,distance:null,distanceUnits:null,initialize:function(a){OpenLayers.Filter.prototype.initialize.apply(this,[a])},evaluate:function(a){var b=false;switch(this.type){case OpenLayers.Filter.Spatial.BBOX:case OpenLayers.Filter.Spatial.INTERSECTS:if(a.geometry){var c=this.value;if(this.value.CLASS_NAME=="OpenLayers.Bounds")c=this.value.toGeometry();if(a.geometry.intersects(c))b=true}break;default:OpenLayers.Console.error(OpenLayers.i18n("filterEvaluateNotImplemented"));
break}return b},clone:function(){var a=OpenLayers.Util.applyDefaults({value:this.value&&this.value.clone&&this.value.clone()},this);return new OpenLayers.Filter.Spatial(a)},CLASS_NAME:"OpenLayers.Filter.Spatial"});OpenLayers.Filter.Spatial.BBOX="BBOX";OpenLayers.Filter.Spatial.INTERSECTS="INTERSECTS";OpenLayers.Filter.Spatial.DWITHIN="DWITHIN";OpenLayers.Filter.Spatial.WITHIN="WITHIN";OpenLayers.Filter.Spatial.CONTAINS="CONTAINS";
OpenLayers.Filter.Comparison=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,matchCase:true,lowerBoundary:null,upperBoundary:null,initialize:function(a){OpenLayers.Filter.prototype.initialize.apply(this,[a]);if(this.type===OpenLayers.Filter.Comparison.LIKE&&a.matchCase===undefined)this.matchCase=null},evaluate:function(a){if(a instanceof OpenLayers.Feature.Vector)a=a.attributes;var b=false;a=a[this.property];switch(this.type){case OpenLayers.Filter.Comparison.EQUAL_TO:b=this.value;
b=!this.matchCase&&typeof a=="string"&&typeof b=="string"?a.toUpperCase()==b.toUpperCase():a==b;break;case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:b=this.value;b=!this.matchCase&&typeof a=="string"&&typeof b=="string"?a.toUpperCase()!=b.toUpperCase():a!=b;break;case OpenLayers.Filter.Comparison.LESS_THAN:b=a<this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN:b=a>this.value;break;case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:b=a<=this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:b=
a>=this.value;break;case OpenLayers.Filter.Comparison.BETWEEN:b=a>=this.lowerBoundary&&a<=this.upperBoundary;break;case OpenLayers.Filter.Comparison.LIKE:b=RegExp(this.value,"gi").test(a);break}return b},value2regex:function(a,b,c){if(a=="."){OpenLayers.Console.error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison");return null}a=a?a:"*";b=b?b:".";c=c?c:"!";this.value=this.value.replace(RegExp("\\"+c+"(.|$)","g"),"\\$1");this.value=this.value.replace(RegExp("\\"+b,"g"),
".");this.value=this.value.replace(RegExp("\\"+a,"g"),".*");this.value=this.value.replace(RegExp("\\\\.\\*","g"),"\\"+a);return this.value=this.value.replace(RegExp("\\\\\\.","g"),"\\"+b)},regex2value:function(){var a=this.value;a=a.replace(/!/g,"!!");a=a.replace(/(\\)?\\\./g,function(b,c){return c?b:"!."});a=a.replace(/(\\)?\\\*/g,function(b,c){return c?b:"!*"});a=a.replace(/\\\\/g,"\\");return a=a.replace(/\.\*/g,"*")},clone:function(){return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison,
this)},CLASS_NAME:"OpenLayers.Filter.Comparison"});OpenLayers.Filter.Comparison.EQUAL_TO="==";OpenLayers.Filter.Comparison.NOT_EQUAL_TO="!=";OpenLayers.Filter.Comparison.LESS_THAN="<";OpenLayers.Filter.Comparison.GREATER_THAN=">";OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO="<=";OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO=">=";OpenLayers.Filter.Comparison.BETWEEN="..";OpenLayers.Filter.Comparison.LIKE="~";
OpenLayers.Request={DEFAULT_CONFIG:{method:"GET",url:window.location.href,async:true,user:undefined,password:undefined,params:null,proxy:OpenLayers.ProxyHost,headers:{},data:null,callback:function(){},success:null,failure:null,scope:null},URL_SPLIT_REGEX:/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,events:new OpenLayers.Events(this,null,["complete","success","failure"]),issue:function(a){var b=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost});a=OpenLayers.Util.applyDefaults(a,
b);var c=new OpenLayers.Request.XMLHttpRequest,e=OpenLayers.Util.urlAppend(a.url,OpenLayers.Util.getParameterString(a.params||{}));b=e.indexOf("http")!=0;var h=!b&&e.match(this.URL_SPLIT_REGEX);if(h){var j=window.location;b=h[1]==j.protocol&&h[3]==j.hostname;h=h[4];j=j.port;if(h!=80&&h!=""||j!="80"&&j!="")b=b&&h==j}if(!b)if(a.proxy)e=typeof a.proxy=="function"?a.proxy(e):a.proxy+encodeURIComponent(e);else OpenLayers.Console.warn(OpenLayers.i18n("proxyNeeded"),{url:e});c.open(a.method,e,a.async,a.user,
a.password);for(var n in a.headers)c.setRequestHeader(n,a.headers[n]);var r=this.events,u=this;c.onreadystatechange=function(){c.readyState==OpenLayers.Request.XMLHttpRequest.DONE&&r.triggerEvent("complete",{request:c,config:a,requestUrl:e})!==false&&u.runCallbacks({request:c,config:a,requestUrl:e})};a.async===false?c.send(a.data):window.setTimeout(function(){c.readyState!==0&&c.send(a.data)},0);return c},runCallbacks:function(a){var b=a.request,c=a.config,e=c.scope?OpenLayers.Function.bind(c.callback,
c.scope):c.callback,h;if(c.success)h=c.scope?OpenLayers.Function.bind(c.success,c.scope):c.success;var j;if(c.failure)j=c.scope?OpenLayers.Function.bind(c.failure,c.scope):c.failure;if(OpenLayers.Util.createUrlObject(c.url).protocol=="file:"&&b.responseText)b.status=200;e(b);if(!b.status||b.status>=200&&b.status<300){this.events.triggerEvent("success",a);h&&h(b)}if(b.status&&(b.status<200||b.status>=300)){this.events.triggerEvent("failure",a);j&&j(b)}},GET:function(a){a=OpenLayers.Util.extend(a,{method:"GET"});
return OpenLayers.Request.issue(a)},POST:function(a){a=OpenLayers.Util.extend(a,{method:"POST"});a.headers=a.headers?a.headers:{};"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(a.headers)||(a.headers["Content-Type"]="application/xml");return OpenLayers.Request.issue(a)},PUT:function(a){a=OpenLayers.Util.extend(a,{method:"PUT"});a.headers=a.headers?a.headers:{};"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(a.headers)||(a.headers["Content-Type"]="application/xml");return OpenLayers.Request.issue(a)},
DELETE:function(a){a=OpenLayers.Util.extend(a,{method:"DELETE"});return OpenLayers.Request.issue(a)},HEAD:function(a){a=OpenLayers.Util.extend(a,{method:"HEAD"});return OpenLayers.Request.issue(a)},OPTIONS:function(a){a=OpenLayers.Util.extend(a,{method:"OPTIONS"});return OpenLayers.Request.issue(a)}};
(function(){function a(){this._object=j&&!u?new j:new window.ActiveXObject("Microsoft.XMLHTTP");this._listeners=[]}function b(){return new a}function c(x){b.onreadystatechange&&b.onreadystatechange.apply(x);x.dispatchEvent({type:"readystatechange",bubbles:false,cancelable:false,timeStamp:new Date+0})}function e(x){try{x.responseText=x._object.responseText}catch(C){}try{var J;a:{var M=x._object,I=M.responseXML,N=M.responseText;if(r&&N&&I&&!I.documentElement&&M.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)){I=
new window.ActiveXObject("Microsoft.XMLDOM");I.async=false;I.validateOnParse=false;I.loadXML(N)}if(I)if(r&&I.parseError!=0||!I.documentElement||I.documentElement&&I.documentElement.tagName=="parsererror"){J=null;break a}J=I}x.responseXML=J}catch(S){}try{x.status=x._object.status}catch(V){}try{x.statusText=x._object.statusText}catch(W){}}function h(x){x._object.onreadystatechange=new window.Function}var j=window.XMLHttpRequest,n=!!window.controllers,r=window.document.all&&!window.opera,u=r&&window.navigator.userAgent.match(/MSIE 7.0/);
b.prototype=a.prototype;if(n&&j.wrapped)b.wrapped=j.wrapped;b.UNSENT=0;b.OPENED=1;b.HEADERS_RECEIVED=2;b.LOADING=3;b.DONE=4;b.prototype.readyState=b.UNSENT;b.prototype.responseText="";b.prototype.responseXML=null;b.prototype.status=0;b.prototype.statusText="";b.prototype.priority="NORMAL";b.prototype.onreadystatechange=null;b.onreadystatechange=null;b.onopen=null;b.onsend=null;b.onabort=null;b.prototype.open=function(x,C,J,M,I){delete this._headers;if(arguments.length<3)J=true;this._async=J;var N=
this,S=this.readyState,V;if(r&&J){V=function(){if(S!=b.DONE){h(N);N.abort()}};window.attachEvent("onunload",V)}b.onopen&&b.onopen.apply(this,arguments);if(arguments.length>4)this._object.open(x,C,J,M,I);else arguments.length>3?this._object.open(x,C,J,M):this._object.open(x,C,J);this.readyState=b.OPENED;c(this);this._object.onreadystatechange=function(){if(!(n&&!J)){N.readyState=N._object.readyState;e(N);if(N._aborted)N.readyState=b.UNSENT;else{if(N.readyState==b.DONE){delete N._data;h(N);r&&J&&window.detachEvent("onunload",
V)}S!=N.readyState&&c(N);S=N.readyState}}}};b.prototype.send=function(x){b.onsend&&b.onsend.apply(this,arguments);arguments.length||(x=null);if(x&&x.nodeType){x=window.XMLSerializer?(new window.XMLSerializer).serializeToString(x):x.xml;oRequest._headers["Content-Type"]||oRequest._object.setRequestHeader("Content-Type","application/xml")}this._data=x;a:{this._object.send(this._data);if(n&&!this._async){this.readyState=b.OPENED;for(e(this);this.readyState<b.DONE;){this.readyState++;c(this);if(this._aborted)break a}}}};
b.prototype.abort=function(){b.onabort&&b.onabort.apply(this,arguments);if(this.readyState>b.UNSENT)this._aborted=true;this._object.abort();h(this);this.readyState=b.UNSENT;delete this._data};b.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()};b.prototype.getResponseHeader=function(x){return this._object.getResponseHeader(x)};b.prototype.setRequestHeader=function(x,C){if(!this._headers)this._headers={};this._headers[x]=C;return this._object.setRequestHeader(x,
C)};b.prototype.addEventListener=function(x,C,J){for(var M=0,I;I=this._listeners[M];M++)if(I[0]==x&&I[1]==C&&I[2]==J)return;this._listeners.push([x,C,J])};b.prototype.removeEventListener=function(x,C,J){for(var M=0,I;I=this._listeners[M];M++)if(I[0]==x&&I[1]==C&&I[2]==J)break;I&&this._listeners.splice(M,1)};b.prototype.dispatchEvent=function(x){x={type:x.type,target:this,currentTarget:this,eventPhase:2,bubbles:x.bubbles,cancelable:x.cancelable,timeStamp:x.timeStamp,stopPropagation:function(){},preventDefault:function(){},
initEvent:function(){}};if(x.type=="readystatechange"&&this.onreadystatechange)(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[x]);for(var C=0,J;J=this._listeners[C];C++)if(J[0]==x.type&&!J[2])(J[1].handleEvent||J[1]).apply(this,[x])};b.prototype.toString=function(){return"[object XMLHttpRequest]"};b.toString=function(){return"[XMLHttpRequest]"};if(!window.Function.prototype.apply)window.Function.prototype.apply=function(x,C){C||(C=[]);x.__func=this;x.__func(C[0],C[1],C[2],
C[3],C[4]);delete x.__func};OpenLayers.Request.XMLHttpRequest=b})();
OpenLayers.Format.QueryStringFilter=function(){function a(c){c=c.replace(/%/g,"\\%");c=c.replace(/\\\\\.(\*)?/g,function(e,h){return h?e:"\\\\_"});c=c.replace(/\\\\\.\*/g,"\\\\%");c=c.replace(/(\\)?\.(\*)?/g,function(e,h,j){return h||j?e:"_"});c=c.replace(/(\\)?\.\*/g,function(e,h){return h?e:"%"});c=c.replace(/\\\./g,".");return c=c.replace(/(\\)?\\\*/g,function(e,h){return h?e:"*"})}var b={};b[OpenLayers.Filter.Comparison.EQUAL_TO]="eq";b[OpenLayers.Filter.Comparison.NOT_EQUAL_TO]="ne";b[OpenLayers.Filter.Comparison.LESS_THAN]=
"lt";b[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO]="lte";b[OpenLayers.Filter.Comparison.GREATER_THAN]="gt";b[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO]="gte";b[OpenLayers.Filter.Comparison.LIKE]="ilike";return OpenLayers.Class(OpenLayers.Format,{wildcarded:false,srsInBBOX:false,write:function(c,e){e=e||{};var h=c.CLASS_NAME;h=h.substring(h.lastIndexOf(".")+1);switch(h){case "Spatial":switch(c.type){case OpenLayers.Filter.Spatial.BBOX:e.bbox=c.value.toArray();this.srsInBBOX&&c.projection&&
e.bbox.push(c.projection.getCode());break;case OpenLayers.Filter.Spatial.DWITHIN:e.tolerance=c.distance;case OpenLayers.Filter.Spatial.WITHIN:e.lon=c.value.x;e.lat=c.value.y;break;default:OpenLayers.Console.warn("Unknown spatial filter type "+c.type)}break;case "Comparison":h=b[c.type];if(h!==undefined){var j=c.value;if(c.type==OpenLayers.Filter.Comparison.LIKE){j=a(j);if(this.wildcarded)j="%"+j+"%"}e[c.property+"__"+h]=j;e.queryable=e.queryable||[];e.queryable.push(c.property)}else OpenLayers.Console.warn("Unknown comparison filter type "+
c.type);break;case "Logical":if(c.type===OpenLayers.Filter.Logical.AND){h=0;for(j=c.filters.length;h<j;h++)e=this.write(c.filters[h],e)}else OpenLayers.Console.warn("Unsupported logical filter type "+c.type);break;default:OpenLayers.Console.warn("Unknown filter type "+h)}return e},CLASS_NAME:"OpenLayers.Format.QueryStringFilter"})}();
OpenLayers.Protocol.HTTP=OpenLayers.Class(OpenLayers.Protocol,{url:null,headers:null,params:null,callback:null,scope:null,readWithPOST:false,wildcarded:false,srsInBBOX:false,initialize:function(a){a=a||{};this.params={};this.headers={};OpenLayers.Protocol.prototype.initialize.apply(this,arguments);if(!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var b=new OpenLayers.Format.QueryStringFilter({wildcarded:this.wildcarded,srsInBBOX:this.srsInBBOX});this.filterToParams=function(c,e){return b.write(c,
e)}}},destroy:function(){this.headers=this.params=null;OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(a){OpenLayers.Protocol.prototype.read.apply(this,arguments);a=a||{};a.params=OpenLayers.Util.applyDefaults(a.params,this.options.params);a=OpenLayers.Util.applyDefaults(a,this.options);if(a.filter&&this.filterToParams)a.params=this.filterToParams(a.filter,a.params);var b=a.readWithPOST!==undefined?a.readWithPOST:this.readWithPOST,c=new OpenLayers.Protocol.Response({requestType:"read"});
c.priv=b?OpenLayers.Request.POST({url:a.url,callback:this.createCallback(this.handleRead,c,a),data:OpenLayers.Util.getParameterString(a.params),headers:{"Content-Type":"application/x-www-form-urlencoded"}}):OpenLayers.Request.GET({url:a.url,callback:this.createCallback(this.handleRead,c,a),params:a.params,headers:a.headers});return c},handleRead:function(a,b){this.handleResponse(a,b)},create:function(a,b){b=OpenLayers.Util.applyDefaults(b,this.options);var c=new OpenLayers.Protocol.Response({reqFeatures:a,
requestType:"create"});c.priv=OpenLayers.Request.POST({url:b.url,callback:this.createCallback(this.handleCreate,c,b),headers:b.headers,data:this.format.write(a)});return c},handleCreate:function(a,b){this.handleResponse(a,b)},update:function(a,b){b=b||{};var c=b.url||a.url||this.options.url+"/"+a.fid;b=OpenLayers.Util.applyDefaults(b,this.options);var e=new OpenLayers.Protocol.Response({reqFeatures:a,requestType:"update"});e.priv=OpenLayers.Request.PUT({url:c,callback:this.createCallback(this.handleUpdate,
e,b),headers:b.headers,data:this.format.write(a)});return e},handleUpdate:function(a,b){this.handleResponse(a,b)},"delete":function(a,b){b=b||{};var c=b.url||a.url||this.options.url+"/"+a.fid;b=OpenLayers.Util.applyDefaults(b,this.options);var e=new OpenLayers.Protocol.Response({reqFeatures:a,requestType:"delete"});e.priv=OpenLayers.Request.DELETE({url:c,callback:this.createCallback(this.handleDelete,e,b),headers:b.headers});return e},handleDelete:function(a,b){this.handleResponse(a,b)},handleResponse:function(a,
b){var c=a.priv;if(b.callback){if(c.status>=200&&c.status<300){if(a.requestType!="delete")a.features=this.parseFeatures(c);a.code=OpenLayers.Protocol.Response.SUCCESS}else a.code=OpenLayers.Protocol.Response.FAILURE;b.callback.call(b.scope,a)}},parseFeatures:function(a){var b=a.responseXML;if(!b||!b.documentElement)b=a.responseText;if(!b||b.length<=0)return null;return this.format.read(b)},commit:function(a,b){function c(S){for(var V=S.features?S.features.length:0,W=Array(V),X=0;X<V;++X)W[X]=S.features[X].fid;
N.insertIds=W;e.apply(this,[S])}function e(S){this.callUserCallback(S,b);I=I&&S.success();j++;if(j>=M)if(b.callback){N.code=I?OpenLayers.Protocol.Response.SUCCESS:OpenLayers.Protocol.Response.FAILURE;b.callback.apply(b.scope,[N])}}b=OpenLayers.Util.applyDefaults(b,this.options);var h=[],j=0,n={};n[OpenLayers.State.INSERT]=[];n[OpenLayers.State.UPDATE]=[];n[OpenLayers.State.DELETE]=[];for(var r,u,x=[],C=0,J=a.length;C<J;++C){r=a[C];if(u=n[r.state]){u.push(r);x.push(r)}}var M=(n[OpenLayers.State.INSERT].length>
0?1:0)+n[OpenLayers.State.UPDATE].length+n[OpenLayers.State.DELETE].length,I=true,N=new OpenLayers.Protocol.Response({reqFeatures:x});r=n[OpenLayers.State.INSERT];r.length>0&&h.push(this.create(r,OpenLayers.Util.applyDefaults({callback:c,scope:this},b.create)));r=n[OpenLayers.State.UPDATE];for(C=r.length-1;C>=0;--C)h.push(this.update(r[C],OpenLayers.Util.applyDefaults({callback:e,scope:this},b.update)));r=n[OpenLayers.State.DELETE];for(C=r.length-1;C>=0;--C)h.push(this["delete"](r[C],OpenLayers.Util.applyDefaults({callback:e,
scope:this},b["delete"])));return h},abort:function(a){a&&a.priv.abort()},callUserCallback:function(a,b){var c=b[a.requestType];c&&c.callback&&c.callback.call(c.scope,a)},CLASS_NAME:"OpenLayers.Protocol.HTTP"});
OpenLayers.Handler.Path=OpenLayers.Class(OpenLayers.Handler.Point,{line:null,maxVertices:null,doubleTouchTolerance:20,freehand:false,freehandToggle:"shiftKey",timerId:null,redoStack:null,initialize:function(){OpenLayers.Handler.Point.prototype.initialize.apply(this,arguments)},createFeature:function(a){a=this.map.getLonLatFromPixel(a);a=new OpenLayers.Geometry.Point(a.lon,a.lat);this.point=new OpenLayers.Feature.Vector(a);this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([this.point.geometry]));
this.callback("create",[this.point.geometry,this.getSketch()]);this.point.geometry.clearBounds();this.layer.addFeatures([this.line,this.point],{silent:true})},destroyFeature:function(a){OpenLayers.Handler.Point.prototype.destroyFeature.call(this,a);this.line=null},destroyPersistedFeature:function(){var a=this.layer;a&&a.features.length>2&&this.layer.features[0].destroy()},removePoint:function(){this.point&&this.layer.removeFeatures([this.point])},addPoint:function(a){this.layer.removeFeatures([this.point]);
a=this.control.map.getLonLatFromPixel(a);this.point=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(a.lon,a.lat));this.line.geometry.addComponent(this.point.geometry,this.line.geometry.components.length);this.layer.addFeatures([this.point]);this.callback("point",[this.point.geometry,this.getGeometry()]);this.callback("modify",[this.point.geometry,this.getSketch()]);this.drawFeature();delete this.redoStack},insertXY:function(a,b){this.line.geometry.addComponent(new OpenLayers.Geometry.Point(a,
b),this.getCurrentPointIndex());this.drawFeature();delete this.redoStack},insertDeltaXY:function(a,b){var c=this.line.geometry.components[this.getCurrentPointIndex()-1];c&&!isNaN(c.x)&&!isNaN(c.y)&&this.insertXY(c.x+a,c.y+b)},insertDirectionLength:function(a,b){a*=Math.PI/180;this.insertDeltaXY(b*Math.cos(a),b*Math.sin(a))},insertDeflectionLength:function(a,b){var c=this.getCurrentPointIndex()-1;if(c>0){var e=this.line.geometry.components[c];c=this.line.geometry.components[c-1];this.insertDirectionLength(Math.atan2(e.y-
c.y,e.x-c.x)*180/Math.PI+a,b)}},getCurrentPointIndex:function(){return this.line.geometry.components.length-1},undo:function(){var a=this.line.geometry,b=a.components,c=this.getCurrentPointIndex()-1;b=b[c];if(a=a.removeComponent(b)){if(!this.redoStack)this.redoStack=[];this.redoStack.push(b);this.drawFeature()}return a},redo:function(){var a=this.redoStack&&this.redoStack.pop();if(a){this.line.geometry.addComponent(a,this.getCurrentPointIndex());this.drawFeature()}return!!a},freehandMode:function(a){return this.freehandToggle&&
a[this.freehandToggle]?!this.freehand:this.freehand},modifyFeature:function(a,b){this.line||this.createFeature(a);var c=this.control.map.getLonLatFromPixel(a);this.point.geometry.x=c.lon;this.point.geometry.y=c.lat;this.callback("modify",[this.point.geometry,this.getSketch(),b]);this.point.geometry.clearBounds();this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.line,this.style);this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.line},getGeometry:function(){var a=
this.line&&this.line.geometry;if(a&&this.multi)a=new OpenLayers.Geometry.MultiLineString([a]);return a},touchstart:function(a){if(this.timerId&&this.passesTolerance(this.lastTouchPx,a.xy,this.doubleTouchTolerance)){this.finishGeometry();window.clearTimeout(this.timerId);this.timerId=null;return false}else{if(this.timerId){window.clearTimeout(this.timerId);this.timerId=null}this.timerId=window.setTimeout(OpenLayers.Function.bind(function(){this.timerId=null},this),300);return OpenLayers.Handler.Point.prototype.touchstart.call(this,
a)}},down:function(a){var b=this.stopDown;if(this.freehandMode(a))b=true;if(!this.touch&&(!this.lastDown||!this.passesTolerance(this.lastDown,a.xy,this.pixelTolerance)))this.modifyFeature(a.xy,!!this.lastUp);this.mouseDown=true;this.lastDown=a.xy;this.stoppedDown=b;return!b},move:function(a){if(this.stoppedDown&&this.freehandMode(a)){this.persist&&this.destroyPersistedFeature();this.addPoint(a.xy);return false}if(!this.touch&&(!this.mouseDown||this.stoppedDown))this.modifyFeature(a.xy,!!this.lastUp);
return true},up:function(a){if(this.mouseDown&&(!this.lastUp||!this.lastUp.equals(a.xy)))if(this.stoppedDown&&this.freehandMode(a)){this.persist&&this.destroyPersistedFeature();this.removePoint();this.finalize()}else if(this.passesTolerance(this.lastDown,a.xy,this.pixelTolerance)){this.touch&&this.modifyFeature(a.xy);this.lastUp==null&&this.persist&&this.destroyPersistedFeature();this.addPoint(a.xy);this.lastUp=a.xy;this.line.geometry.components.length===this.maxVertices+1&&this.finishGeometry()}this.stoppedDown=
this.stopDown;this.mouseDown=false;return!this.stopUp},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-1]);this.removePoint();this.finalize()},dblclick:function(a){this.freehandMode(a)||this.finishGeometry();return false},CLASS_NAME:"OpenLayers.Handler.Path"});
OpenLayers.Handler.Polygon=OpenLayers.Class(OpenLayers.Handler.Path,{holeModifier:null,drawingHole:false,polygon:null,initialize:function(){OpenLayers.Handler.Path.prototype.initialize.apply(this,arguments)},createFeature:function(a){a=this.map.getLonLatFromPixel(a);a=new OpenLayers.Geometry.Point(a.lon,a.lat);this.point=new OpenLayers.Feature.Vector(a);this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry]));this.polygon=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry]));
this.callback("create",[this.point.geometry,this.getSketch()]);this.point.geometry.clearBounds();this.layer.addFeatures([this.polygon,this.point],{silent:true})},addPoint:function(){if(!this.drawingHole&&this.holeModifier&&this.evt&&this.evt[this.holeModifier])for(var a=this.point.geometry,b=this.control.layer.features,c,e=b.length-1;e>=0;--e){c=b[e].geometry;if((c instanceof OpenLayers.Geometry.Polygon||c instanceof OpenLayers.Geometry.MultiPolygon)&&c.intersects(a)){a=b[e];this.control.layer.removeFeatures([a],
{silent:true});this.control.layer.events.registerPriority("sketchcomplete",this,this.finalizeInteriorRing);this.control.layer.events.registerPriority("sketchmodified",this,this.enforceTopology);a.geometry.addComponent(this.line.geometry);this.polygon=a;this.drawingHole=true;break}}OpenLayers.Handler.Path.prototype.addPoint.apply(this,arguments)},getCurrentPointIndex:function(){return this.line.geometry.components.length-2},enforceTopology:function(a){a=a.vertex;var b=this.line.geometry.components;
if(!this.polygon.geometry.intersects(a)){b=b[b.length-3];a.x=b.x;a.y=b.y}},finishGeometry:function(){this.line.geometry.removeComponent(this.line.geometry.components[this.line.geometry.components.length-2]);this.removePoint();this.finalize()},finalizeInteriorRing:function(){var a=this.line.geometry,b=a.getArea()!==0;if(b){for(var c=this.polygon.geometry.components,e=c.length-2;e>=0;--e)if(a.intersects(c[e])){b=false;break}if(b){e=c.length-2;a:for(;e>0;--e)for(var h=c[e].components,j=0,n=h.length;j<
n;++j)if(a.containsPoint(h[j])){b=false;break a}}}if(b){if(this.polygon.state!==OpenLayers.State.INSERT)this.polygon.state=OpenLayers.State.UPDATE}else this.polygon.geometry.removeComponent(a);this.restoreFeature();return false},cancel:function(){if(this.drawingHole){this.polygon.geometry.removeComponent(this.line.geometry);this.restoreFeature(true)}return OpenLayers.Handler.Path.prototype.cancel.apply(this,arguments)},restoreFeature:function(a){this.control.layer.events.unregister("sketchcomplete",
this,this.finalizeInteriorRing);this.control.layer.events.unregister("sketchmodified",this,this.enforceTopology);this.layer.removeFeatures([this.polygon],{silent:true});this.control.layer.addFeatures([this.polygon],{silent:true});this.drawingHole=false;a||this.control.layer.events.triggerEvent("sketchcomplete",{feature:this.polygon})},destroyFeature:function(a){OpenLayers.Handler.Path.prototype.destroyFeature.call(this,a);this.polygon=null},drawFeature:function(){this.layer.drawFeature(this.polygon,
this.style);this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.polygon},getGeometry:function(){var a=this.polygon&&this.polygon.geometry;if(a&&this.multi)a=new OpenLayers.Geometry.MultiPolygon([a]);return a},CLASS_NAME:"OpenLayers.Handler.Polygon"});
OpenLayers.Renderer.Canvas=OpenLayers.Class(OpenLayers.Renderer,{hitDetection:true,hitOverflow:0,canvas:null,features:null,pendingRedraw:false,initialize:function(){OpenLayers.Renderer.prototype.initialize.apply(this,arguments);this.root=document.createElement("canvas");this.container.appendChild(this.root);this.canvas=this.root.getContext("2d");this.features={};if(this.hitDetection){this.hitCanvas=document.createElement("canvas");this.hitContext=this.hitCanvas.getContext("2d")}},eraseGeometry:function(a,
b){this.eraseFeatures(this.features[b][0])},supported:function(){return!!document.createElement("canvas").getContext},setSize:function(a){this.size=a.clone();var b=this.root;b.style.width=a.w+"px";b.style.height=a.h+"px";b.width=a.w;b.height=a.h;this.resolution=null;if(this.hitDetection){b=this.hitCanvas;b.style.width=a.w+"px";b.style.height=a.h+"px";b.width=a.w;b.height=a.h}},drawFeature:function(a,b){var c;if(a.geometry){b=this.applyDefaultSymbolizer(b||a.style);c=a.geometry.getBounds();if(c=b.display!==
"none"&&!!c&&c.intersectsBounds(this.extent))this.features[a.id]=[a,b];else delete this.features[a.id];this.pendingRedraw=true}if(this.pendingRedraw&&!this.locked){this.redraw();this.pendingRedraw=false}return c},drawGeometry:function(a,b,c){var e=a.CLASS_NAME;if(e=="OpenLayers.Geometry.Collection"||e=="OpenLayers.Geometry.MultiPoint"||e=="OpenLayers.Geometry.MultiLineString"||e=="OpenLayers.Geometry.MultiPolygon")for(e=0;e<a.components.length;e++)this.drawGeometry(a.components[e],b,c);else switch(a.CLASS_NAME){case "OpenLayers.Geometry.Point":this.drawPoint(a,
b,c);break;case "OpenLayers.Geometry.LineString":this.drawLineString(a,b,c);break;case "OpenLayers.Geometry.LinearRing":this.drawLinearRing(a,b,c);break;case "OpenLayers.Geometry.Polygon":this.drawPolygon(a,b,c);break;default:break}},drawExternalGraphic:function(a,b,c){var e=new Image;if(b.graphicTitle)e.title=b.graphicTitle;var h=b.graphicWidth||b.graphicHeight,j=b.graphicHeight||b.graphicWidth;h=h?h:b.pointRadius*2;j=j?j:b.pointRadius*2;var n=b.graphicXOffset!=undefined?b.graphicXOffset:-(0.5*h),
r=b.graphicYOffset!=undefined?b.graphicYOffset:-(0.5*j),u=b.graphicOpacity||b.fillOpacity;e.onload=OpenLayers.Function.bind(function(){if(this.features[c]){var x=this.getLocalXY(a),C=x[0];x=x[1];if(!isNaN(C)&&!isNaN(x)){C=C+n|0;x=x+r|0;var J=this.canvas;J.globalAlpha=u;var M=OpenLayers.Renderer.Canvas.drawImageScaleFactor||(OpenLayers.Renderer.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1);J.drawImage(e,C*M,x*M,h*M,j*M);if(this.hitDetection){this.setHitContextStyle("fill",
c);this.hitContext.fillRect(C,x,h,j)}}}},this);e.src=b.externalGraphic},setCanvasStyle:function(a,b){if(a==="fill"){this.canvas.globalAlpha=b.fillOpacity;this.canvas.fillStyle=b.fillColor}else if(a==="stroke"){this.canvas.globalAlpha=b.strokeOpacity;this.canvas.strokeStyle=b.strokeColor;this.canvas.lineWidth=b.strokeWidth}else{this.canvas.globalAlpha=0;this.canvas.lineWidth=1}},featureIdToHex:function(a){a=Number(a.split("_").pop())+1;if(a>=16777216){this.hitOverflow=a-16777215;a=a%16777216+1}a="000000"+
a.toString(16);var b=a.length;return a="#"+a.substring(b-6,b)},setHitContextStyle:function(a,b,c){b=this.featureIdToHex(b);if(a=="fill"){this.hitContext.globalAlpha=1;this.hitContext.fillStyle=b}else if(a=="stroke"){this.hitContext.globalAlpha=1;this.hitContext.strokeStyle=b;this.hitContext.lineWidth=c.strokeWidth+2}else{this.hitContext.globalAlpha=0;this.hitContext.lineWidth=1}},drawPoint:function(a,b,c){if(b.graphic!==false)if(b.externalGraphic)this.drawExternalGraphic(a,b,c);else{var e=this.getLocalXY(a);
a=e[0];e=e[1];if(!isNaN(a)&&!isNaN(e)){var h=Math.PI*2,j=b.pointRadius;if(b.fill!==false){this.setCanvasStyle("fill",b);this.canvas.beginPath();this.canvas.arc(a,e,j,0,h,true);this.canvas.fill();if(this.hitDetection){this.setHitContextStyle("fill",c,b);this.hitContext.beginPath();this.hitContext.arc(a,e,j,0,h,true);this.hitContext.fill()}}if(b.stroke!==false){this.setCanvasStyle("stroke",b);this.canvas.beginPath();this.canvas.arc(a,e,j,0,h,true);this.canvas.stroke();if(this.hitDetection){this.setHitContextStyle("stroke",
c,b);this.hitContext.beginPath();this.hitContext.arc(a,e,j,0,h,true);this.hitContext.stroke()}this.setCanvasStyle("reset")}}}},drawLineString:function(a,b,c){b=OpenLayers.Util.applyDefaults({fill:false},b);this.drawLinearRing(a,b,c)},drawLinearRing:function(a,b,c){if(b.fill!==false){this.setCanvasStyle("fill",b);this.renderPath(this.canvas,a,b,c,"fill");if(this.hitDetection){this.setHitContextStyle("fill",c,b);this.renderPath(this.hitContext,a,b,c,"fill")}}if(b.stroke!==false){this.setCanvasStyle("stroke",
b);this.renderPath(this.canvas,a,b,c,"stroke");if(this.hitDetection){this.setHitContextStyle("stroke",c,b);this.renderPath(this.hitContext,a,b,c,"stroke")}}this.setCanvasStyle("reset")},renderPath:function(a,b,c,e,h){b=b.components;c=b.length;a.beginPath();e=this.getLocalXY(b[0]);var j=e[1];if(!isNaN(e[0])&&!isNaN(j)){a.moveTo(e[0],e[1]);for(e=1;e<c;++e){j=this.getLocalXY(b[e]);a.lineTo(j[0],j[1])}h==="fill"?a.fill():a.stroke()}},drawPolygon:function(a,b,c){a=a.components;var e=a.length;this.drawLinearRing(a[0],
b,c);for(var h=1;h<e;++h){this.canvas.globalCompositeOperation="destination-out";if(this.hitDetection)this.hitContext.globalCompositeOperation="destination-out";this.drawLinearRing(a[h],OpenLayers.Util.applyDefaults({stroke:false,fillOpacity:1},b),c);this.canvas.globalCompositeOperation="source-over";if(this.hitDetection)this.hitContext.globalCompositeOperation="source-over";this.drawLinearRing(a[h],OpenLayers.Util.applyDefaults({fill:false},b),c)}},drawText:function(a,b){b=OpenLayers.Util.extend({fontColor:"#000000",
labelAlign:"cm"},b);var c=this.getLocalXY(a);this.setCanvasStyle("reset");this.canvas.fillStyle=b.fontColor;this.canvas.globalAlpha=b.fontOpacity||1;var e=[b.fontStyle?b.fontStyle:"normal","normal",b.fontWeight?b.fontWeight:"normal",b.fontSize?b.fontSize:"1em",b.fontFamily?b.fontFamily:"sans-serif"].join(" "),h=b.label.split("\n"),j=h.length;if(this.canvas.fillText){this.canvas.font=e;this.canvas.textAlign=OpenLayers.Renderer.Canvas.LABEL_ALIGN[b.labelAlign[0]]||"center";this.canvas.textBaseline=
OpenLayers.Renderer.Canvas.LABEL_ALIGN[b.labelAlign[1]]||"middle";var n=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[1]];if(n==null)n=-0.5;e=this.canvas.measureText("Mg").height||this.canvas.measureText("xx").width;c[1]+=e*n*(j-1);for(n=0;n<j;n++)this.canvas.fillText(h[n],c[0],c[1]+e*n)}else if(this.canvas.mozDrawText){this.canvas.mozTextStyle=e;var r=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[0]];if(r==null)r=-0.5;n=OpenLayers.Renderer.Canvas.LABEL_FACTOR[b.labelAlign[1]];if(n==
null)n=-0.5;e=this.canvas.mozMeasureText("xx");c[1]+=e*(1+n*j);for(n=0;n<j;n++){var u=c[0]+r*this.canvas.mozMeasureText(h[n]),x=c[1]+n*e;this.canvas.translate(u,x);this.canvas.mozDrawText(h[n]);this.canvas.translate(-u,-x)}}this.setCanvasStyle("reset")},getLocalXY:function(a){var b=this.getResolution(),c=this.extent;return[a.x/b+-c.left/b,c.top/b-a.y/b]},clear:function(){var a=this.root.height,b=this.root.width;this.canvas.clearRect(0,0,b,a);this.features={};this.hitDetection&&this.hitContext.clearRect(0,
0,b,a)},getFeatureIdFromEvent:function(a){var b=null;if(this.hitDetection)if(!this.map.dragging){a=a.xy;a=this.hitContext.getImageData(a.x|0,a.y|0,1,1).data;if(a[3]===255)if(a=a[2]+256*(a[1]+256*a[0]))b=this.features["OpenLayers.Feature.Vector_"+(a-1+this.hitOverflow)][0]}return b},eraseFeatures:function(a){OpenLayers.Util.isArray(a)||(a=[a]);for(var b=0;b<a.length;++b)delete this.features[a[b].id];this.redraw()},redraw:function(){if(!this.locked){var a=this.root.height,b=this.root.width;this.canvas.clearRect(0,
0,b,a);this.hitDetection&&this.hitContext.clearRect(0,0,b,a);a=[];var c;for(var e in this.features)if(this.features.hasOwnProperty(e)){b=this.features[e][0];c=this.features[e][1];this.drawGeometry(b.geometry,c,b.id);c.label&&a.push([b,c])}b=0;for(c=a.length;b<c;++b){e=a[b];this.drawText(e[0].geometry.getCentroid(),e[1])}}},CLASS_NAME:"OpenLayers.Renderer.Canvas"});OpenLayers.Renderer.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"top",b:"bottom"};OpenLayers.Renderer.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1};
OpenLayers.Renderer.Canvas.drawImageScaleFactor=null;
OpenLayers.Control.DrawFeature=OpenLayers.Class(OpenLayers.Control,{layer:null,callbacks:null,EVENT_TYPES:["featureadded"],multi:false,featureAdded:function(){},handlerOptions:null,initialize:function(a,b,c){this.EVENT_TYPES=OpenLayers.Control.DrawFeature.prototype.EVENT_TYPES.concat(OpenLayers.Control.prototype.EVENT_TYPES);OpenLayers.Control.prototype.initialize.apply(this,[c]);this.callbacks=OpenLayers.Util.extend({done:this.drawFeature,modify:function(e,h){this.layer.events.triggerEvent("sketchmodified",
{vertex:e,feature:h})},create:function(e,h){this.layer.events.triggerEvent("sketchstarted",{vertex:e,feature:h})}},this.callbacks);this.layer=a;this.handlerOptions=this.handlerOptions||{};if(!("multi"in this.handlerOptions))this.handlerOptions.multi=this.multi;if(a=this.layer.styleMap&&this.layer.styleMap.styles.temporary)this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({"default":a})});this.handler=new b(this,this.callbacks,
this.handlerOptions)},drawFeature:function(a){a=new OpenLayers.Feature.Vector(a);if(this.layer.events.triggerEvent("sketchcomplete",{feature:a})!==false){a.state=OpenLayers.State.INSERT;this.layer.addFeatures([a]);this.featureAdded(a);this.events.triggerEvent("featureadded",{feature:a})}},insertXY:function(a,b){this.handler&&this.handler.line&&this.handler.insertXY(a,b)},insertDeltaXY:function(a,b){this.handler&&this.handler.line&&this.handler.insertDeltaXY(a,b)},insertDirectionLength:function(a,
b){this.handler&&this.handler.line&&this.handler.insertDirectionLength(a,b)},insertDeflectionLength:function(a,b){this.handler&&this.handler.line&&this.handler.insertDeflectionLength(a,b)},undo:function(){return this.handler.undo&&this.handler.undo()},redo:function(){return this.handler.redo&&this.handler.redo()},finishSketch:function(){this.handler.finishGeometry()},cancel:function(){this.handler.cancel()},CLASS_NAME:"OpenLayers.Control.DrawFeature"});
OpenLayers.Kinetic=OpenLayers.Class({threshold:0,interval:10,deceleration:0.0035,nbPoints:100,delay:200,points:undefined,timerId:undefined,initialize:function(a){OpenLayers.Util.extend(this,a)},begin:function(){clearInterval(this.timerId);this.timerId=undefined;this.points=[]},update:function(a){this.points.unshift({xy:a,tick:(new Date).getTime()});this.points.length>this.nbPoints&&this.points.pop()},end:function(a){for(var b,c=(new Date).getTime(),e=0,h=this.points.length,j;e<h;e++){j=this.points[e];
if(c-j.tick>this.delay)break;b=j}if(b){e=(new Date).getTime()-b.tick;c=Math.sqrt(Math.pow(a.x-b.xy.x,2)+Math.pow(a.y-b.xy.y,2));e=c/e;if(!(e==0||e<this.threshold)){c=Math.asin((a.y-b.xy.y)/c);if(b.xy.x<=a.x)c=Math.PI-c;return{speed:e,theta:c}}}},move:function(a,b){var c=a.speed,e=Math.cos(a.theta),h=-Math.sin(a.theta),j=0,n=(new Date).getTime(),r=0,u=0;this.timerId=window.setInterval(OpenLayers.Function.bind(function(){if(this.timerId!=null){j+=this.interval;var x=(new Date).getTime()-n;x=(j+x)/2;
var C=-this.deceleration*Math.pow(x,2)/2+c*x,J=C*e;C=C*h;var M={};M.end=false;if(-this.deceleration*x+c<=0){clearInterval(this.timerId);this.timerId=null;M.end=true}M.x=J-r;M.y=C-u;r=J;u=C;b(M.x,M.y,M.end)}},this),this.interval)},CLASS_NAME:"OpenLayers.Kinetic"});
OpenLayers.Strategy=OpenLayers.Class({layer:null,options:null,active:null,autoActivate:true,autoDestroy:true,initialize:function(a){OpenLayers.Util.extend(this,a);this.options=a;this.active=false},destroy:function(){this.deactivate();this.options=this.layer=null},setLayer:function(a){this.layer=a},activate:function(){if(!this.active)return this.active=true;return false},deactivate:function(){if(this.active){this.active=false;return true}return false},CLASS_NAME:"OpenLayers.Strategy"});
OpenLayers.Control.DLTSZoomOutPanel=OpenLayers.Class(OpenLayers.Control.Panel,{initialize:function(a){OpenLayers.Control.Panel.prototype.initialize.apply(this,[a]);this.addControls([new OpenLayers.Control.DLTSZoomOut])},CLASS_NAME:"OpenLayers.Control.DLTSZoomOutPanel"});
OpenLayers.Tile=OpenLayers.Class({EVENT_TYPES:["loadstart","loadend","reload","unload"],events:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:false,initialize:function(a,b,c,e,h,j){this.layer=a;this.position=b.clone();this.bounds=c.clone();this.url=e;if(h)this.size=h.clone();this.id=OpenLayers.Util.createUniqueID("Tile_");this.events=new OpenLayers.Events(this,null,this.EVENT_TYPES);OpenLayers.Util.extend(this,j)},unload:function(){if(this.isLoading){this.isLoading=
false;this.events.triggerEvent("unload")}},destroy:function(){this.position=this.size=this.bounds=this.layer=null;this.events.destroy();this.events=null},clone:function(a){if(a==null)a=new OpenLayers.Tile(this.layer,this.position,this.bounds,this.url,this.size);OpenLayers.Util.applyDefaults(a,this);return a},draw:function(){var a=this.layer.maxExtent;this.shouldDraw=a&&this.bounds.intersectsBounds(a,false)||this.layer.displayOutsideMaxExtent;this.clear();return this.shouldDraw},moveTo:function(a,
b,c){if(c==null)c=true;this.bounds=a.clone();this.position=b.clone();c&&this.draw()},clear:function(){},getBoundsFromBaseLayer:function(a){var b=OpenLayers.i18n("reprojectDeprecated",{layerName:this.layer.name});OpenLayers.Console.warn(b);b=this.layer.map.getLonLatFromLayerPx(a);a=a.clone();a.x+=this.size.w;a.y+=this.size.h;a=this.layer.map.getLonLatFromLayerPx(a);if(b.lon>a.lon)if(b.lon<0)b.lon=-180-(b.lon+180);else a.lon=180+a.lon+180;return new OpenLayers.Bounds(b.lon,a.lat,a.lon,b.lat)},showTile:function(){this.shouldDraw&&
this.show()},show:function(){},hide:function(){},CLASS_NAME:"OpenLayers.Tile"});
OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,layerAlphaHack:null,isBackBuffer:false,isFirstDraw:true,backBufferTile:null,maxGetUrlLength:null,initialize:function(a,b,c,e){OpenLayers.Tile.prototype.initialize.apply(this,arguments);this.maxGetUrlLength!=null&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame);this.url=e;this.frame=document.createElement("div");this.frame.style.overflow="hidden";this.frame.style.position="absolute";this.layerAlphaHack=
this.layer.alpha&&OpenLayers.Util.alphaHack()},destroy:function(){this.imgDiv!=null&&this.removeImgDiv();this.imgDiv=null;this.frame!=null&&this.frame.parentNode==this.layer.div&&this.layer.div.removeChild(this.frame);this.frame=null;if(this.backBufferTile){this.backBufferTile.destroy();this.backBufferTile=null}this.layer.events.unregister("loadend",this,this.resetBackBuffer);OpenLayers.Tile.prototype.destroy.apply(this,arguments)},clone:function(a){if(a==null)a=new OpenLayers.Tile.Image(this.layer,
this.position,this.bounds,this.url,this.size);a=OpenLayers.Tile.prototype.clone.apply(this,[a]);a.imgDiv=null;return a},draw:function(){if(this.layer!=this.layer.map.baseLayer&&this.layer.reproject)this.bounds=this.getBoundsFromBaseLayer(this.position);var a=OpenLayers.Tile.prototype.draw.apply(this,arguments);if(OpenLayers.Util.indexOf(this.layer.SUPPORTED_TRANSITIONS,this.layer.transitionEffect)!=-1||this.layer.singleTile)if(a){if(!this.backBufferTile){this.backBufferTile=this.clone();this.backBufferTile.hide();
this.backBufferTile.isBackBuffer=true;this.events.register("loadend",this,this.resetBackBuffer);this.layer.events.register("loadend",this,this.resetBackBuffer)}this.startTransition()}else this.backBufferTile&&this.backBufferTile.clear();else if(a&&this.isFirstDraw){this.events.register("loadend",this,this.showTile);this.isFirstDraw=false}if(!a)return false;if(this.isLoading)this.events.triggerEvent("reload");else{this.isLoading=true;this.events.triggerEvent("loadstart")}return this.renderTile()},
resetBackBuffer:function(){this.showTile();if(this.backBufferTile&&(this.isFirstDraw||!this.layer.numLoadingTiles)){this.isFirstDraw=false;var a=this.layer.maxExtent;if(a&&this.bounds.intersectsBounds(a,false)){this.backBufferTile.position=this.position;this.backBufferTile.bounds=this.bounds;this.backBufferTile.size=this.size;this.backBufferTile.imageSize=this.layer.getImageSize(this.bounds)||this.size;this.backBufferTile.imageOffset=this.layer.imageOffset;this.backBufferTile.resolution=this.layer.getResolution();
this.backBufferTile.renderTile()}this.backBufferTile.hide()}},renderTile:function(){if(this.layer.async){this.initImgDiv();this.layer.getURLasync(this.bounds,this,"url",this.positionImage)}else{this.url=this.layer.getURL(this.bounds);this.initImgDiv();this.positionImage()}return true},positionImage:function(){if(this.layer!==null){OpenLayers.Util.modifyDOMElement(this.frame,null,this.position,this.size);var a=this.layer.getImageSize(this.bounds);if(this.layerAlphaHack)OpenLayers.Util.modifyAlphaImageDiv(this.imgDiv,
null,null,a,this.url);else{OpenLayers.Util.modifyDOMElement(this.imgDiv,null,null,a);this.imgDiv.src=this.url}}},clear:function(){if(this.imgDiv){this.hide();if(OpenLayers.Tile.Image.useBlankTile)this.imgDiv.src=OpenLayers.Util.getImagesLocation()+"blank.gif"}},initImgDiv:function(){if(this.imgDiv==null){var a=this.layer.imageOffset,b=this.layer.getImageSize(this.bounds);this.imgDiv=this.layerAlphaHack?OpenLayers.Util.createAlphaImageDiv(null,a,b,null,"relative",null,null,null,true):OpenLayers.Util.createImage(null,
a,b,null,"relative",null,null,true);if(OpenLayers.Util.isArray(this.layer.url))this.imgDiv.urls=this.layer.url.slice();this.imgDiv.className="olTileImage";this.frame.style.zIndex=this.isBackBuffer?0:1;this.frame.appendChild(this.imgDiv);this.layer.div.appendChild(this.frame);this.layer.opacity!=null&&OpenLayers.Util.modifyDOMElement(this.imgDiv,null,null,null,null,null,null,this.layer.opacity);this.imgDiv.map=this.layer.map;var c=function(){if(this.isLoading){this.isLoading=false;this.events.triggerEvent("loadend")}};
this.layerAlphaHack?OpenLayers.Event.observe(this.imgDiv.childNodes[0],"load",OpenLayers.Function.bind(c,this)):OpenLayers.Event.observe(this.imgDiv,"load",OpenLayers.Function.bind(c,this));OpenLayers.Event.observe(this.imgDiv,"error",OpenLayers.Function.bind(function(){this.imgDiv._attempts>OpenLayers.IMAGE_RELOAD_ATTEMPTS&&c.call(this)},this))}this.imgDiv.viewRequestID=this.layer.map.viewRequestID},removeImgDiv:function(){OpenLayers.Event.stopObservingElement(this.imgDiv);if(this.imgDiv.parentNode==
this.frame){this.frame.removeChild(this.imgDiv);this.imgDiv.map=null}this.imgDiv.urls=null;var a=this.imgDiv.firstChild;if(a){OpenLayers.Event.stopObservingElement(a);this.imgDiv.removeChild(a);delete a}else this.imgDiv.src=OpenLayers.Util.getImagesLocation()+"blank.gif"},checkImgURL:function(){if(this.layer)OpenLayers.Util.isEquivalentUrl(this.layerAlphaHack?this.imgDiv.firstChild.src:this.imgDiv.src,this.url)||this.hide()},startTransition:function(){if(this.backBufferTile&&this.backBufferTile.imgDiv){var a=
1;if(this.backBufferTile.resolution)a=this.backBufferTile.resolution/this.layer.getResolution();if(a!=1){if(this.layer.transitionEffect=="resize"){var b=new OpenLayers.LonLat(this.backBufferTile.bounds.left,this.backBufferTile.bounds.top),c=new OpenLayers.Size(this.backBufferTile.size.w*a,this.backBufferTile.size.h*a);b=this.layer.map.getLayerPxFromLonLat(b);OpenLayers.Util.modifyDOMElement(this.backBufferTile.frame,null,b,c);c=this.backBufferTile.imageSize;c=new OpenLayers.Size(c.w*a,c.h*a);if(b=
this.backBufferTile.imageOffset)b=new OpenLayers.Pixel(b.x*a,b.y*a);OpenLayers.Util.modifyDOMElement(this.backBufferTile.imgDiv,null,b,c);this.backBufferTile.show()}}else this.layer.singleTile?this.backBufferTile.show():this.backBufferTile.hide()}},show:function(){this.frame.style.display="";if(OpenLayers.Util.indexOf(this.layer.SUPPORTED_TRANSITIONS,this.layer.transitionEffect)!=-1)if(OpenLayers.IS_GECKO===true)this.frame.scrollLeft=this.frame.scrollLeft},hide:function(){this.frame.style.display=
"none"},CLASS_NAME:"OpenLayers.Tile.Image"});OpenLayers.Tile.Image.useBlankTile=OpenLayers.BROWSER_NAME=="safari"||OpenLayers.BROWSER_NAME=="opera";
OpenLayers.Layer.OpenURL=OpenLayers.Class(OpenLayers.Layer.Grid,{isBaseLayer:true,tileOrigin:null,url_ver:"Z39.88-2004",rft_id:null,svc_id:"info:lanl-repo/svc/getRegion",svc_val_fmt:"info:ofi/fmt:kev:mtx:jpeg2000",format:null,tileHeight:null,initialize:function(a,b,c){OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a,b,{},c]);this.rft_id=c.rft_id;this.format=c.format;this.imgMetadata=c.imgMetadata?c.imgMetadata:this.requestToJSON(OpenLayers.Request.issue({url:c.metadataUrl,async:false}));b=
this.getMinLevel();a=Math.ceil(Math.min(b,Math.max(Math.log(this.imgMetadata.width)-Math.log(OpenLayers.Layer.OpenURL.viewerWidth),Math.log(this.imgMetadata.height)-Math.log(OpenLayers.Layer.OpenURL.viewerHeight))/Math.log(2)));this.zoomOffset=b-a;b=this.imgMetadata.width/Math.pow(2,a);c=this.imgMetadata.height/Math.pow(2,a);this.resolutions=[];for(a=a;a>=0;a--)this.resolutions.push(Math.pow(2,a));this.tileSize=new OpenLayers.Size(Math.ceil(b),Math.ceil(c))},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,
arguments)},clone:function(a){if(a==null)a=new OpenLayers.Layer.OpenURL(this.name,this.url,this.options);return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.adjustBounds(a);this.calculatePositionAndSize(a);a=this.map.getZoom()+this.zoomOffset;a=OpenLayers.Layer.OpenURL.djatokaURL+"?url_ver="+this.url_ver+"&rft_id="+this.rft_id+"&svc_id="+this.svc_id+"&svc_val_fmt="+this.svc_val_fmt+"&svc.format="+this.format+"&svc.level="+a+"&svc.rotate=0&svc.region="+this.tilePos.lat+
","+this.tilePos.lon+","+this.imageSize.h+","+this.imageSize.w;var b=this.url;if(b instanceof Array)b=this.selectUrl(a,b);return b+a},addTile:function(a,b){this.calculatePositionAndSize(a);return new OpenLayers.Tile.Image(this,b,a,null,this.imageSize)},setMap:function(){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments);if(!this.tileOrigin)this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.bottom)},calculatePositionAndSize:function(a){var b=this.map.getMaxExtent(),
c=Math.round(1/(this.tileSize.w/b.getWidth())),e=Math.round(a.left/b.getWidth()*c),h=e*(this.tileSize.w+1),j=b.getWidth()/this.map.getResolution(),n=Math.round(1/(this.tileSize.h/b.getHeight()));a=b.getHeight()-a.top;a=a<0?0:a;n=Math.round(a/b.getHeight()*n);a=n*(this.tileSize.h+1);b=b.getHeight()/this.map.getResolution();var r=this.tileSize.w,u=this.tileSize.h;c=c-1;if(e==c)r=j%(this.tileSize.w+1);if(n==c)u=b%(this.tileSize.h+1);this.tilePos=new OpenLayers.LonLat(h,a);this.imageSize=new OpenLayers.Size(r,
u)},getImageMetadata:function(){return this.imgMetadata},getResolutions:function(){return this.resolutions},getTileSize:function(){return this.tileSize},getMinLevel:function(){var a,b;if(this.imgMetadata.dwtLevels===undefined){b=Math.max(this.imgMetadata.width,this.imgMetadata.height);a=this.imgMetadata.levels;b=Math.floor((Math.log(b)-Math.log(OpenLayers.Layer.OpenURL.minDjatokaLevelDimension))/Math.log(2))}else{a=this.imgMetadata.dwtLevels;b=this.imgMetadata.levels}return Math.min(a,b)},requestToJSON:function(a){return a.status===
200?(new OpenLayers.Format.JSON).read(a.responseText):null},CLASS_NAME:"OpenLayers.Layer.OpenURL"});OpenLayers.Layer.OpenURL.viewerWidth=512;OpenLayers.Layer.OpenURL.viewerHeight=512;OpenLayers.Layer.OpenURL.minDjatokaLevelDimension=48;OpenLayers.Layer.OpenURL.djatokaURL="/adore-djatoka/resolver";
OpenLayers.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control,{EVENT_TYPES:["beforefeaturehighlighted","featurehighlighted","featureunhighlighted"],multipleKey:null,toggleKey:null,multiple:false,clickout:true,toggle:false,hover:false,highlightOnly:false,box:false,onBeforeSelect:function(){},onSelect:function(){},onUnselect:function(){},scope:null,geometryTypes:null,layer:null,layers:null,callbacks:null,selectStyle:null,renderIntent:"select",handlers:null,initialize:function(a,b){this.EVENT_TYPES=
OpenLayers.Control.SelectFeature.prototype.EVENT_TYPES.concat(OpenLayers.Control.prototype.EVENT_TYPES);OpenLayers.Control.prototype.initialize.apply(this,[b]);if(this.scope===null)this.scope=this;this.initLayer(a);var c={click:this.clickFeature,clickout:this.clickoutFeature};if(this.hover){c.over=this.overFeature;c.out=this.outFeature}this.callbacks=OpenLayers.Util.extend(c,this.callbacks);this.handlers={feature:new OpenLayers.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes})};
if(this.box)this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"})},initLayer:function(a){if(OpenLayers.Util.isArray(a)){this.layers=a;this.layer=new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:a})}else this.layer=a},destroy:function(){this.active&&this.layers&&this.map.removeLayer(this.layer);OpenLayers.Control.prototype.destroy.apply(this,arguments);this.layers&&this.layer.destroy()},activate:function(){if(!this.active){this.layers&&
this.map.addLayer(this.layer);this.handlers.feature.activate();this.box&&this.handlers.box&&this.handlers.box.activate()}return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){if(this.active){this.handlers.feature.deactivate();this.handlers.box&&this.handlers.box.deactivate();this.layers&&this.map.removeLayer(this.layer)}return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},unselectAll:function(a){for(var b=this.layers||[this.layer],c,e,h=0;h<b.length;++h){c=
b[h];for(var j=c.selectedFeatures.length-1;j>=0;--j){e=c.selectedFeatures[j];if(!a||a.except!=e)this.unselect(e)}}},clickFeature:function(a){if(!this.hover)if(OpenLayers.Util.indexOf(a.layer.selectedFeatures,a)>-1)if(this.toggleSelect())this.unselect(a);else this.multipleSelect()||this.unselectAll({except:a});else{this.multipleSelect()||this.unselectAll({except:a});this.select(a)}},multipleSelect:function(){return this.multiple||this.handlers.feature.evt&&this.handlers.feature.evt[this.multipleKey]},
toggleSelect:function(){return this.toggle||this.handlers.feature.evt&&this.handlers.feature.evt[this.toggleKey]},clickoutFeature:function(){!this.hover&&this.clickout&&this.unselectAll()},overFeature:function(a){var b=a.layer;if(this.hover)if(this.highlightOnly)this.highlight(a);else OpenLayers.Util.indexOf(b.selectedFeatures,a)==-1&&this.select(a)},outFeature:function(a){if(this.hover)if(this.highlightOnly){if(a._lastHighlighter==this.id)if(a._prevHighlighter&&a._prevHighlighter!=this.id){delete a._lastHighlighter;
var b=this.map.getControl(a._prevHighlighter);b&&b.highlight(a)}else this.unhighlight(a)}else this.unselect(a)},highlight:function(a){var b=a.layer;if(this.events.triggerEvent("beforefeaturehighlighted",{feature:a})!==false){a._prevHighlighter=a._lastHighlighter;a._lastHighlighter=this.id;b.drawFeature(a,this.selectStyle||this.renderIntent);this.events.triggerEvent("featurehighlighted",{feature:a})}},unhighlight:function(a){var b=a.layer;if(a._prevHighlighter==undefined)delete a._lastHighlighter;
else{if(a._prevHighlighter!=this.id)a._lastHighlighter=a._prevHighlighter;delete a._prevHighlighter}b.drawFeature(a,a.style||a.layer.style||"default");this.events.triggerEvent("featureunhighlighted",{feature:a})},select:function(a){var b=this.onBeforeSelect.call(this.scope,a),c=a.layer;if(b!==false){b=c.events.triggerEvent("beforefeatureselected",{feature:a});if(b!==false){c.selectedFeatures.push(a);this.highlight(a);if(!this.handlers.feature.lastFeature)this.handlers.feature.lastFeature=c.selectedFeatures[0];
c.events.triggerEvent("featureselected",{feature:a});this.onSelect.call(this.scope,a)}}},unselect:function(a){var b=a.layer;this.unhighlight(a);OpenLayers.Util.removeItem(b.selectedFeatures,a);b.events.triggerEvent("featureunselected",{feature:a});this.onUnselect.call(this.scope,a)},selectBox:function(a){if(a instanceof OpenLayers.Bounds){var b=this.map.getLonLatFromPixel(new OpenLayers.Pixel(a.left,a.bottom));a=this.map.getLonLatFromPixel(new OpenLayers.Pixel(a.right,a.top));b=new OpenLayers.Bounds(b.lon,
b.lat,a.lon,a.lat);this.multipleSelect()||this.unselectAll();a=this.multiple;this.multiple=true;for(var c=this.layers||[this.layer],e,h=0;h<c.length;++h){e=c[h];for(var j=0,n=e.features.length;j<n;++j){var r=e.features[j];if(r.getVisibility())if(this.geometryTypes==null||OpenLayers.Util.indexOf(this.geometryTypes,r.geometry.CLASS_NAME)>-1)b.toGeometry().intersects(r.geometry)&&OpenLayers.Util.indexOf(e.selectedFeatures,r)==-1&&this.select(r)}}this.multiple=a}},setMap:function(a){this.handlers.feature.setMap(a);
this.box&&this.handlers.box.setMap(a);OpenLayers.Control.prototype.setMap.apply(this,arguments)},setLayer:function(a){var b=this.active;this.unselectAll();this.deactivate();if(this.layers){this.layer.destroy();this.layers=null}this.initLayer(a);this.handlers.feature.layer=this.layer;b&&this.activate()},CLASS_NAME:"OpenLayers.Control.SelectFeature"});
OpenLayers.Strategy.Fixed=OpenLayers.Class(OpenLayers.Strategy,{preload:false,activate:function(){if(OpenLayers.Strategy.prototype.activate.apply(this,arguments)){this.layer.events.on({refresh:this.load,scope:this});this.layer.visibility==true||this.preload?this.load():this.layer.events.on({visibilitychanged:this.load,scope:this});return true}return false},deactivate:function(){var a=OpenLayers.Strategy.prototype.deactivate.call(this);a&&this.layer.events.un({refresh:this.load,visibilitychanged:this.load,
scope:this});return a},load:function(a){var b=this.layer;b.events.triggerEvent("loadstart");b.protocol.read(OpenLayers.Util.applyDefaults({callback:OpenLayers.Function.bind(this.merge,this,b.map.getProjectionObject()),filter:b.filter},a));b.events.un({visibilitychanged:this.load,scope:this})},merge:function(a,b){var c=this.layer;c.destroyFeatures();var e=b.features;if(e&&e.length>0){if(!a.equals(c.projection))for(var h,j=0,n=e.length;j<n;++j)(h=e[j].geometry)&&h.transform(c.projection,a);c.addFeatures(e)}c.events.triggerEvent("loadend")},
CLASS_NAME:"OpenLayers.Strategy.Fixed"});
OpenLayers.Layer.Markers=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:false,markers:null,drawn:false,initialize:function(){OpenLayers.Layer.prototype.initialize.apply(this,arguments);this.markers=[]},destroy:function(){this.clearMarkers();this.markers=null;OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setOpacity:function(a){if(a!=this.opacity){this.opacity=a;a=0;for(var b=this.markers.length;a<b;a++)this.markers[a].setOpacity(this.opacity)}},moveTo:function(a,b){OpenLayers.Layer.prototype.moveTo.apply(this,
arguments);if(b||!this.drawn){for(var c=0,e=this.markers.length;c<e;c++)this.drawMarker(this.markers[c]);this.drawn=true}},addMarker:function(a){this.markers.push(a);this.opacity!=null&&a.setOpacity(this.opacity);if(this.map&&this.map.getExtent()){a.map=this.map;this.drawMarker(a)}},removeMarker:function(a){if(this.markers&&this.markers.length){OpenLayers.Util.removeItem(this.markers,a);a.erase()}},clearMarkers:function(){if(this.markers!=null)for(;this.markers.length>0;)this.removeMarker(this.markers[0])},
drawMarker:function(a){var b=this.map.getLayerPxFromLonLat(a.lonlat);if(b==null)a.display(false);else if(a.isDrawn())a.icon&&a.icon.moveTo(b);else this.div.appendChild(a.draw(b))},getDataExtent:function(){var a=null;if(this.markers&&this.markers.length>0){a=new OpenLayers.Bounds;for(var b=0,c=this.markers.length;b<c;b++)a.extend(this.markers[b].lonlat)}return a},CLASS_NAME:"OpenLayers.Layer.Markers"});
OpenLayers.Layer.Boxes=OpenLayers.Class(OpenLayers.Layer.Markers,{initialize:function(){OpenLayers.Layer.Markers.prototype.initialize.apply(this,arguments)},drawMarker:function(a){var b=a.bounds,c=this.map.getLayerPxFromLonLat(new OpenLayers.LonLat(b.left,b.top));b=this.map.getLayerPxFromLonLat(new OpenLayers.LonLat(b.right,b.bottom));if(b==null||c==null)a.display(false);else{b=new OpenLayers.Size(Math.max(1,b.x-c.x),Math.max(1,b.y-c.y));c=a.draw(c,b);if(!a.drawn){this.div.appendChild(c);a.drawn=
true}}},removeMarker:function(a){OpenLayers.Util.removeItem(this.markers,a);a.div!=null&&a.div.parentNode==this.div&&this.div.removeChild(a.div)},CLASS_NAME:"OpenLayers.Layer.Boxes"});
OpenLayers.Handler.Keyboard=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown","keyup"],eventListener:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments);this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},destroy:function(){this.deactivate();this.eventListener=null;OpenLayers.Handler.prototype.destroy.apply(this,arguments)},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){for(var a=0,
b=this.KEY_EVENTS.length;a<b;a++)OpenLayers.Event.observe(document,this.KEY_EVENTS[a],this.eventListener);return true}else return false},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){a=0;for(var b=this.KEY_EVENTS.length;a<b;a++)OpenLayers.Event.stopObserving(document,this.KEY_EVENTS[a],this.eventListener);a=true}return a},handleKeyEvent:function(a){this.checkModifiers(a)&&this.callback(a.type,[a])},CLASS_NAME:"OpenLayers.Handler.Keyboard"});
OpenLayers.Control.KeyboardDefaults=OpenLayers.Class(OpenLayers.Control,{autoActivate:true,slideFactor:75,draw:function(){this.handler=new OpenLayers.Handler.Keyboard(this,{keydown:this.defaultKeyPress})},defaultKeyPress:function(a){switch(a.keyCode){case OpenLayers.Event.KEY_LEFT:this.map.pan(-this.slideFactor,0);break;case OpenLayers.Event.KEY_RIGHT:this.map.pan(this.slideFactor,0);break;case OpenLayers.Event.KEY_UP:this.map.pan(0,-this.slideFactor);break;case OpenLayers.Event.KEY_DOWN:this.map.pan(0,
this.slideFactor);break;case 33:a=this.map.getSize();this.map.pan(0,-0.75*a.h);break;case 34:a=this.map.getSize();this.map.pan(0,0.75*a.h);break;case 35:a=this.map.getSize();this.map.pan(0.75*a.w,0);break;case 36:a=this.map.getSize();this.map.pan(-0.75*a.w,0);break;case 43:case 61:case 187:case 107:this.map.zoomIn();break;case 45:case 109:case 189:case 95:this.map.zoomOut();break}},CLASS_NAME:"OpenLayers.Control.KeyboardDefaults"});var jaaulde=window.jaaulde||{};jaaulde.utils=jaaulde.utils||{};
jaaulde.utils.cookies=function(){var a,b,c,e,h={expiresAt:null,path:"/",domain:null,secure:false};a=function(j){var n,r;if(typeof j!=="object"||j===null)n=h;else{n={expiresAt:h.expiresAt,path:h.path,domain:h.domain,secure:h.secure};if(typeof j.expiresAt==="object"&&j.expiresAt instanceof Date)n.expiresAt=j.expiresAt;else if(typeof j.hoursToLive==="number"&&j.hoursToLive!==0){r=new Date;r.setTime(r.getTime()+j.hoursToLive*60*60*1E3);n.expiresAt=r}if(typeof j.path==="string"&&j.path!=="")n.path=j.path;
if(typeof j.domain==="string"&&j.domain!=="")n.domain=j.domain;if(j.secure===true)n.secure=j.secure}return n};b=function(j){j=a(j);return(typeof j.expiresAt==="object"&&j.expiresAt instanceof Date?"; expires="+j.expiresAt.toGMTString():"")+"; path="+j.path+(typeof j.domain==="string"?"; domain="+j.domain:"")+(j.secure===true?"; secure":"")};c=function(){var j={},n,r,u,x,C=document.cookie.split(";"),J;for(n=0;n<C.length;n+=1){r=C[n].split("=");u=r[0].replace(/^\s*/,"").replace(/\s*$/,"");try{x=decodeURIComponent(r[1])}catch(M){x=
r[1]}if(typeof JSON==="object"&&JSON!==null&&typeof JSON.parse==="function")try{J=x;x=JSON.parse(x)}catch(I){x=J}j[u]=x}return j};e=function(){};e.prototype.get=function(j){var n,r,u=c();if(typeof j==="string")n=typeof u[j]!=="undefined"?u[j]:null;else if(typeof j==="object"&&j!==null){n={};for(r in j)n[j[r]]=typeof u[j[r]]!=="undefined"?u[j[r]]:null}else n=u;return n};e.prototype.filter=function(j){var n,r={},u=c();if(typeof j==="string")j=RegExp(j);for(n in u)if(n.match(j))r[n]=u[n];return r};e.prototype.set=
function(j,n,r){if(typeof r!=="object"||r===null)r={};if(typeof n==="undefined"||n===null){n="";r.hoursToLive=-8760}else if(typeof n!=="string")if(typeof JSON==="object"&&JSON!==null&&typeof JSON.stringify==="function")n=JSON.stringify(n);else throw Error("cookies.set() received non-string value and could not serialize.");r=b(r);document.cookie=j+"="+encodeURIComponent(n)+r};e.prototype.del=function(j,n){var r={},u;if(typeof n!=="object"||n===null)n={};if(typeof j==="boolean"&&j===true)r=this.get();
else if(typeof j==="string")r[j]=true;for(u in r)typeof u==="string"&&u!==""&&this.set(u,null,n)};e.prototype.test=function(){var j=false;this.set("cT","data");if(this.get("cT")==="data"){this.del("cT");j=true}return j};e.prototype.setOptions=function(j){if(typeof j!=="object")j=null;h=a(j)};return new e}();
(function(){window.jQuery&&function(a){a.cookies=jaaulde.utils.cookies;a.each({cookify:function(b){return this.each(function(){var c,e=["name","id"],h,j=a(this),n;for(c in e)if(!isNaN(c)){h=j.attr(e[c]);if(typeof h==="string"&&h!==""){if(j.is(":checkbox, :radio")){if(j.attr("checked"))n=j.val()}else n=j.is(":input")?j.val():j.html();if(typeof n!=="string"||n==="")n=null;a.cookies.set(h,n,b);break}}})},cookieFill:function(){return this.each(function(){var b,c,e=["name","id"],h,j=a(this);for(c=function(){b=
e.pop();return!!b};c();){h=j.attr(b);if(typeof h==="string"&&h!==""){c=a.cookies.get(h);if(c!==null)if(j.is(":checkbox, :radio"))j.val()===c?j.attr("checked","checked"):j.removeAttr("checked");else j.is(":input")?j.val(c):j.html(c);break}}})},cookieBind:function(b){return this.each(function(){var c=a(this);c.cookieFill().change(function(){c.cookify(b)})})}},function(b){a.fn[b]=this})}(window.jQuery)})();(function(){if(window.OpenLayers)window.OpenLayers.Util.cookies=jaaulde.utils.cookies})();
OpenLayers.Control.ScrollWheel=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,autoActivate:true,interval:25,slideFactor:0.75,initialize:function(){OpenLayers.Control.prototype.initialize.apply(this,arguments);this.handler=new OpenLayers.Handler.MouseWheel(this,{up:this.onWheelUp,down:this.onWheelDown})},onWheelUp:function(){this.map.pan(0,-this.slideFactor*this.map.getSize().h)},onWheelDown:function(){this.map.pan(0,this.slideFactor*this.map.getSize().h)},CLASS_NAME:"OpenLayers.Control.ScrollWheel"});
(function(){Drupal.dlts=Drupal.dlts||{};Drupal.behaviors.dlts={attach:function(a,b){Drupal.dlts.image.init(a,b)}};Drupal.dlts.image={init:function(a,b){try{if(typeof OpenLayers==="object"&&typeof b.dlts.image==="object")for(var c=0,e=b.dlts.image.filepath.length;c<e;c++)Drupal.dlts.image.openlayer(b.dlts.image.filepath[c].id,b.dlts.image.filepath[c].url,b.dlts.image.service,location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+b.basePath+"dlts/image/"+b.dlts.image.filepath[c].fid+
"/metadata",1);else throw"Err1";}catch(h){switch(h){case "Err1":window.console&&window.console.log("Not ready.");break}}},maps:[],openlayer:function(a,b,c,e,h){b={url_ver:"Z39.88-2004",svc_id:"info:lanl-repo/svc/getMetadata",rft_id:b,layername:"basic",format:"image/jpeg",metadataUrl:e};c=new OpenLayers.Layer.OpenURL("OpenURL",c,{layername:b.layername,format:b.format,rft_id:b.rft_id,metadataUrl:b.metadataUrl});b=c.getImageMetadata();c={center:new OpenLayers.LonLat(b.width/2,b.height/2),zoom:h,layers:[c],
theme:null,resolutions:c.getResolutions(),maxExtent:new OpenLayers.Bounds(0,0,b.width,b.height),tileSize:c.getTileSize(),controls:[]};h=[new OpenLayers.Control.KeyboardDefaults,new OpenLayers.Control.Attribution,new OpenLayers.Control.DLTSZoomInPanel({div:OpenLayers.Util.getElement("control-zoom-in")}),new OpenLayers.Control.DLTSZoomOutPanel({div:OpenLayers.Util.getElement("control-zoom-out")}),new OpenLayers.Control.Navigation({dragPanOptions:{enableKinetic:true},zoomWheelEnabled:false}),new OpenLayers.Control.ScrollWheel,
new OpenLayers.Control.TouchNavigation({dragPanOptions:{enableKinetic:true}})];a=new OpenLayers.Map(a,c);a.addControls(h);a.pan(0,(a.getSize().h-a.getTileSize().h*a.resolutions[a.resolutions.length-(a.getZoom()+1)])/2-5);Drupal.dlts.image.maps.push(a)}}})(jQuery);(function(){Drupal.dlts_book={};Drupal.behaviors.dlts_book={attach:function(){}}})(jQuery);
